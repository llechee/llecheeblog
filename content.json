{"meta":{"title":"Lzzã®åšå®¢","subtitle":"","description":null,"author":"Leechee","url":"https://blogs.leechee.top","root":"/"},"pages":[{"title":"","date":"2023-01-13T11:24:20.888Z","updated":"2023-01-13T11:24:20.888Z","comments":true,"path":"manifest.json","permalink":"https://blogs.leechee.top/manifest.json","excerpt":"","text":"{\"name\":\"leechee\",\"short_name\":\"leechee\",\"theme_color\":\"var(--lyx-theme)\",\"background_color\":\"var(--lyx-theme)\",\"display\":\"standalone\",\"scope\":\"/\",\"start_url\":\"/\",\"icons\":[{\"src\":\"/img/16.png\",\"sizes\":\"16x16\",\"type\":\"image/png\"},{\"src\":\"/img/36.png\",\"sizes\":\"36x36\",\"type\":\"image/png\"},{\"src\":\"/img/48.png\",\"sizes\":\"48x48\",\"type\":\"image/png\"},{\"src\":\"/img/72.png\",\"sizes\":\"72x72\",\"type\":\"image/png\"},{\"src\":\"/img/96.png\",\"sizes\":\"96x96\",\"type\":\"image/png\"},{\"src\":\"/img/144.png\",\"sizes\":\"144x144\",\"type\":\"image/png\"},{\"src\":\"/img/180.png\",\"sizes\":\"180X180\",\"type\":\"image/png\"},{\"src\":\"/img/apple-touch-icon.png\",\"sizes\":\"180x180\",\"type\":\"image/png\"},{\"src\":\"/img/192.png\",\"sizes\":\"192x192\",\"type\":\"image/png\"},{\"src\":\"/img/256.png\",\"sizes\":\"256x256\",\"type\":\"image/png\"},{\"src\":\"/img/512.png\",\"sizes\":\"512x512\",\"type\":\"image/png\"}],\"splash_pages\":null}"},{"title":"","date":"2023-01-09T01:49:46.885Z","updated":"2023-01-09T01:49:46.885Z","comments":true,"path":"package.json","permalink":"https://blogs.leechee.top/package.json","excerpt":"","text":"{\"name\":\"ariasakablog\",\"version\":\"1.0.17\",\"description\":\"SpeedUp!\",\"main\":\"index.js\",\"scripts\":{\"test\":\"echo \\\"Error: no test specified\\\" && exit 1\"},\"author\":\"\",\"license\":\"ISC\"}"},{"title":"å…³äº","date":"2021-03-30T07:57:51.000Z","updated":"2023-01-09T01:49:46.826Z","comments":true,"path":"about/index.html","permalink":"https://blogs.leechee.top/about/index.html","excerpt":"","text":""},{"title":"åˆ†ç±»","date":"2022-07-03T12:48:08.000Z","updated":"2023-01-09T01:49:46.828Z","comments":true,"path":"categories/index.html","permalink":"https://blogs.leechee.top/categories/index.html","excerpt":"","text":""},{"title":"bangumis","date":"2022-07-16T02:35:32.000Z","updated":"2023-01-09T01:49:46.828Z","comments":true,"path":"bangumis/index.html","permalink":"https://blogs.leechee.top/bangumis/index.html","excerpt":"","text":""},{"title":"æœ‹å‹åœˆ","date":"2022-01-29T07:23:17.000Z","updated":"2023-01-09T12:06:34.845Z","comments":true,"path":"fcircle/index.html","permalink":"https://blogs.leechee.top/fcircle/index.html","excerpt":"","text":"ğŸ£ é’“é±¼ ä¸ä¸»æœºé€šè®¯ä¸­â€¦â€¦ var fdataUser = { apiurl: '' }"},{"title":"å°ç©ºè°ƒ","date":"2022-11-24T23:37:35.000Z","updated":"2023-01-09T01:49:46.878Z","comments":true,"path":"kongtiao/index.html","permalink":"https://blogs.leechee.top/kongtiao/index.html","excerpt":"","text":""},{"title":"fontawesomeå¯¹ç…§","date":"2022-11-25T00:16:09.000Z","updated":"2023-01-09T01:49:46.830Z","comments":true,"path":"fontawesome/index.html","permalink":"https://blogs.leechee.top/fontawesome/index.html","excerpt":"","text":"window.parent.postMessage(object,'*'); document.getElementById('ifm').scroll(0,document.getElementById('ifm').document.body.scrollHeight);"},{"title":"å£°æ˜","date":"2022-07-10T03:13:49.000Z","updated":"2023-01-09T01:49:46.879Z","comments":true,"path":"license/index.html","permalink":"https://blogs.leechee.top/license/index.html","excerpt":"","text":"CopyrightÂ© LYX 2022 å£°æ˜ | ç‰ˆæƒåè®® ä¸ºäº†ä¿æŒæ–‡ç« è´¨é‡ï¼Œå¹¶ä¿æŒäº’è”ç½‘çš„å¼€æ”¾å…±äº«ç²¾ç¥ï¼Œä¿æŒé¡µé¢æµé‡çš„ç¨³å®šï¼Œç»¼åˆè€ƒè™‘ä¸‹æœ¬ç«™çš„æ‰€æœ‰åŸåˆ›æ–‡ç« å‡é‡‡ç”¨ccåè®®ä¸­æ¯”è¾ƒä¸¥æ ¼çš„åˆ›ä½œå…±ç”¨-éå•†ä¸šæ€§-ç¦æ­¢æ¼”ç» 4.0 å›½é™…æ ‡å‡†ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦æƒ³èƒ½å¤Ÿæ›´åŠ æ¸…æ¥šæ˜ç™½çš„ä»‹ç»æœ¬ç«™çš„åè®®æ ‡å‡†å’Œè¦æ±‚ã€‚æ–¹ä¾¿æ‚¨åˆç†çš„ä½¿ç”¨æœ¬ç«™çš„æ–‡ç« ã€‚ æœ¬ç«™æ— å¹¿å‘ŠåµŒå…¥å’Œå•†ä¸šè¡Œä¸ºã€‚è¿ååè®®çš„è¡Œä¸ºä¸ä»…ä¼šæŸå®³åŸä½œè€…çš„åˆ›ä½œçƒ­æƒ…ï¼Œè€Œä¸”ä¼šå½±å“æ•´ä¸ªç‰ˆæƒç¯å¢ƒã€‚å¼ºçƒˆå‘¼åæ‚¨èƒ½å¤Ÿåœ¨è½¬è½½æ—¶éµå®ˆåè®®ã€‚éµå®ˆåè®®çš„è¡Œä¸ºå‡ ä¹ä¸ä¼šå¯¹æ‚¨çš„ç›®æ ‡äº§ç”Ÿè´Ÿé¢å½±å“ï¼Œé¼“åŠ±åˆ›ä½œç¯å¢ƒæ˜¯æ¯ä¸ªåˆ›ä½œè€…çš„æœŸæœ›ã€‚ åšå®¢çš„åˆ†ç±»ä»‹ç» ç»éªŒåˆ†äº«åŒ…å«åŸåˆ›å†…å®¹ï¼ŒåŸåˆ›å†…å®¹çš„éå•†ç”¨è½¬è½½å¿…é¡»ä¸ºå®Œæ•´è½¬è½½ä¸”æ ‡æ³¨å‡ºå¤„çš„å¸¦æœ‰è¶…é“¾æ¥åŠŸèƒ½çš„å®Œæ•´urlé“¾æ¥ï¼ˆéœ€èƒ½ç‚¹å‡»ï¼‰æˆ–è®¿é—®åŸæ–‡ä¹‹ç±»å­—æ ·çš„è¶…é“¾æ¥ã€‚ è½¬è½½å†…å®¹ä¸ºè½¬è½½å†…å®¹ï¼Œå‡æ ‡æ³¨äº†å‡ºå¤„ã€‚å»ºè®®ä½¿ç”¨åŸé“¾æ¥æ‰“å¼€ï¼Œå°Šé‡åŸä½œè€…ã€‚æ‰€æœ‰è½¬è½½å†…å®¹å°½å¯èƒ½ä¸ºå®Œæ•´è½¬è½½ï¼ˆå¦‚æœæœ‰éƒ¨åˆ†å†…å®¹æœ‰é—®é¢˜å¯èƒ½ä¼šç”±éƒ¨åˆ†åˆ å‡å’Œè¡¥å……ï¼‰å¹¶è¿›è¡Œæ ·å¼è°ƒæ•´ä»¥é€‚åˆæœ¬åšå®¢ã€‚å¦‚æœè½¬è½½è¯¥éƒ¨åˆ†å†…å®¹éœ€è¦è”ç³»åŸä½œè€…ã€‚ ä½ å¯ä»¥åšä»€ä¹ˆï¼Ÿ åªè¦æ‚¨éµå®ˆæœ¬é¡µçš„è®¸å¯ï¼Œæ‚¨å¯ä»¥è‡ªç”±åœ°å…±äº«æ–‡ç« çš„å†…å®¹ â€” åœ¨ä»»ä½•åª’ä»‹ä»¥ä»»ä½•å½¢å¼å¤åˆ¶ã€å‘è¡Œæœ¬ä½œå“ã€‚å¹¶ä¸”æ— éœ€é€šçŸ¥ä½œè€…ã€‚ ä½ éœ€è¦éµå®ˆä»€ä¹ˆæ ·çš„è®¸å¯ï¼Ÿ ç½²å æ‚¨å¿…é¡»æ ‡æ³¨å†…å®¹çš„æ¥æºï¼Œæ‚¨éœ€è¦åœ¨æ–‡ç« å¼€å¤´éƒ¨åˆ†ï¼ˆæˆ–è€…æ˜æ˜¾ä½ç½®ï¼‰æ ‡æ³¨åŸæ–‡ç« é“¾æ¥ï¼ˆå»ºè®®ä½¿ç”¨è¶…é“¾æ¥æå‡é˜…è¯»ä½“éªŒï¼‰ã€‚ ç¦æ­¢å•†ç”¨ æœ¬ç«™å†…å®¹å…è´¹å‘äº’è”ç½‘æ‰€æœ‰ç”¨æˆ·æä¾›ï¼Œåˆ†äº«æœ¬ç«™æ–‡ç« æ—¶ç¦æ­¢å•†ä¸šæ€§ä½¿ç”¨ã€ç¦æ­¢åœ¨è½¬è½½é¡µé¢ä¸­æ’å…¥å¹¿å‘Šï¼ˆä¾‹å¦‚è°·æ­Œå¹¿å‘Šã€ç™¾åº¦å¹¿å‘Šï¼‰ã€ç¦æ­¢é˜…è¯»çš„æ‹¦æˆªè¡Œä¸ºï¼ˆä¾‹å¦‚å…³æ³¨å…¬ä¼—å·ã€ä¸‹è½½Appåè§‚çœ‹æ–‡ç« ï¼‰ã€‚ ç¦æ­¢æ¼”ç» åˆ†äº«å…¨éƒ¨å†…å®¹ï¼ˆæ— ä¿®æ”¹ï¼‰ æ‚¨éœ€è¦åœ¨æ–‡ç« å¼€å¤´éƒ¨åˆ†ï¼ˆæˆ–è€…æ˜æ˜¾ä½ç½®ï¼‰æ ‡æ³¨åŸæ–‡ç« é“¾æ¥ï¼ˆå»ºè®®ä½¿ç”¨è¶…é“¾æ¥ï¼‰ åˆ†äº«éƒ¨åˆ†æˆªå–å†…å®¹æˆ–è€…è¡ç”Ÿåˆ›ä½œ ç›®å‰æœ¬ç«™å…¨éƒ¨åŸåˆ›æ–‡ç« çš„è¡ç”Ÿå“ç¦æ­¢å…¬å¼€åˆ†äº«å’Œåˆ†å‘ã€‚å¦‚æœ‰æ›´å¥½çš„ä¿®æ”¹å»ºè®®ï¼Œå¯ä»¥åœ¨å¯¹åº”æ–‡ç« ä¸‹ç•™è¨€ã€‚å¦‚æœ‰è¡ç”Ÿåˆ›ä½œéœ€æ±‚ï¼Œå¯ä»¥åœ¨è¯„è®ºä¸­è”ç³»ã€‚ ä»€ä¹ˆå†…å®¹ä¼šè¢«ç‰ˆæƒä¿æŠ¤ åŒ…æ‹¬ä½†ä¸é™äºï¼š æ–‡ç« å°é¢å›¾ç‰‡ æ–‡ç« æ ‡é¢˜å’Œæ­£æ–‡ ç«™ç‚¹å›¾ç‰‡ç´ æï¼ˆä¸å«ä¸»é¢˜è‡ªå¸¦ç´ æï¼‰ ä¾‹å¤–æƒ…å†µ æœ¬ç€å‹å¥½äº’ç›¸è¿›æ­¥çš„åŸåˆ™ï¼Œè¢«æœ¬ç«™å‹é“¾æ”¶å½•çš„åšå®¢å…è®¸åšå®¢æ–‡ç« å†…å®¹çš„è¡ç”Ÿå“çš„åˆ†äº«å’Œåˆ†å‘ï¼Œä½†ä»éœ€æ ‡æ³¨å‡ºå¤„ã€‚ æœ¬ç€äº’è”ç½‘å¼€æ”¾ç²¾ç¥ï¼Œæ‚¨å¯ä»¥åœ¨åšå®¢æ–‡ç« ä¸‹æ–¹ç•™è¨€è¦æ±‚æˆæƒåšæ–‡çš„è¡ç”Ÿå“çš„åˆ†äº«å’Œåˆ†å‘ï¼Œæ ‡æ³¨æ‚¨çš„ç½‘ç«™åœ°å€ã€‚ ä½œè€…åŸåˆ›ä»£ç åŠç½‘ç«™æºä»£ç åè®® ç½‘ç«™æ‰€æœ‰ä»£ç é‡‡ç”¨MITåè®®ï¼Œå¦‚æœ‰ä¸åŒï¼Œä½œè€…ä¼šè¿›è¡Œæ ‡æ³¨ éšä¾¿æ‰’ç«™å§ï¼ ç½‘ç«™æœ¬èº«æœ‰å…³ æœ¬ç«™å·²å¼€å¯å­˜å‚¨æ¡¶å…¨ç«™åŠ é€Ÿï¼Œæ¥å…¥äº†çµå¤©ç›¾CDNï¼Œè¯·åˆ·æµé‡çš„è€—å­å°¾æ±ï¼ï¼ï¼"},{"title":"å‹é“¾","date":"2022-07-03T12:40:57.000Z","updated":"2023-01-13T11:23:09.840Z","comments":true,"path":"links/index.html","permalink":"https://blogs.leechee.top/links/index.html","excerpt":"","text":"ğŸ£ é’“é±¼ å†°ç³–çº¢èŒ¶ â€œå†°ç³–çº¢èŒ¶â€åšå®¢é­”æ”¹ç»„ç»‡çš„å¤§ä½¬ä»¬ å°å†°ã€å†°ã€‘ åšä¸ªæœ‰æ¢¦æƒ³çš„äººï¼ Akilarã€ç³–ã€‘ æœŸå¾…æ‚¨çš„å…‰ä¸´ï¼ å¼ æ´ªHeoã€çº¢ã€‘ åˆ†äº«è®¾è®¡ä¸ç§‘æŠ€ç”Ÿæ´» è´°çŒ¹ã€èŒ¶ã€‘ ç”¨è¿™ç”Ÿå‘½ä¸­çš„æ¯ä¸€ç§’ï¼Œç»™è‡ªå·±ä¸€ä¸ªä¸åæ‚”çš„æœªæ¥ æˆ‘çš„ä¿¡æ¯Butterfly & MengDfluidvolantishtml12345- name: Ariasakaã®å°çª link: https://yisous.xyz avatar: https://bu.dusays.com/2022/12/15/639a9ebbbc1ad.jpg descr: äººæœ‰æ‚²æ¬¢ç¦»åˆ æœˆæœ‰é˜´æ™´åœ†ç¼º siteshot: https://vercel.yisous.xyz/img/siteshot.png123456- &#123; title: &#x27;Ariasakaã®å°çª&#x27;, intro: &#x27;äººæœ‰æ‚²æ¬¢ç¦»åˆ æœˆæœ‰é˜´æ™´åœ†ç¼º&#x27;, link: &#x27;https://yisous.xyz/&#x27;, image: &#x27;https://bu.dusays.com/2022/12/15/639a9ebbbc1ad.jpg&#x27;&#125;123456- title: Ariasakaã®å°çª avatar: https://bu.dusays.com/2022/12/15/639a9ebbbc1ad.jpg url: https://yisous.xyz/ screenshot: https://yisous.xyz/img/siteshot.png keywords: ä¸ªäººåšå®¢ description: äººæœ‰æ‚²æ¬¢ç¦»åˆ æœˆæœ‰é˜´æ™´åœ†ç¼º1&lt;a href=&quot;https://yisous.xyz&quot;&gt;&lt;img src=&quot;https://pic.imgdb.cn/item/63bf8e38be43e0d30e6e6eb2.webp&quot; alt=&quot;avatar&quot;&gt;leechee&lt;/a&gt; æ¨èæ ‡ç­¾è¡¡é‡æ ‡å‡†1.ç½‘ç«™æ²¡æœ‰ä¸è‰¯å†…å®¹ 2.æ–‡ç« è´¨é‡è¾ƒé«˜ 3.æ–‡ç« è¾ƒå¤š/æˆ–è€…è´¨é‡è¿‡ç¡¬ å¦‚ä½•ç”³è¯·å‹é“¾ï¼Ÿ ç‚¹ä¸‹é¢çš„æŒ‰é’®ï¼ å¿«é€Ÿæ·»åŠ å‹é“¾"},{"title":"","date":"2023-01-13T15:11:36.202Z","updated":"2023-01-13T15:11:36.202Z","comments":true,"path":"messageboard/index.html","permalink":"https://blogs.leechee.top/messageboard/index.html","excerpt":"","text":"è¯´è¯´ä½ çš„å»ºè®®å§... ä½ ä¹Ÿå¯ä»¥ç§å‘æˆ‘çš„é‚®ä»¶2543012055@qq.comå¯»æ±‚å¸®åŠ©æˆ–è€…æä¾›å»ºè®®ã€‚ éšè—/æ˜¾ç¤ºå¼¹å¹•ï¼ˆç¼“è§£å¡é¡¿ï¼‰ document.title = 'ç•™è¨€æ¿ | ';"},{"title":"å¥½å¬çš„éŸ³ä¹","date":"2022-07-14T08:37:40.000Z","updated":"2023-01-09T01:49:46.881Z","comments":true,"path":"musics/index.html","permalink":"https://blogs.leechee.top/musics/index.html","excerpt":"","text":"å¥½å¬çš„æ­Œ æ­Œæ›²æ’è¡Œæ¦œ åšä¸»ä¼šæ¯éš”ä¸€æ®µæ—¶é—´å°†è‡ªå·±è¿‘æœŸçˆ±å¬çš„æ­Œæ’è¡Œåœ¨ä¸‹é¢ 2022-7 å’•å’•å’•â€¦"},{"title":"æ•²æœ¨é±¼","date":"2022-11-25T00:16:09.000Z","updated":"2023-01-09T01:49:46.882Z","comments":true,"path":"muyu/index.html","permalink":"https://blogs.leechee.top/muyu/index.html","excerpt":"","text":"åŠŸå¾·ï¼š0 åŠŸå¾·+100 .muyu-layout { background: black; display: flex; width: 100%; border-radius: 20px; position: relative; justify-content: center; height: 90vh; align-items: center; } #muyu-box img { width: 250px; } #jishu-box{ top: 55px; position: absolute; } #muyu-box p { color: white; opacity: 0; font-size: 25px; } #jishu-box p { color: white; font-size: 30px; } var gongde = document.getElementById(\"gongde\"); var muyu = document.getElementById(\"muyu\"); var jishu = document.getElementById(\"jishu-box\"); var mp3Url = \"/music/muyu.mp3\"; var player = new Audio(mp3Url); var num = 0; muyu.addEventListener(\"click\", function () { num+=100; player.load(); player.play(); muyu.animate([{ transform: 'scale(0.85)' }, { transform: 'scale(1.03)' }, { transform: 'scale(1)' }], 500); gongde.animate([{ opacity: 0, transform: 'translateY(0)' },{ opacity: 0.3, transform: 'translateY(-10px)' },{ opacity: 0.8, transform: 'translateY(-20px)' }, { opacity: 1, transform: 'translateY(-30px)' }, { opacity: 0.8, transform: 'translateY(-35px)' }, { opacity: 0, transform: 'translateY(-40px)' }], 600); jishu.innerHTML = \"åŠŸå¾·ï¼š\"+num+\"\"; });"},{"title":"è¯´è¯´","date":"2023-01-13T15:36:09.756Z","updated":"2023-01-13T15:36:09.756Z","comments":true,"path":"speaks/index.html","permalink":"https://blogs.leechee.top/speaks/index.html","excerpt":"","text":"function doSpeaks() { document.title = 'Lzzã®åšå®¢'; bbtalk.init({ appId: \"\", appKey: \"\", serverURLs: '', pageSize:1919810 }) } document.addEventListener('DOMContentLoaded', (e) => { doSpeaks(); }) document.addEventListener('pjax:complete', (e) => { doSpeaks(); })"},{"title":"åˆ†ç«™","date":"2022-08-04T03:38:05.000Z","updated":"2023-01-09T01:49:46.884Z","comments":true,"path":"othersite/index.html","permalink":"https://blogs.leechee.top/othersite/index.html","excerpt":"","text":"ä¸€äº›åšä¸»æ­å»ºçš„å…¶å®ƒçš„ç«™ç‚¹ï¼š PSï¼šåˆ’æ‰çš„è¡¨ç¤ºå·²æŒ‚ åŸŸå ç”¨å¤„ æ­å»ºåŸå›  yisous.xyz åšå®¢ï¼Œä¹Ÿæ˜¯ä¸»ç«™ï¼ˆé»˜è®¤æ— wwwï¼‰ åˆ†äº«ä¸€äº›ä¸œè¥¿ oj.yisous.xyz OnlineJudgeç³»ç»Ÿ ç”¨äºè‡ªå·±ç»ƒä¹ ä¿¡å¥¥èµ›é¢˜ç›®å…¶å®æ˜¯ææ¥è±¡å¾æ„ä¹‰çš„ status.yisous.xyz ç½‘ç«™çŠ¶æ€ç›‘æ§ ç”¨äºç›‘æ§ç½‘ç«™çš„çŠ¶æ€ï¼ŒåŸºäºuptimeRobot mc.yisous.xyz MinecraftæœåŠ¡å™¨ ç”¨æ¥è”æœºç©ï¼Œç±»ä¼¼äºç²‰ä¸æœé‚£ç§ï¼Œè¿˜æ²¡å¼„å¥½ tc.yisous.xyz Typechoæµ‹è¯•ç«™ çœ‹çœ‹typechoæ€ä¹ˆæ ·ï¼Œææ¥ç©çš„ï¼Œå·²ç»ç”±Wordpressè¿ç§»è‡³å½“å‰çš„Typechoï¼Œæœªæ¥æœåŠ¡å™¨æ–‡æ¡£ä¹‹åå¯èƒ½ä¼šæ¢ç”¨ yisous.tk/lyxop.xyz çŸ­é“¾æ¥ç”Ÿæˆå™¨ åˆ¶ä½œçŸ­é“¾æ¥ï¼Œä½¿ç”¨æœ¬ç«™åŸŸåï¼ŒæŠ€æœ¯æœ‰é™ï¼Œæ‰€ä»¥å¾ˆä¸‘ bbs.yisous.xyz LYXã®è®ºå› äº¤æµä¸€äº›äº‹æƒ…ï¼Œä¹Ÿå¯ä»¥é—²èŠï¼Œè¿˜æ²¡å¼„è¯´æ˜¯äº¤æµå…¶å®è¿˜æ˜¯ææ¥è±¡å¾æ„ä¹‰ææ¥ç©çš„ åšä¸»çš„ä¸€äº›åŸŸå åŸŸå ç”¨å¤„ yisous.xyz ä¸»è¦ä½¿ç”¨çš„åŸŸåï¼Œå½“æ—¶çœ‹åˆ°dynadot14å—ä¸€å¹´å°±ä¹°äº†ï¼Œè¿™ä¸ªåå­—å°±æ˜¯å¿µèµ·æ¥é¡ºå£ lyxop.xyz æ³¨å†Œæ‹¿æ¥ç»™å‰¯ç«™ç”¨çš„ï¼Œä½¿ç”¨blog.lyxop.xyzè¿›å…¥ä¸»ç«™ã€‚ç”±äºåŸŸåç»­è´¹å¤ªè´µï¼Œæ‰€ä»¥æ‰“ç®—ä»¥åæ¢æˆyisous.tkï¼Œå…¶ä½™ä¸€æ · ariasaka.top åœ¨ç¡…äº‘ç™½å«–çš„ä¸€ä¸ªåŸŸåï¼Œåç»­å¯èƒ½ä¼šä½œä¸ºä¸»åŸŸåä½¿ç”¨ lyxoff2233.eu.org ä»¥å‰çš„eu.orgåŸŸåï¼Œè¿˜ä¸é”™ï¼Œåé¢è¦æ‹¿æ¥æƒ³åŠæ³•ç”¨ä¸€ç”¨ lyxofficial.eu.org å›¾ä¸€ä¹åŸŸå yisous.tk 20å¹´ä¸ºäº†æ­æ ‘è“æ´¾æœæçš„åŸŸåï¼Œå¯æ˜¯æ ‘è“æ´¾æ²¡å¤šä¹…å°±è¢«æˆ‘è¶…åäº†ï¼Œç°åœ¨å°±ä¹°ä¸èµ·äº†ï¼Œåæ¥è¿™ä¸ªåŸŸåè¿‡æœŸï¼Œç°åœ¨åˆå¼„å›æ¥ä½œä¸ºå‰¯ç«™ä½¿ç”¨ï¼Œä½¿ç”¨blog.yisous.tkè¿›å…¥ä¸»ç«™ï¼Œwwwå’Œæ ¹åŸŸåä¸»ç«™ç”¨äºæä¾›çŸ­åŸŸåæœåŠ¡ï¼ˆå·²æŒ‚ï¼‰ã€‚ æ³¨æ„ï¼šæœ¬åšå®¢å¼ºåˆ¶HTTPSï¼Œæ—§ç”µè„‘å¯èƒ½ä¼šå‡ºç°é—®é¢˜ã€‚ #article-container a:not(.post-meta__tags):not(img):not(a[data-fancybox]):hover{ border-radius: 6px; background-color: #425aef; text-decoration: none!important; color:#fff!important; border:none; box-shadow: #dadada 0 0 8px 2px; } #article-container a:not(.post-meta__tags):not(.headerlink):not(a[data-fancybox]){ /* padding:0 2px; */ /* text-decoration: 1px solid #425aef; */ /* text-decoration: underline; */ border-bottom: 2px solid #425aef; color:var(--font-color); padding:4px }"},{"title":"æ ‡ç­¾","date":"2022-07-03T12:51:29.000Z","updated":"2023-01-09T01:49:46.911Z","comments":true,"path":"tags/index.html","permalink":"https://blogs.leechee.top/tags/index.html","excerpt":"","text":""},{"title":"æ—©æŠ¥","date":"2022-11-24T23:37:35.000Z","updated":"2023-01-09T01:49:46.912Z","comments":true,"path":"zaobao/index.html","permalink":"https://blogs.leechee.top/zaobao/index.html","excerpt":"","text":""},{"title":"å·¥å…·","date":"2022-07-13T07:23:02.000Z","updated":"2023-01-09T12:06:38.049Z","comments":true,"path":"tools/index.html","permalink":"https://blogs.leechee.top/tools/index.html","excerpt":"","text":"é•œåƒç«™å¸¸ç”¨çš„PyPi/npm/SDKé•œåƒç«™ TUNA æ¸…åå¤§å­¦å¼€æºé•œåƒç«™ è±†ç“£PYPIæº è±†ç“£PYPIé•œåƒç«™ jsDelivr jsDelivré™æ€èµ„æºåŠ é€Ÿï¼ˆGFWå·²å¢™ï¼‰ unpkg å¦ä¸€ä¸ªé™æ€èµ„æºåŠ é€ŸCDNï¼ˆæ²¡å¢™ï¼‰ èµ„æºä¸‹è½½ç±»å¥½ç”¨çš„èµ„æºä¸‹è½½/æ”¶å½•ç«™ MSDN,æˆ‘å‘Šè¯‰ä½  å¾®è½¯MSDNED2Ké•œåƒæ”¶å½•ç«™ å”§å”§Down ä¸‹è½½Bç«™è§†é¢‘ æ— æŸç”Ÿæ´» å…è´¹ä¸‹è½½å…¨ç½‘ç»å¤§éƒ¨åˆ†æ— æŸéŸ³ä¹ ç™¾åº¦ç½‘ç›˜ç®€æ˜“ä¸‹è½½åŠ©æ‰‹ ç‰¹åˆ«å¥½ç”¨çš„bdç½‘ç›˜ç ´è§£å™¨ï¼ˆä¸çŸ¥é“ä¸ºä»€ä¹ˆå…¬ä¼—å·åˆ†äº«å¾ˆæ€•æ•æ„Ÿè¯ï¼‰ æ—¥å¸¸å·¥å…·å¸¸ç”¨æ—¥å¸¸å·¥å…· è®¡æ—¶å™¨ é—¹é’Ÿç½‘è®¡æ—¶å™¨ å›¾ç‰‡ç³»åˆ—å…³äºå›¾ç‰‡çš„å·¥å…· Bigjpg é«˜æ¸…ä¿®å¤å›¾ç‰‡ä¸é™å™ª waifu2x é«˜æ¸…ä¿®å¤å›¾ç‰‡ä¸é™å™ªï¼Œæ€§èƒ½è²Œä¼¼å¥½ä¸€ç‚¹ jpgrm é«˜æ¸…ä¿®å¤å›¾ç‰‡ä¸é™å™ª Sheilds åˆ¶ä½œGithubé¡¹ç›®å¾½ç«  æç®€å£çº¸ æµ·é‡é«˜æ¸…å£çº¸ç¾å›¾&äºŒæ¬¡å…ƒå›¾ç‰‡ å¸¸ç”¨æµ‹è¯•ç½‘ç«™æµ‹è¯•ä¸€äº›åŸºç¡€åŠŸèƒ½ è¿˜æ²¡åšå®Œå‘¢ ä½ ç…å•¥ï¼Ÿè¿˜å¦¹åšå®Œå‘¢ï¼"},{"title":"ç½‘ç«™æ›´æ–°æ—¥å¿—","date":"2022-07-02T11:56:00.000Z","updated":"2023-01-09T01:49:46.912Z","comments":true,"path":"update/index.html","permalink":"https://blogs.leechee.top/update/index.html","excerpt":"","text":"Acryple v1.0.0 2022-10-23 ç»è¿‡äº†æ·±æ€ç†Ÿè™‘ï¼Œåšå®¢ä¸»é¢˜ç‹¬ç«‹å•¦ï¼ ç°åœ¨çš„ä¸»é¢˜å«åšAcrypleï¼Œå…·ä½“è§ï¼š å¼•ç”¨ç«™å¤–åœ°å€ åšå®¢æ­£å¼ç‹¬ç«‹ä¸»é¢˜å•¦ï¼ Ariasakaã®å°çª ç›®å‰åšå®¢æœ‰ï¼š æ›´å¥½çš„å³é”®èœå• ç•™è¨€å¼¹å¹• åšå®¢è®¾ç½®ï¼ˆåŠŸèƒ½è´¼å¤šå¤§å®¶è‡ªå·±çœ‹ï¼‰ ä¸é”™çš„UIï¼Œè‡³ä»Šä¸ºæ­¢ä¸»css(style.css)æœ‰3kè¡Œ ä¸€äº›å°åŠŸèƒ½æ¯”å¦‚å…¬ç¥­æ—¥å¼¹çª—è‡ªåŠ¨æ¬¢è¿ç­‰ å¤§æ¦‚å°±æ˜¯è¿™äº›äº†ã€‚ Acryple v1.0.110 2022-12-13 åŠ å…¥pwa å…¨ç«™é‡‡ç”¨å­˜å‚¨æ¡¶åŠ é€Ÿï¼Œå¯æƒœå¹¶æ²¡æœ‰åµç”¨ å¾ˆå¤šèµ„æºè½¬ä¸ºäº†ç™½å«–eleme æŠ›å¼ƒmetingjsï¼Œç›®å‰aplayerçš„æ­Œæ›²æ‰˜ç®¡åœ¨eleme npmé•œåƒä¸­ å‹é“¾æ·»åŠ éšæœºå¤´åƒ åšå®¢è®¾ç½®ç”»é¥¼çš„ä¸‰ä¸ªåŠŸèƒ½ä»æœªä¿®å¤ qwq ä¿®å¤ä¸€äº›bug å¤§æ”¹swiperï¼Œå‚è€ƒè‡ªLeonus å®ŒæˆBuild101çš„å¤§éƒ¨åˆ†é¥¼ ä¿®å¤äº†æœ‹å‹åœˆçˆ¬å–bug swæ¢å›cyfan å¥—ä¸Šäº†çµå¤©ç›¾äºšå¤ªCDN å› ä¸ºæ€§èƒ½é—®é¢˜ï¼Œç§»é™¤äº†æ–‡ç« æ—¥å† ç»™å¯¼èˆªæ åŠ ä¸Šæ»šåŠ¨åŠ¨ç”»ï¼ˆç”»é¥¼ï¼‰ bbå¸ƒå±€é‡æ„ï¼ˆç”»é¥¼ï¼‰ åˆ†ç±»æ ‡ç­¾æ bugä¿®å¤ï¼ˆç”»é¥¼ï¼‰ è¯­é›€äº‘ç«¯å†™ä½œï¼ˆå› bugå·²å›æ»šï¼‰ gulpï¼ˆå› bugå·²å›æ»šï¼‰ æ–‡ç« è¿›åº¦æ˜¾ç¤ºï¼ˆç”»é¥¼ï¼‰ ä¿®å¤pjaxçš„bug å³é”®èœå•åŠŸèƒ½å®Œå–„ Acryple v1.0.101 2022-12-06 ï¼ˆPSï¼šéƒ¨åˆ†ç”»å¤§é¥¼ å£®ä¸¾ï¼šé€‚é…pjaxï¼ï¼ï¼ ä¿®å¤é»‘å¹•çš„bug ä¿®å¤è¯„è®ºå¼¹å¹•domé”™è¯¯ï¼Œæº¢å‡ºçš„bug å¼¹å¹•æ¢ç”¨swiperæ–¹æ¡ˆï¼Œå¹¶ä¸”ä¼˜åŒ–æ ·å¼ é¦–é¡µbbå¢åŠ å¤©æ•°æ˜¾ç¤ºï¼Œä»¥åŠæ¢ç”¨swiper(é¢„è®¡) ä¿®å¤ä¸€äº›bugï¼ˆe.g.aplayerã€åšå®¢è®¾ç½® ä¼˜åŒ–éƒ¨åˆ†åŠ¨ç”»/æ ·å¼ å®Œå–„åšå®¢æ§åˆ¶é¢æ¿ï¼Œä»æœ‰éƒ¨åˆ†æœªå®Œå·¥ ä¿®å¤éƒ¨åˆ†æ–‡ç« é¡µé¢æº¢å‡ºçš„bug æ‚¼å¿µæŸäººï¼Œbanneræ¢å›¾ paceæ¢ç”¨xlencoçš„èƒ¶å›Šæ–¹æ¡ˆ ç”±äºæœªçŸ¥ç‰¹æ€§åˆ é™¤äº†pjaxçš„åŠ è½½åŠ¨ç”»ï¼Œé¦–æ¬¡ä¿ç•™ éƒ¨åˆ†èµ„æºæ¢ç”¨ç¼¤çº·äº‘ æ¢ç”¨ç©ºæ¢¦çš„sw ä¸æ–­ä¼˜åŒ–åŠ è½½é€Ÿåº¦ingâ€¦ ä¿®å¤é¦–é¡µè½®æ’­bug(é¢„è®¡) è¯„è®ºæ ·å¼ä¿®æ”¹ï¼Œé¢„è®¡æ·»åŠ ç”¨æˆ·tagåŠŸèƒ½ æ›´æ¢èƒŒæ™¯æ²¡æœ‰æ—¶æ•ˆé™åˆ¶äº† æ¬¢è¿æ–‡æœ¬ å·¦å³æ åˆ‡æ¢ å¼¹å¹•å¼€å…³è®¾ç½®è‡ªåŠ¨æ˜¾éš è½æ¨±ç‰¹æ•ˆ aplayeræ˜¾éšåŠŸèƒ½ æ˜æš—æ¨¡å¼è‡ªåŠ¨åˆ‡æ¢ã€å›ºå®šå¯¼èˆªæ åŠŸèƒ½ï¼ˆé¢„è®¡ï¼‰ è¾¹æ æ ·å¼ä¿®æ”¹ ä¿®å¤ç‚¹èµç¬¬ä¸€èµæ²¡ååº”çš„bug ä¿®å¤ghactionséƒ¨ç½²æ²¡æœ‰npmç¼“å­˜çš„bugtnndæˆ‘ç­‰åå‡ åˆ†é’Ÿå®‰è£…ä¾èµ–ç­‰å‡ ä¸ªæœˆäº†ï¼Œç»“æœæ˜¯é¡ºåºåäº† ç›®å‰æœ‹å‹åœˆåç«¯å‡ºç°äº†bugï¼Œå¯¼è‡´ä¸æ›´æ–°ï¼Œè¯·é™å¾…ä¿®å¤ Acryple v1.0.100 2022-12-04 ä¿®å¤éƒ¨åˆ†bugï¼ˆä¸ï¼Œç‰¹æ€§ ä¼˜åŒ–éƒ¨åˆ†åŠ¨ç”»/æ ·å¼ ä¿®æ”¹å³é”®èœå• é‡å†™åšå®¢è®¾ç½®ï¼Œå¹¶å°† rightside çš„éƒ¨åˆ†åŠŸèƒ½ç§»åŠ¨åˆ°åšå®¢è®¾ç½®ä¸­ï¼Œçµæ„Ÿæ¥æºäºichikaï¼ˆæœªå®Œå·¥ æ”¯æŒéšè— ASide äº† çŸ­æš‚å˜ç° ä¿®å¤å…¬ç¥­æ—¥jsçš„bug ä¿®å¤å³é”®èœå•åœ¨ä¸»é¡µä¹Ÿèƒ½å¼€å¯é˜…è¯»æ¨¡å¼çš„bug ä¼˜åŒ–æ‰‹æœºç«¯é˜…è¯»ä½“éªŒï¼Œå»å¡ç‰‡åŒ– ä¼˜åŒ–latexæ ·å¼ ä¿®å¤éƒ¨åˆ†åˆ†è¾¨ç‡ä¸‹æ— å¯¼èˆªæ çš„bug aplayerçš„ä½“éªŒæ›´å¥½äº† ä¼˜åŒ–éƒ¨åˆ†æ ·å¼ï¼Œé€‚é…éƒ¨åˆ†è¿˜æœªé€‚é…çš„é»‘æš—æ¨¡å¼ åŠ äº†ä¸€ä¸ªå­—ä½“ é‡å†™åˆ†ç±»å’Œæ ‡ç­¾ã€å½’æ¡£é¡µçš„æ ·å¼ï¼Œæ¥æºäºichika ä¼˜åŒ–é¡µè„šæŸ¥çœ‹ä½“éªŒ ä¼˜åŒ–ç½‘ç«™æ€§èƒ½ æ”¯æŒå…¨å± css 5k+ qpzc è§£å°è¾£ï¼ï¼ï¼ ç©¶æè·³å·ï¼Ÿï¼CRT18:?! Acryple v1.0.92 ä¿®å¤éƒ¨åˆ†bugï¼ˆä¸ï¼Œç‰¹æ€§ ä¼˜åŒ–éƒ¨åˆ†æ ·å¼ æ›´æ”¹äº†åšå®¢è®¾ç½®çš„éƒ¨åˆ†ä¸»é¢˜è‰² pagesé¡µé¢åœ¨Acrylicä¸»é¢˜ä¸‹çš„èƒŒæ™¯å¾—åˆ°äº†æ”¹å–„ æ›´æ”¹åŠ è½½é¡µé¢èƒŒæ™¯ é‡æ–°è¿›è¡Œéƒ¨åˆ†æ–­ç‚¹ æŠŠåšå®¢api\\æœåŠ¡å…¨éƒ¨è¿ç§»åˆ°äº†å¦ä¸€ä¸ªgithubè´¦å·~~(åƒåœ¾æ¡¶)~~ä¸Š ä¼˜åŒ–æœç´¢UI å¯¹butterfly4.5.1è¿›è¡Œäº†é€‰æ‹©æ€§åŒæ­¥(ä¼˜åŒ–ç¹ä½“å­—åº“) ç–«æƒ…é€€é€€é€€awa Acryple v1.0.91 ä¿®å¤éƒ¨åˆ†bugï¼ˆä¸ï¼Œç‰¹æ€§ ä¸ºAPlayerè¿›è¡Œå®Œå–„ æ·»åŠ æ—©æŠ¥ã€æœ¨é±¼ã€ç©ºè°ƒé¡µé¢ï¼Œå‚è€ƒChuckle æ›´æ”¹å…³äºé¡µé¢ï¼Œå‚è€ƒå®‰çŸ¥é±¼çš„æ•™ç¨‹ å°è¯•npmå…¨ç«™é™æ€åŒ–ï¼Œæœ€ç»ˆå¤±è´¥æ”¾å¼ƒqwq ä¼˜åŒ–swï¼ŒåŠ è½½é€Ÿåº¦ç•¥æœ‰æå‡ æ–°å¢æ–‡ç« ç»Ÿè®¡ ä¼˜åŒ–éƒ¨åˆ†æ ·å¼ Acryple v1.0.81 2022-11-23 ä¿®å¤éƒ¨åˆ†bugï¼ˆä¸ï¼Œç‰¹æ€§ ä¼˜åŒ–æ€§èƒ½é—®é¢˜ï¼Œå¯¹å¼¹å¹•è¿›è¡Œäº†èŠ‚æµ æ·»åŠ APlayerï¼Œå¯æƒœæ²¡æœ‰pjax qwq ä¼˜åŒ–å¼¹å¹•ï¼ˆæ›´æ´ªåŒ–äº†ï¼‰ è°ƒæ•´ç½‘ç«™å¸ƒå±€ ä¿®æ”¹ä¸€äº›æ ·å¼ PSï¼šåœ¨1.0.51å·å·åŠ äº†ä¸€å·å­—å·ä½ ä»¬å‘ç°æ²¡æœ‰(doge) Acryple v1.0.51 ä¿®å¤éƒ¨åˆ†bugï¼ˆä¸ï¼Œç‰¹æ€§ ä¼˜åŒ–æ€§èƒ½é—®é¢˜ï¼ˆä½†æ˜¯å¥½åƒè¿˜æ˜¯æ²¡æ¯›æå‡ æ¢ç”¨Twikoo-magicè¡¨æƒ…åŒ… ä¸ºäº†OIæ·»åŠ  KaTeX\\textbf{ \\KaTeX} KATEâ€‹X ä¿®å¤è·³è½¬é“¾æ¥å› åŸæœ‰bugè¢«è¿«ä½¿åŸé¡µé¢åˆ·æ–°çš„bug Acryple v1.0.14 2022-11-10 ä¿®å¤éƒ¨åˆ†bugï¼ˆä¸ï¼Œç‰¹æ€§ ä¼˜åŒ–æ€§èƒ½é—®é¢˜ï¼ˆä½†æ˜¯å¥½åƒè¿˜æ˜¯æ²¡æ¯›æå‡ å¢åŠ æµè§ˆå™¨è¿‡æœŸæé†’ä»¥åŠbanIEï¼Œå‚è€ƒchuckleä»¥åŠbç«™ å¢åŠ fpsæ˜¾ç¤º è¯„è®ºè¡¨æƒ…æ·»åŠ é¢œæ–‡å­— ä¿®å¤æ‰‹æœºç«¯ä¾§è¾¹æ bug PSï¼šä½œä¸ºä¸€ä¸ªèŒæ–°OIerä¾ç„¶æ²¡æœ‰è€ƒè™‘å‘oiæ–‡ â•®(â•¯â–½â•°)â•­ ä»¥å‰çš„æ›´æ–°æ—¥å¿—å“”å“©å“”å“© (ã‚œ-ã‚œ)ã¤ãƒ­ å¹²æ¯ï¼ 2022 07-02 ç»ˆäºå¼„å¥½ç½‘ç«™äº†ï¼Œåº†ç¥ä¸€ä¸‹ğŸ‰ Gitalkä¸çŸ¥é“ä¸ºä»€ä¹ˆä¸æ˜¾ç¤ºå‡ºæ¥â€¦ 07-03 å°æ›´æ–°ï¼Œä¿®æ”¹ç»†èŠ‚ ä½œè€…çš„Htmlå®åœ¨å¤ªèœäº†ï¼Œæ•ˆæœå¹¶ä¸å¥½ 07-04 å¤§æ›´æ–° ä¿®æ”¹äº†å¾ˆå¤šui 07-05 å¤§æ›´æ–° ä¿®æ”¹ç»†èŠ‚UIå’Œå‹é“¾éƒ¨åˆ†ï¼Œå¢åŠ åæ§½éƒ¨åˆ† 07-06 å°æ›´æ–°ï¼Œåšå¥½ä¸€äº›åŠŸèƒ½å¹¶ä¸”å†™äº†ç¬¬ä¸€ç¯‡æ–‡ç«  07-08 å¤§æ›´æ–°ï¼Œæ›´æ”¹é¦–é¡µå¸ƒå±€ï¼Œå¢åŠ é¦–é¡µåˆ†åŒº 07-09 å°æ›´æ–°ï¼Œä¿®æ”¹ç»†èŠ‚ï¼Œé€‚é…æ‰‹æœºç«¯ï¼Œä¿®å¤bugï¼Œè¯´è¯´ç”±Artitalkæ¢ä¸ºBBtalk 07-14 å‰é¢å‡ å¤©å¿˜è®°å†™æ›´æ–°äº†ï¼Œæ›´æ–°äº†å¾ˆå¤šUIå’ŒåŠŸèƒ½ã€‚ã€‚ã€‚ 07-18 å‰é¢å‡ å¤©åˆå¿˜è®°å†™æ›´æ–°äº†å°å°ä¿®æ”¹äº†ä¸€äº›å¸ƒå±€ï¼ŒæŠŠé¸½äº†å¾ˆä¹…çš„åšå®¢å†™å®Œäº†å¹¶ä¸”è¿˜åŠ äº†èŒç™¾çš„é»‘å¹•ï¼Œæ²¡æœ‰ä½ çŸ¥é“çš„å¤ªå¤šäº†å·®è¯„ 07-22 å‰é¢å‡ å¤©åˆåŒå¿˜è®°å†™æ›´æ–°äº†æŠ˜è…¾äº†å¾ˆå¤šï¼ŒåŠ äº†è‡ªå·±çš„åŸŸåï¼ŒæŠŠä½ çŸ¥é“çš„å¤ªå¤šäº†å¼„å‡ºæ¥äº†ï¼Œå¹¶ä¸”ä¿®å¤äº†å¾ˆå¤šjsçš„bugï¼ŒæŠŠunpkgæ¢æˆfastly.jsdelivræˆ–è€…elemecdnï¼Œæå‡é€Ÿåº¦ï¼ˆç«Ÿç„¶æœ‰äººåŠ äº†æˆ‘å‹é“¾ï¼Œæ€ä¹ˆçŸ¥é“è¿™ä¸ªç½‘ç«™çš„ï¼Ÿï¼‰ 08-12 å‰é¢å‡ å¤©åˆåŒå’å¿˜è®°å†™æ›´æ–°äº†è¿˜æ˜¯æŠ˜è…¾äº†å¾ˆå¤šï¼ŒæŒ‰ç…§å†°ç³–çº¢èŒ¶å¤§ä½¬ä»¬çš„æ–¹æ³•åŠ äº†ä¸å°‘ä¸œè¥¿ï¼Œæ¯”å¦‚é‚£ä¸ªäººæ½®æ±¹æ¶Œæ¨¡æ‹Ÿå™¨ï¼ˆä¸»é¡µçš„ï¼‰ã€æ–‡ç« ç‚¹èµã€æ— ç¼è·³è½¬ç­‰ç­‰ï¼Œæ¢æˆjsdelivråŠ é€Ÿï¼ŒåŒæ—¶ä¹Ÿåœ¨æœ€å¤§åŒ–åˆ©ç”¨GoormIDEï¼Œä¸è¿‡åœ¨é™©äº›æ²¡æœ‰æ•°æ®ä¹‹åå°±å°½å¯èƒ½è¿ç§»åˆ°äº†å…¶å®ƒæ²¡æœ‰é£é™©çš„å¹³å°ã€‚ 08-25 æœ€è¿‘åœ¨ç³–æœå±‹ç¾¤å‹ä»¬çš„å»ºè®®å’Œå¸®åŠ©ä¸‹ä¿®æ”¹äº†å¾ˆå¤šåŠŸèƒ½,ä»¥åæ¯éš”ä¸€æ®µæ—¶é—´éƒ½ä¼šå†™è¯¦ç»†çš„æ—¥å¿—è€Œä¸æ˜¯åƒå‰é¢ç®€å•æ¦‚æ‹¬äº†ã€‚ ç•™è¨€æ¿çš„å¼¹å¹•æ˜¯çœŸçš„åƒbç«™è§†é¢‘å¼¹å¹•äº†ï¼Œè¿‡ä¸€æ®µæ—¶é—´ä¿®å¤äº†bugä¹‹åæ”¾æ•™ç¨‹ æ–°å¢åšå®¢è®¾ç½®ï¼Œåšäº†ä¸€ä¸ªæç®€é£çš„ä¸»é¢˜ï¼Œæ”¯æŒæ›´æ¢ä¸»é¢˜è‰²ï¼Œä¹Ÿå¯ä»¥æ¢å›ä¹‹å‰çš„ä¸»é¢˜ï¼Œå¯ä»¥ç¦ç”¨æ¨¡ç³Šæ•ˆæœå’Œå¼€å¯ç¡¬ä»¶åŠ é€Ÿæå‡æ€§èƒ½ ä¿®å¤äº†éƒ¨åˆ†æ’ç‰ˆbugï¼Œå¯¹safariè¿›è¡Œäº†ä¸€äº›é€‚åº”ï¼Œæ„Ÿè°¢Apple Storeå’Œæ´ªå“¥çš„å¸®åŠ©ã€‚ å¢åŠ äº†hoverçš„ç¼©æ”¾æ•ˆæœï¼Œæœ‰å±‚æ¬¡æ„Ÿ ä¼˜åŒ–åŠ¨ç”» ä¿®å¤ç•™è¨€å¼¹å¹•ã€å³é”®èœå•çš„bugå¹¶ä¸”æŠŠæ–°ç‰ˆçš„ä»£ç æ›´æ–°åˆ°æ–‡ç« ä¸­ ä¼˜åŒ–ç»†èŠ‚æ ·å¼ æ–°å¢æœ€æ–°æ–‡ç« æ ‡è®° æ€»ç®—éƒ¨ç½²å¥½æœ‹å‹åœˆäº†ï¼leancloudå›½å†…ç‰ˆåƒåœ¾ï¼"}],"posts":[{"title":"ubuntu20çš„vscodeè®¾ç½®","slug":"code_linux","date":"2022-04-10T15:21:13.000Z","updated":"2023-01-11T01:23:29.574Z","comments":true,"path":"posts/9c7668f5/","link":"","permalink":"https://blogs.leechee.top/posts/9c7668f5/","excerpt":"","text":"æˆ‘çš„ubuntu20çš„vscodeè®¾ç½® launch.json 123456789101112131415161718192021222324252627282930&#123; // Use IntelliSense to learn about possible attributes. // Hover to view descriptions of existing attributes. // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387 &quot;version&quot;: &quot;0.2.0&quot;, &quot;configurations&quot;: [ &#123; &quot;miDebuggerArgs&quot;: &quot;-q -ex quit; wait() &#123; fg &gt;/dev/null; &#125;; /bin/gdb -q --interpreter=mi&quot;, &quot;name&quot;: &quot;(gdb) Launch&quot;, // é…ç½®åç§° &quot;type&quot;: &quot;cppdbg&quot;,// é…ç½®ç±»å‹ &quot;request&quot;: &quot;launch&quot;, // è¯·æ±‚é…ç½®ç±»å‹,launchæˆ–è€…attach &quot;program&quot;: &quot;$&#123;workspaceFolder&#125;/$&#123;fileBasenameNoExtension&#125;&quot;,// è¿›è¡Œè°ƒè¯•ç¨‹åºçš„è·¯å¾„ï¼Œç¨‹åºç”Ÿæˆæ–‡ä»¶.out &quot;args&quot;: [],// ä¼ é€’ç»™ç¨‹åºçš„å‘½ä»¤è¡Œå‚æ•°ï¼Œä¸€èˆ¬ä¸ºç©º &quot;stopAtEntry&quot;: false,// è°ƒè¯•å™¨æ˜¯å¦åœ¨ç›®æ ‡çš„å…¥å£ç‚¹åœæ­¢ï¼Œ &quot;cwd&quot;: &quot;$&#123;workspaceFolder&#125;&quot;,// é¡¹ç›®ç›®å½• &quot;environment&quot;: [], &quot;externalConsole&quot;: false,// è°ƒè¯•æ—¶æ˜¯å¦æ˜¾ç¤ºæ§åˆ¶å°çª—å£ï¼Œä¸€èˆ¬ä¸ºtrueæ˜¾ç¤ºæ§åˆ¶å° &quot;MIMode&quot;: &quot;gdb&quot;,// æŒ‡å®šè¿æ¥çš„è°ƒè¯•å™¨ &quot;preLaunchTask&quot;: &quot;build&quot;, &quot;setupCommands&quot;: [ &#123; &quot;description&quot;: &quot;Enable pretty-printing for gdb&quot;, &quot;text&quot;: &quot;-enable-pretty-printing&quot;, &quot;ignoreFailures&quot;: true &#125; ] &#125; ]&#125; tasks.json 1234567891011121314&#123; // See https://go.microsoft.com/fwlink/?LinkId=733558 // for the documentation about the tasks.json format &quot;version&quot;: &quot;2.0.0&quot;, &quot;tasks&quot;: [ &#123; &quot;label&quot;: &quot;build&quot;,// ä»»åŠ¡å &quot;type&quot;: &quot;shell&quot;, &quot;command&quot;: &quot;g++&quot;,// æŒ‡ä»¤ &quot;args&quot;: [&quot;-g&quot;, &quot;$&#123;file&#125;&quot;, &quot;-std=c++17&quot;, &quot;-o&quot;, &quot;$&#123;fileBasenameNoExtension&#125;&quot;] &#125; ]&#125;","categories":[{"name":"Linux","slug":"Linux","permalink":"https://blogs.leechee.top/categories/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://blogs.leechee.top/tags/Linux/"},{"name":"åµŒå…¥å¼","slug":"åµŒå…¥å¼","permalink":"https://blogs.leechee.top/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/"},{"name":"ubuntu","slug":"ubuntu","permalink":"https://blogs.leechee.top/tags/ubuntu/"}]},{"title":"QT","slug":"Qt","date":"2022-04-06T15:21:13.000Z","updated":"2023-01-11T01:58:15.935Z","comments":true,"path":"posts/9454662e/","link":"","permalink":"https://blogs.leechee.top/posts/9454662e/","excerpt":"","text":"[TOC] ä¿¡å·å’Œæ§½ ä¿¡å·ä¸æ§½å…³è”æ˜¯ç”¨ QObject::connect() å‡½æ•°å®ç°çš„ï¼Œå…¶åŸºæœ¬æ ¼å¼æ˜¯ï¼š QObject::connect(sender, SIGNAL(signal()), receiver, SLOT(slot())); å‚æ•° 1ã€ä¿¡å·çš„å‘é€è€… å‚æ•° 2ã€å‘é€çš„ä¿¡å· å‚æ•° 3ã€ä¿¡å·çš„æ¥æ”¶è€… å‚æ•° 4ã€å¤„ç†å‡½æ•°ï¼ˆæ§½å‡½æ•°ï¼‰ 12QMetaObject::Connection ret = connect(btn,&amp;QPushButton::clicked,this,&amp;QWidget::close); //sendr.btn signal.clickedç‚¹å‡» recvier.this widget.closeäº‹ä»¶ æŠŠclickä¿¡å·å’Œæ§½å…³è”èµ·æ¥ ä¿¡å·ä¸æ§½ï¼ˆSignal &amp; Slotï¼‰æ˜¯ Qt ç¼–ç¨‹çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯ Qt çš„ä¸€å¤§åˆ›æ–°ã€‚å› ä¸ºæœ‰äº†ä¿¡å·ä¸æ§½çš„ ç¼–ç¨‹æœºåˆ¶ï¼Œåœ¨ Qt ä¸­å¤„ç†ç•Œé¢å„ä¸ªç»„ä»¶çš„äº¤äº’æ“ä½œæ—¶å˜å¾—æ›´åŠ ç›´è§‚å’Œç®€å•ã€‚å®ƒå¯ä»¥è®©åº”ç”¨ ç¨‹åºç¼–ç¨‹äººå‘˜æŠŠè¿™äº›äº’ä¸äº†è§£çš„å¯¹è±¡ç»‘å®šåœ¨ä¸€èµ·ã€‚ ä¿¡å·ï¼ˆSignalï¼‰ ä¿¡å·ï¼ˆSignalï¼‰å°±æ˜¯åœ¨ç‰¹å®šæƒ…å†µä¸‹è¢«å‘å°„çš„äº‹ä»¶ï¼Œä¾‹å¦‚ PushButton æœ€å¸¸è§çš„ä¿¡å·å°±æ˜¯é¼ æ ‡ å•å‡»æ—¶å‘å°„çš„ clicked() ä¿¡å·ï¼Œä¸€ä¸ª ComboBox æœ€å¸¸è§çš„ä¿¡å·æ˜¯é€‰æ‹©çš„åˆ—è¡¨é¡¹å˜åŒ–æ—¶å‘å°„ çš„ CurrentIndexChanged() ä¿¡å·ã€‚ GUI ç¨‹åºè®¾è®¡çš„ä¸»è¦å†…å®¹å°±æ˜¯å¯¹ç•Œé¢ä¸Šå„ç»„ä»¶çš„ä¿¡å·çš„å“åº”ï¼Œåªéœ€è¦çŸ¥é“ä»€ä¹ˆæƒ…å†µä¸‹å‘å°„ å“ªäº›ä¿¡å·ï¼Œåˆç†åœ°å»å“åº”å’Œå¤„ç†è¿™äº›ä¿¡å·å°±å¯ä»¥äº†ã€‚ æ§½ï¼ˆSlotï¼‰ å°±æ˜¯å¯¹ä¿¡å·å“åº”çš„å‡½æ•°ã€‚æ§½å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸ä¸€èˆ¬çš„ C++å‡½æ•°æ˜¯ä¸€æ ·çš„ï¼Œå¯ä»¥å®šä¹‰åœ¨ç±»çš„ä»»ä½•éƒ¨åˆ†ï¼ˆpublicã€private æˆ– protectedï¼‰ï¼Œå¯ä»¥å…·æœ‰ä»»ä½•å‚æ•°ï¼Œä¹Ÿå¯ä»¥è¢«ç›´æ¥è°ƒç”¨ã€‚æ§½å‡½æ•°ä¸ä¸€èˆ¬çš„å‡½æ•°ä¸åŒçš„æ˜¯ï¼šæ§½å‡½æ•°å¯ä»¥ä¸ä¸€ä¸ªä¿¡å·å…³è”ï¼Œå½“ä¿¡å·è¢«å‘å°„æ—¶ï¼Œå…³è”çš„æ§½å‡½æ•°è¢«è‡ªåŠ¨æ‰§è¡Œã€‚ Qt ä¸­è‡ªå®šä¹‰ä¿¡å·å’Œæ§½å‡½æ•° è‡ªå®šä¹‰ä¿¡å·å’Œæ§½çš„åŒºåˆ«ï¼Œä¿¡å·å’Œæ§½éƒ½ä¸º void ç±»å‹ï¼Œä¿¡å·åªéœ€è¦å®šä¹‰ï¼Œä¸éœ€è¦å® ç°ï¼Œè€Œæ§½å‡½æ•°æ—¢éœ€è¦å®šä¹‰ï¼Œä¹Ÿéœ€è¦å®ç°ï¼Œä¿¡å·å’Œæ§½éƒ½å¯ä»¥æœ‰å‚æ•°ä¹Ÿéƒ½å¯ä»¥é‡è½½ã€‚emit æ˜¯å‡ºå‘ä¿¡å·çš„æ ‡å¿—ï¼Œå¯è¦å¯ä¸è¦ã€‚ æ³¨æ„ä¿¡å·é‡è½½å‡½æ•°æŒ‡é’ˆæŒ‡å‘å“ªä¸€ä¸ªå‡½æ•°çš„é—®é¢˜ï¼Œå¯¹äºé‡è½½å‡½æ•°çš„ä¿¡å·è¿æ¥ï¼Œè¦æŒ‡ æ˜åˆ°åº•è¿æ¥çš„æ˜¯å“ªä¸€ä¸ª ä¿¡å·å’Œæ§½çš„æ‰©å±• å¤šä¸ªä¿¡å·å¯ä»¥è¿æ¥åŒä¸€ä¸ªæ§½å‡½æ•° è¿™ä¸ªå°±ä¸ç”¨å®ä¾‹äº†ï¼Œæˆ‘ä»¬çš„æŒ‰é’®å’Œçª—å£ä¸Šçš„ xx éƒ½å¯ä»¥å…³é—­çª—å£ã€‚ ä¿¡å·å’Œæ§½çš„å‚æ•°å¿…é¡»ä¸€ä¸€å¯¹åº”ã€‚ ä¿¡å·çš„å‘é€ä»€ä¹ˆï¼Œæ§½å°±æ¥æ”¶ä»€ä¹ˆï¼Œç±»å‹å¿…é¡»ä¸€è‡´ã€‚ä½†ä¿¡å·çš„å‚æ•°ä¸ªæ•°å¯ä»¥å¤šä½™æ§½çš„å‚æ•°çš„ä¸ª æ•°ï¼Œä½†å‰é¢ç›¸åŒæ•°é‡çš„å‚æ•°ç±»å‹å¿…é¡»ä¸€ä¸€å¯¹åº”ã€‚åä¹‹åˆ™ä¸å¯ä»¥ Lambda å‡½æ•° Lambda å‡½æ•°ä¹Ÿå« Lambda è¡¨è¾¾å¼ï¼Œæ˜¯åŒ¿åå‡½æ•°ï¼Œå°±æ˜¯æ²¡æœ‰åå­—çš„å‡½æ•°ï¼Œå’Œä¼ ç»Ÿçš„å‡½æ•°ä¸ä¸€æ ·ã€‚Lambda è¡¨è¾¾å¼æ˜¯ C++11 ä¸­å¼•å…¥çš„æ–°æ¦‚å¿µï¼Œç”¨äºå®šä¹‰å¹¶åˆ›å»ºåŒ¿åçš„å‡½æ•°å¯¹è±¡ã€‚é¦–å…ˆçœ‹ ä¸‹ Lambda è¡¨è¾¾å¼çš„åŸºæœ¬ç»“æ„ã€‚ [æ•æ‰åˆ—è¡¨] (å‚æ•°) mutable -&gt;è¿”å›å€¼ç±»å‹ &#123;å‡½æ•°ä½“&#125; 1234567891011121314151617[]()&#123;qDebug( &quot;Lambda&quot; );&#125;();1ã€ [ ]ï¼Œæ ‡è¯†ä¸€ä¸ªï¼ŒLambda åŒ¿åå‡½æ•°çš„å¼€å§‹ï¼Œè¿™ä¸ªå¿…é¡»æœ‰ï¼Œä¸èƒ½çœç•¥ï¼Œå‡½æ•°å¯¹è±¡å‚æ•°æ˜¯ä¼  é€’ç»™ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•°å¯¹è±¡ç±»çš„æ„é€ å‡½æ•°çš„ã€‚å‡½æ•°å¯¹è±¡å‚æ•°åªèƒ½ä½¿ç”¨åˆ° Lambda å®š ä¹‰ä¸ºæ­¢ Lambda æ‰€åœ¨çš„ä½œç”¨åŸŸèŒƒå›´å†…å¯è§çš„å±€éƒ¨å˜é‡ï¼ŒåŒ…æ‹¬ Lambda æ‰€åœ¨ç±»çš„ thisã€‚å‡½ æ•°å¯¹è±¡å‚æ•°æœ‰ä»¥ä¸‹å½¢å¼ a) ç©ºï¼Œæ²¡æœ‰ä½¿ç”¨ä»»ä½•çš„å‡½æ•°å¯¹è±¡å‚æ•° b) =ï¼Œå‡½æ•°ä½“å†…ä½¿ç”¨ Lambda æ‰€åœ¨èŒƒå›´å†…çš„å¯è§å±€éƒ¨å˜é‡åŒ…æ‹¬æ‰€åœ¨ç±»çš„ this çš„ä¼ å€¼æ–¹ å¼ï¼Œç›¸å½“äºç¼–è¯‘å™¨ç»™ Lambda æ‰€åœ¨åœ°çš„æ‰€æœ‰å±€éƒ¨å˜é‡å¤åˆ¶ä¸€ä»½ç»™ Lambda å‡½æ•° c) &amp;ï¼Œå‡½æ•°ä½“å†…ä½¿ç”¨ Lambda æ‰€åœ¨èŒƒå›´å†…çš„å¯è§å±€éƒ¨å˜é‡åŒ…æ‹¬æ‰€åœ¨ç±»çš„ this çš„å¼•ç”¨æ–¹ å¼ï¼Œç›¸å½“äºç¼–è¯‘å™¨ç»™ Lambda æ‰€åœ¨åœ°çš„æ‰€æœ‰å±€éƒ¨å˜é‡å¼•ç”¨ä¸€ä»½ç»™ Lambda å‡½æ•° d) thisï¼Œå‡½æ•°ä½“å†…å¯ä»¥ä½¿ç”¨ Lambda æ‰€åœ¨å†…çš„æˆå‘˜å˜é‡ e) a,ä¸æ˜¯å­—æ¯ï¼Œè€Œæ˜¯æŒ‡å…·ä½“ä¸€ä¸ªå˜é‡ aï¼Œé‚£ä¹ˆ Lambda å†…æ‹·è´ä¸€ä¸ª a ä½¿ç”¨ f) &amp;aï¼ŒLambda å†…å¼•ç”¨ a g) a,&amp;b,æ‹·è´ aï¼Œå¼•ç”¨ b h) =ï¼Œ&amp;aï¼Œ&amp;bï¼Œé™¤ ab å¼•ç”¨ï¼Œå…¶ä½™æ‹·è´ i) &amp;ï¼Œaï¼Œbã€‚é™¤ ab æ‹·è´ï¼Œå…¶ä½™å¼•ç”¨ 2ã€ å‡½æ•°å‚æ•°ï¼Œè¿™ä¸ªè·Ÿå¸¸è§„å‡½æ•°ä¸€æ ·ã€‚ 3ã€ mutatbleï¼Œä¿®æ”¹å…³é”®å­—ï¼Œå†å¯¹åº”ä½ç½® mutatble å…³é”®å­—ï¼Œæ‰èƒ½ä¿®æ”¹å‡½æ•°å¯¹è±¡å‚æ•°ã€‚å¦åˆ™æŠ¥ é”™ã€‚å¯ä»¥æœ‰ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰ï¼Œä½†æœ‰æ‰èƒ½ä¿®æ”¹ã€‚lambda é»˜è®¤æ˜¯ constï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½ä¿®æ”¹æœ¬åœ° å˜é‡ã€‚ 4ã€ -&gt;return-type è¿”å›å€¼çš„æ–¹å¼ï¼Œæ—¢ç„¶æ˜¯å‡½æ•°å°±å¯èƒ½æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆ-&gt;å°±æ˜¯æœ‰è¿”å›å€¼çš„å‡½ æ•°æ ‡å¿—ã€‚ 5ã€ å‡½æ•°ä½“ï¼Œè·Ÿå¸¸è§„å‡½æ•°ä¸€æ ·ã€‚ 1234567QPushButton * btn2 = new QPushButton(&quot;222&quot;,this); QPushButton * btn3 = new QPushButton(&quot;333&quot;,this); btn2-&gt;move(0,20); btn3-&gt;move(0,50); int a = 10; connect(btn2,&amp;QPushButton::clicked,this,[a]()mutable&#123; a += 100;qDebug()&lt;&lt;a; &#125;); connect(btn3,&amp;QPushButton::clicked,this,[=]()mutable&#123; qDebug()&lt;&lt;a; &#125;); qDebug()&lt;&lt;a; æ–°å»ºä¸¤ä¸ªæŒ‰é’®åˆ†åˆ«å†™å…¥ä»¥ä¸Š Lambda å‡½æ•°ï¼Œå†è¿æ¥å‡½æ•°ä¸­ç›´æ¥å¯ä»¥å†™ä¸Š Lambda å‡½æ•°ä½“ï¼Œæ¶ˆ æ¯è§¦å‘çš„æ—¶å€™ï¼Œå°±ç›´æ¥è°ƒç”¨ï¼Œbtn2ï¼Œä¸­åªæ˜¯å°† a ä¼ å€¼ï¼Œæœ‰å…³é”®å­— mutable å¯ä»¥åœ¨å‡½æ•°ä¸­ä¿®æ”¹ a çš„å€¼ï¼Œä½†ä¸ä¼šå½±å“å¤–é¢çš„å€¼ã€‚ æ‰©å±• 123456789101112131415161718ret=100;ret=[&amp;ret]()mutable-&gt;int&#123;ret*=2;return ret;&#125;();cout&lt;&lt;ret;//retx2int a=0,b=1;[](int&amp; a,int&amp; b,int count)&#123; int ret=0; for(int i=0;i&lt;count;i++)&#123; ret=a+b; a=b; b=ret; cout&lt;&lt;ret; &#125;&#125;(a,b,20);//å¾ªç¯20æ¬¡è¾“å‡ºæ–æ³¢é‚£å¥‘æ•°åˆ—(åä¸€é¡¹æ˜¯å‰ä¿©é¡¹çš„å’Œ) åº”ç”¨ æ— å‚æŒ‰é’®è°ƒç”¨æœ‰å‚çš„æ§½å‡½æ•°","categories":[{"name":"åµŒå…¥å¼","slug":"åµŒå…¥å¼","permalink":"https://blogs.leechee.top/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://blogs.leechee.top/tags/C-C/"},{"name":"QT","slug":"QT","permalink":"https://blogs.leechee.top/tags/QT/"},{"name":"é¡¹ç›®","slug":"é¡¹ç›®","permalink":"https://blogs.leechee.top/tags/%E9%A1%B9%E7%9B%AE/"}]},{"title":"Linux ç½‘ç»œç¼–ç¨‹åŸºç¡€","slug":"Linuxç½‘ç»œç¼–ç¨‹åŸºç¡€","date":"2022-04-01T15:21:13.000Z","updated":"2023-01-11T01:24:19.850Z","comments":true,"path":"posts/30335c15/","link":"","permalink":"https://blogs.leechee.top/posts/30335c15/","excerpt":"","text":"Libevent C++é«˜å¹¶å‘ç½‘ç»œç¼–ç¨‹ 3.1 è¯¾ç¨‹å†…å®¹æ¦‚è¿° Libeventæºç çš„è·¨å¹³å°ç¼–è¯‘å’Œæµ‹è¯• LibeventåŸç†å’Œç½‘ç»œæ¨¡å‹è®¾ç½® eventäº‹ä»¶å¤„ç†åŸç†å’Œå®æˆ˜ buffereventç¼“å†²IO buffereventã€zlibå®ç°è¿‡æ»¤å™¨ä¸­å‹ç¼©å’Œè§£å‹ç¼© libeventçš„httpæ¥å£å®ç°æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ æ­å»ºåŸºäºlibeventçš„C++è·¨å¹³å°çº¿ç¨‹æ±  åŸºäºlibeventå’Œçº¿ç¨‹æ± å®ŒæˆFTPæœåŠ¡å™¨å¼€å‘ å¤§å¹¶å‘æœåŠ¡å™¨æ¶æ„å­¦ä¹  ç¬¬ä¸€ç«  é«˜æ€§èƒ½çš„æœåŠ¡å™¨æ¶æ„ ç½‘ç»œI/O + æœåŠ¡å™¨é«˜æ€§èƒ½ç¼–ç¨‹æŠ€æœ¯ + æ•°æ®åº“ è¶…å‡ºæ•°æ®åº“è¿æ¥æ•° è¶…å‡ºæ—¶é™ï¼ˆé˜Ÿåˆ—+è¿æ¥æ± ï¼Œç¼“å†²æ›´æ–°ï¼Œç¼“å†²æ¢é¡µï¼Œæ•°æ®åº“è¯»å†™åˆ†ç¦»è¿›è¡Œè´Ÿè½½å‡è¡¡-replicationæœºåˆ¶ï¼‰ æœåŠ¡å™¨æ€§èƒ½å››å¤§æ€æ‰‹ï¼š æ•°æ®æ‹·è´-ç¼“å­˜æŠ€æœ¯è§£å†³ ç¯å¢ƒåˆ‡æ¢-æœ‰ç†æ€§åˆ›å»ºçº¿ç¨‹ï¼Œå•çº¿ç¨‹è¿˜æ˜¯å¤šçº¿ç¨‹å¥½ï¼Œå•æ ¸æœåŠ¡å™¨ï¼ˆé‡‡ç”¨çŠ¶æ€æœºç¼–ç¨‹ï¼Œæ•ˆç‡æœ€ä½³ï¼Œå‡å°‘çº¿ç¨‹é—´çš„åˆ‡æ¢å¼€é”€ï¼‰ï¼Œå¤šçº¿ç¨‹èƒ½å¤Ÿå……åˆ†å‘æŒ¥å¤šæ ¸æœåŠ¡å™¨çš„æ€§èƒ½ã€‚ å†…å­˜åˆ†é…-å†…å­˜æ±  é”ç«äº‰ ç¬¬äºŒç«  å¤§å‹ç½‘ç«™æ¶æ„æ¼”å˜è¿‡ç¨‹ webåŠ¨é™èµ„æºåˆ†ç¦» ç¼“å­˜å¤„ç† å‡å°‘å¯¹ç½‘ç«™çš„è®¿é—®-å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ç¼“å­˜ å‡å°‘å¯¹Webåº”ç”¨æœåŠ¡å™¨çš„è¯·æ±‚-å‰ç«¯é¡µé¢ç¼“å­˜ï¼ˆsquidï¼‰ å‡å°‘å¯¹æ•°æ®åº“çš„æŸ¥è¯¢-é¡µé¢ç‰‡æ®µç¼“å­˜ESIï¼ˆEdge Side Includesï¼‰ å‡å°‘å¯¹æ–‡ä»¶ç³»ç»ŸI/Oæ“ä½œ-æœ¬åœ°æ•°æ®ç¼“å­˜ Web serveré›†ç¾¤+è¯»å†™åˆ†ç¦»ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ å‰ç«¯è´Ÿè½½å‡è¡¡ï¼šDNSè´Ÿè½½å‡è¡¡ã€åå‘ä»£ç†ã€åŸºäºNATçš„è´Ÿè½½å‡è¡¡æŠ€æœ¯ã€LVSã€F5ç¡¬ä»¶è´Ÿè½½å‡è¡¡ åº”ç”¨æœåŠ¡å™¨è´Ÿè½½å‡è¡¡ æ•°æ®åº“è´Ÿè½½å‡è¡¡ CDNã€åˆ†å¸ƒå¼ç¼“å­˜ã€åˆ†åº“åˆ†è¡¨ å¤šæ•°æ®ä¸­å¿ƒ+åˆ†å¸ƒå¼å­˜å‚¨ä¸è®¡ç®—ï¼ˆæŠ€æœ¯ç‚¹DFSåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€Key-Value DBã€Map/Reduceç®—æ³•ï¼‰ ç¬¬ä¸‰ç«  poll Linuxä¸‹æœ‰ä¸‰ç§I/Oå¤ç”¨æ¨¡å‹ï¼šselectã€pollã€epollã€‚ Linuxç½‘ç»œç¼–ç¨‹åŸºç¡€ ç½‘ç»œåŸºç¡€-ç»¼è¿° 1. åè®®çš„æ¦‚å¿µ TCPåè®®æ³¨é‡æ•°æ®çš„ä¼ è¾“ï¼ŒHTTPåè®®æ³¨é‡æ•°æ®çš„è§£é‡Šã€‚ 2. b/sï¼ˆæµè§ˆå™¨/æœåŠ¡ç«¯æ¨¡å¼ï¼‰ c/sï¼ˆå®¢æˆ·ç«¯/æœåŠ¡ç«¯æ¨¡å¼ï¼‰ C/Sæ¨¡å¼ä¼˜ç‚¹ï¼šåè®®é€‰ç”¨çµæ´»ï¼Œæå‰å¯¹æ•°æ®è¿›è¡Œç¼“å­˜ C/Sæ¨¡å¼ç¼ºç‚¹ï¼šå¯¹ç”¨æˆ·å®‰å…¨æ„æˆå¨èƒï¼Œå¼€å‘ä»»åŠ¡å·¥ä½œé‡å¤§ B/Sæ¨¡å¼ä¼˜ç‚¹ï¼šå®‰å…¨æ€§é«˜ï¼Œè·¨å¹³å° B/Sæ¨¡å¼ç¼ºç‚¹ï¼šåè®®é€‰ç”¨ä¸çµæ´»ï¼Œæ•°æ®åŠ è½½ä¸ç¼“å­˜ ä¸¤è€…ä½¿ç”¨åœºæ™¯ä¸åŒã€‚ 3. åˆ†å±‚æ¨¡å‹ï¼šOSIä¸ƒå±‚æ¨¡å‹-TCP/IPå››å±‚æ¨¡å‹ OSIä¸ƒå±‚æ¨¡å‹: ç‰©ç†å±‚-&gt;æ•°æ®é“¾è·¯å±‚-&gt;ç½‘ç»œå±‚ï¼ˆIPåè®®ï¼‰-&gt;ä¼ è¾“å±‚ï¼ˆTCP/UDPåè®®ï¼‰-&gt;ä¼šè¯å±‚-&gt;è¡¨ç¤ºå±‚-&gt;åº”ç”¨å±‚ TCP/IPå››å±‚æ¨¡å‹ï¼šç½‘ç»œæ¥å£å±‚------&gt;ç½‘ç»œå±‚ï¼ˆIPåè®®ï¼‰-&gt;ä¼ è¾“å±‚ï¼ˆTCP/UDPåè®®ï¼‰---------------&gt;åº”ç”¨å±‚ï¼ˆFTPåè®®ï¼‰ 4. åè®®æ ¼å¼ æ•°æ®åŒ…åŸºæœ¬æ ¼å¼ï¼šæ“ä½œç³»ç»Ÿå°è£…æ•°æ®å’Œè§£ææ•°æ®åŒ…ï¼›è·¯ç”±å™¨å¯»è·¯ï¼ˆå¯»æ‰¾ä¸‹ä¸€è·¯ç”±èŠ‚ç‚¹ï¼‰çš„ä¸€èˆ¬æ€æƒ³ã€‚ ä»¥å¤ªç½‘å¸§æ ¼å¼ï¼š|ç›®çš„åœ°å€(6å­—èŠ‚)|æºåœ°å€6å­—èŠ‚|ç±»å‹2å­—èŠ‚|æ•°æ®|CRCæ ¡åº”2å­—èŠ‚| arpæ•°æ®åŒ…æ ¼å¼:|ç›®çš„åœ°å€(6å­—èŠ‚)|æºåœ°å€6å­—èŠ‚|å¸§ç±»å‹0806|ç¡¬ä»¶ç±»å‹-åè®®ç±»å‹-ç¡¬ä»¶åœ°å€é•¿åº¦-åè®®åœ°å€é•¿åº¦-op-å‘é€ç«¯ä»¥å¤ªç½‘åœ°å€-å‘é€ç«¯IPåœ°å€ç›®çš„ä»¥å¤ªç½‘åœ°å€-ç›®çš„IPåœ°å€ï¼ˆ28å­—èŠ‚ARPè¯·æ±‚/åº”ç­”ï¼‰|PADå¡«å……18å­—èŠ‚|ã€‚arpæ•°æ®æŠ¥çš„ç›®çš„ï¼šè·å–ä¸‹ä¸€è·³macçš„åœ°å€ã€‚ IPæ®µæ ¼å¼ï¼šåœ¨ç½‘ç»œå±‚ã€‚|4ä½ç‰ˆæœ¬å·|4ä½é¦–éƒ¨é•¿åº¦|8ä½æœåŠ¡ç±»å‹ï¼ˆTOSï¼‰|16ä½æ€»é•¿åº¦ï¼ˆå­—èŠ‚æ•°ï¼‰| TCP/UDPæ•°æ®æŠ¥æ ¼å¼ 5. NATæ˜ å°„ æ‰“æ´æœºåˆ¶ NATï¼ˆNetwork Address Translationï¼Œç½‘ç»œåœ°å€è½¬æ¢ï¼‰ï¼Œä¹Ÿå«åšç½‘ç»œæ©è”½æˆ–è€…IPæ©è”½ã€‚NATæ˜¯ä¸€ç§ç½‘ç»œåœ°å€ç¿»è¯‘æŠ€æœ¯ï¼Œä¸»è¦æ˜¯å°†å†…éƒ¨çš„ç§æœ‰IPåœ°å€ï¼ˆprivate IPï¼‰è½¬æ¢æˆå¯ä»¥åœ¨å…¬ç½‘ä½¿ç”¨çš„å…¬ç½‘IPï¼ˆpublic IPï¼‰ã€‚ NATå¯ä»¥åŒæ—¶è®©å¤šä¸ªè®¡ç®—æœºåŒæ—¶è”ç½‘ï¼Œå¹¶éšè—å…¶å†…ç½‘IPï¼Œå› æ­¤ä¹Ÿå¢åŠ äº†å†…ç½‘çš„ç½‘ç»œå®‰å…¨æ€§ï¼›æ­¤å¤–ï¼ŒNATå¯¹æ¥è‡ªå¤–éƒ¨çš„æ•°æ®æŸ¥çœ‹å…¶NATæ˜ å°„è®°å½•ï¼Œå¯¹æ²¡æœ‰ç›¸åº”è®°å½•çš„æ•°æ®åŒ…è¿›è¡Œæ‹’ç»ï¼Œæé«˜äº†ç½‘ç»œå®‰å…¨æ€§ã€‚ æ‰“æ´æœºåˆ¶éœ€è¦å€ŸåŠ©å…¬ç½‘ IP å®ç°ï¼› å…¬-å…¬é€šä¿¡ï¼ˆå±€åŸŸç½‘å†…IPé€šä¿¡ï¼‰ï¼šç›´æ¥è®¿é—®ï¼›å…¬-ç§ï¼šNATæ˜ å°„ï¼›ç§-å…¬ï¼šNATæ˜ å°„ï¼›ç§-ç§ï¼šNATæ˜ å°„ã€æ‰“æ´æœºåˆ¶ã€‚ 6. å¥—æ¥å­—socketé€šä¿¡åŸç†æ¦‚å¿µ IPåœ°å€ï¼šåœ¨ç½‘ç»œç¯å¢ƒä¸­å”¯ä¸€æ ‡è¯†ä¸€å°ä¸»æœº ç«¯å£å·ï¼šåœ¨ä¸»æœºä¸­å”¯ä¸€æ ‡è¯†ä¸€ä¸ªè¿›ç¨‹ IPåœ°å€ + ç«¯å£ï¼šå”¯ä¸€æ ‡è¯†ç½‘ç»œé€šè®¯ä¸­çš„ä¸€ä¸ªè¿›ç¨‹ï¼Œå¯¹åº”ä¸€ä¸ªsocketã€‚ socket æˆå¯¹å‡ºç°ã€å¿…é¡»ç»‘å®šIP+ç«¯å£ã€ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦æŒ‡å‘ä¸¤ä¸ªç¼“å†²åŒºï¼ˆä¸€ä¸ªè¯»ä¸€ä¸ªå†™ï¼‰ã€‚ 6.1 ç½‘ç»œå­—èŠ‚åºåˆ—åŒ– å¤§ç«¯å­˜å‚¨ï¼šä½åœ°å€â€“é«˜ä½(é«˜åœ°å€å­˜ä½ä½) å°ç«¯å­˜å‚¨ï¼šé«˜åœ°å€â€“ä½ä½ TCP/IPåè®®è§„å®šï¼Œç½‘ç»œæ•°æ®æµåº”é‡‡ç”¨å¤§ç«¯å­—èŠ‚åºã€‚ä¸ºäº†ä½¿ç½‘ç»œç¨‹åºå…·æœ‰å¯ç§»æ¤æ€§ï¼Œä½¿åŒæ ·çš„ c ä»£ç åœ¨å¤§ç«¯å’Œå°ç«¯è®¡ç®—æœºä¸Šç¼–è¯‘åéƒ½èƒ½æ­£å¸¸è¿è¡Œï¼Œå¯ä»¥è°ƒç”¨ä»¥ä¸‹åº“å‡½æ•°åšç½‘ç»œå­—èŠ‚åºå’Œä¸»æœºå­—èŠ‚åºçš„è½¬æ¢ã€‚ 123456#include&lt;arpa/inet.h&gt;uint32_t htonl(uint32_t hostlong);uint16_t htons(uint16_t hostshort);uint32_t ntohl(uint32_t netlong);uint16_t ntohs(uint16_t netshort); h æ ‡è¯†hostï¼Œ n è¡¨ç¤º networkï¼Œ I è¡¨ç¤º 32 ä½é•¿æ•´æ•°ï¼Œ s è¡¨ç¤º 16ä½çŸ­æ•´æ•°ã€‚ 6.2 ipåœ°å€è½¬æ¢å‡½æ•° 123#include&lt;arpa/inet.h&gt;int inet_pton(int af, const char *src, void *dst) //å­—ç¬¦ä¸²ipè½¬æ¢ç½‘ç»œå­—èŠ‚åº;const char *inet_ntop(int af,const void *src,char *dst, socklen_t size) //ç½‘ç»œå­—èŠ‚åºè½¬æ¢å­—ç¬¦ä¸²ip; 6.3 socketaddræ•°æ®ç»“æ„ 1234567891011// sockaddr_in ç»“æ„ä½“å®šä¹‰struct sockaddr_in &#123; sa_family_t sin_family; /* address family: AF_INET */ in_port_t sin_port; /* port in network byte order */ struct in_addr sin_addr; /* internet address */&#125;;/* Internet address. */struct in_addr &#123; uint32_t s_addr; /* address in network byte order */&#125;; 6.4 ç½‘ç»œå¥—æ¥å­—å‡½æ•° 1ï¼Œåˆ›å»ºå¥—æ¥å­—socketå‡½æ•°. 123int socket(int domain, int type, int protocol);è¿”å›å€¼ï¼š æˆåŠŸï¼šè¿”å›æŒ‡å‘åˆ›å»ºçš„socketçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå¤±è´¥ï¼šè¿”å›-1ï¼Œè®¾ç½®errnoã€‚ 2ï¼Œç»‘å®š ip å’Œç«¯å£å·å‡½æ•° bind. 1234567891011#include&lt;sys/types.h&gt;#include&lt;sys/socket.h&gt;int bind(int cockfd, const struct sockaddr *addr, socklen_t addrlen);sockfd: socket æ–‡ä»¶æè¿°ç¬¦addr: æ„é€ å‡ºIPåœ°å€+ç«¯å£å·addrlenï¼š sizeof(addr)é•¿åº¦è¿”å›å€¼ï¼š æˆåŠŸè¿”å›0ï¼Œå¤±è´¥è¿”å›-1ï¼Œè®¾ç½®errno 7. TCP C/Sæ¨¡å‹ï¼šserver.c client.c","categories":[{"name":"Linux","slug":"Linux","permalink":"https://blogs.leechee.top/categories/Linux/"}],"tags":[{"name":"unbuntu","slug":"unbuntu","permalink":"https://blogs.leechee.top/tags/unbuntu/"},{"name":"é«˜å¹¶å‘","slug":"é«˜å¹¶å‘","permalink":"https://blogs.leechee.top/tags/%E9%AB%98%E5%B9%B6%E5%8F%91/"},{"name":"C++","slug":"C","permalink":"https://blogs.leechee.top/tags/C/"}]},{"title":"ç®—æ³•åŸºç¡€","slug":"DSç¬”è®°","date":"2022-03-16T15:21:13.000Z","updated":"2023-01-11T01:23:51.700Z","comments":true,"path":"posts/fa1802cb/","link":"","permalink":"https://blogs.leechee.top/posts/fa1802cb/","excerpt":"","text":"åŸºç¡€ç®—æ³• scanf(&quot;%[^\\n]&quot;,a); è½½å…¥space [TOC] åŸºç¡€ æ’åº å¿«é€Ÿæ’åº 1 ç¡®å®šåˆ†ç•Œç‚¹ å·¦ å³æˆ–è€…ä¸­é—´ 2 è°ƒæ•´åŒºé—´ åˆ’åˆ†æˆä¿©éƒ¨åˆ† å¤§äºçš„å’Œå°äºçš„ 3 é€’å½’å¤„ç†å·¦å³ä¿©æ®µ 1234567891011121314void quick_sort(int q[], int l, int r)&#123; if (l &gt;= r) return; int i = l - 1, j = r + 1, x = q[l + r &gt;&gt; 1]; while (i &lt; j) &#123; do i ++ ; while (q[i] &lt; x); do j -- ; while (q[j] &gt; x); if (i &lt; j) swap(q[i], q[j]); &#125; quick_sort(q, l, j), quick_sort(q, j + 1, r);&#125; æ±‚æœ€å¤§å€¼ ä¾‹: 1234567891011121314151617#include &lt;bits/stdc++.h&gt;int quickfind(int l, int r, int k) &#123; // å‰åŠéƒ¨åˆ†å’Œå¿«æ’å®Œå…¨ç›¸åŒ if (l &gt;= r) return a[r]; int i = l - 1, j = r + 1, x = a[l + r &gt;&gt; 1]; while (i &lt; j) &#123; do i++; while (a[i] &lt; x); do j--; while (a[j] &gt; x); if (i &lt; j) swap(a[i], a[j]); &#125; // æ±‚å‡º SL çš„é•¿åº¦ï¼ˆåˆ†ç•Œç‚¹ - å·¦è¾¹ç•Œ + 1ï¼‰ int SL = j - l + 1; // æƒ…å†µ A if (k &lt;= SL) return quickfind(l, j, k); // æƒ…å†µ B else return quickfind(j + 1, r, k - SL);&#125; å½’å¹¶æ’åº ä¸»è¦æ€æƒ³:åˆ†æ²» (åŒæŒ‡é’ˆç®—æ³•) 1.æ‰¾åˆ†ç•Œç‚¹(ä¸­é—´) mid=(l+r&gt;&gt;1)é€’å½’æ’åºå·¦å³ 2.å½’å¹¶ æŠŠä¿©ä¸ªæœ‰åºçš„æ•°ç»„åˆå¹¶â€» åˆ†å¼€åæœ‰ä¿©ä¸ªåºåˆ—,é¦–å…ˆé€’å½’å°†ä¿©ä¸ªåºåˆ—å„è‡ªæ’åº,æ’åºå®Œä¹‹ååˆ†åˆ«æœ‰ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ä¿©ä¸ªåºåˆ—çš„æœ€å°å€¼,ä»¥ç¬¬ä¸€ä¸ªåºåˆ—å¼€å§‹çš„è¯,å¯¹æ¯”ä¿©ä¸ªåºåˆ—çš„å€¼å“ªä¸€ä¸ªå°,å°çš„å°±æ”¾åœ¨æ–°å»ºçš„resæ•°ç»„é‡Œå»,ç„¶åç¬¬ä¸€ä¸ªåºåˆ—çš„æŒ‡é’ˆå¾€åç§»åŠ¨ä¸€ä½(å½“ä¿©ä¸ªæ•°å­—ç›¸åŒæ—¶,éšä¾¿å°†ä¸€ä¸ªæŒ‡é’ˆåç§»).é‡å¤,ç›´åˆ°ä¸€ä¸ªåºåˆ—çš„æŒ‡é’ˆåœ¨ç»“å°¾,é‚£ä¹ˆæŠŠå¦ä¸€ä¸ªåºåˆ—çš„æ•°å…¨éƒ¨æ”¾åœ¨resåé¢å»å³å¯. 12345678910111213141516171819void merge_sort(int q[], int l, int r)&#123; if (l &gt;= r) return; int mid = l + r &gt;&gt; 1; merge_sort(q, l, mid); merge_sort(q, mid + 1, r); int k = 0, i = l, j = mid + 1; while (i &lt;= mid &amp;&amp; j &lt;= r) if (q[i] &lt;= q[j]) tmp[k ++ ] = q[i ++ ]; else tmp[k ++ ] = q[j ++ ]; while (i &lt;= mid) tmp[k ++ ] = q[i ++ ]; while (j &lt;= r) tmp[k ++ ] = q[j ++ ]; for (i = l, j = 0; i &lt;= r; i ++, j ++ ) q[i] = tmp[j];&#125; or 1234567891011121314151617void merge_sort(int nums[], int left, int right) &#123; if (left &gt;= right) return ; int mid = left + ((right - left) &gt;&gt; 1); merge_sort(nums, left, mid); merge_sort(nums, mid + 1, right); int k = left, l = left, r = mid + 1; while (k &lt;= right) &#123; if ((r &gt; right) || (l &lt;= mid &amp;&amp; nums[l] &lt;= nums[r])) tmp[k++] = nums[l++]; else tmp[k++] = nums[r++]; &#125; for (int i = left; i &lt;= right; ++i) nums[i] = tmp[i];&#125; äºŒåˆ† 12345678910int bsearch(int l,int r)&#123;while(l&lt;=r)&#123;int mid = l+r &gt;&gt;1;if(chekc(mid))r=mid-1;else l = mid + 1;&#125;return l - 1;&#125; æ•´æ•° æµ®ç‚¹æ•° é«˜ç²¾åº¦ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667// é«˜ç²¾åº¦åŠ æ³• a,bå‡ä¸ºéè´Ÿæ•´æ•°,ä¸‹åŒstring add(string a,string b) &#123; string c; int i = a.size()-1,j = b.size()-1,t = 0; while(i&gt;=0||j&gt;=0||t!=0) &#123; if(i&gt;=0) t += a[i--]-&#x27;0&#x27;; if(j&gt;=0) t += b[j--]-&#x27;0&#x27;; c += t%10+&#x27;0&#x27;; t/=10; &#125; return string(c.rbegin(),c.rend());// or reverse(c.begin(),c.end());&#125;// é«˜ç²¾åº¦å‡æ³•int cmp(string a,string b);string sub(string a,string b) &#123; if(cmp(a,b)==0) return &quot;0&quot;; if(cmp(a,b)==-1) &#123; cout&lt;&lt;&quot;-&quot;; return sub(b,a); &#125; string c; int i = a.size()-1,j = b.size()-1,t = 0; while(i&gt;=0||j&gt;=0||t!=0) &#123; t = a[i--] - t - &#x27;0&#x27;; if(j&gt;=0) t-=b[j--] - &#x27;0&#x27;; c += (t+10)%10 + &#x27;0&#x27;; t = t&lt;0? 1: 0; &#125; while(c.size()&gt;1&amp;&amp;*c.rbegin()==&#x27;0&#x27;) c.erase(c.size()-1); return string(c.rbegin(),c.rend());&#125;// é«˜ç²¾åº¦ä¹˜æ³•string mul(string a,int b) &#123; if(a==&quot;0&quot;||b==0) return &quot;0&quot;; string c; int i = a.size()-1,t = 0; while(i&gt;=0||t!=0) &#123; if(i&gt;=0) t+= (a[i--]-&#x27;0&#x27;)*b; c += t%10+&#x27;0&#x27;; t/=10; &#125; return string(c.rbegin(),c.rend());&#125;// é«˜ç²¾åº¦é™¤æ³•string div(string a, int b, int&amp; r) &#123; string c; r = 0; for (int i = 0; i &lt; a.size(); i++) &#123; r = r * 10 + a[i] - &#x27;0&#x27;; c += r / b + &#x27;0&#x27;; r %= b; &#125; while (c.size() &gt; 1 &amp;&amp; c[0] == &#x27;0&#x27;) c.erase(0, 1); return c;&#125;int cmp(string a,string b) &#123; return a==b?0:a.size()&gt;b.size()?1:a.size()&lt;b.size()?-1:a&gt;b?1:-1; // è¿™å¥è¯å’Œä¸‹é¢æ³¨é‡Šå†…å®¹ç­‰ä»· // if(a==b) return 0; // if(a.size()&gt;b.size()) return 1; // if(a.size()&lt;b.size()) return -1; // return a&gt;b? 1 : -1;&#125; å‰ç¼€å’Œä¸å·®åˆ† å‰ç¼€å’Œ ä¸€ç»´ å‰ç¼€å’Œç±»ä¼¼äºé«˜ä¸­çš„æ•°ç»„,åœ¨æ±‚æ•°ç»„å‰né¡¹å’Œ,n~mé¡¹å’Œçš„æ—¶å€™,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Sn(å‰né¡¹å’Œçš„æ–¹å¼å»æ±‚å‡ºæˆ‘ä»¬æ‰€éœ€è¦éƒ¨åˆ†çš„é•¿åº¦) S[i] = a[1] + a[2] + ... a[i] a[l] + ... + a[r] = S[r] - S[l - 1] äºŒç»´ æ„æ€åŒä¸€ç»´ ä»£è¡¨æ±‚ä¸€ä¸ªé¢ç§¯å†…æŸä¸ªåæ ‡æ‰€å¯¹åº”ç‚¹çš„é¢ç§¯ S[i, j] = ç¬¬iè¡Œjåˆ—æ ¼å­å·¦ä¸Šéƒ¨åˆ†æ‰€æœ‰å…ƒç´ çš„å’Œ ä»¥(x1, y1)ä¸ºå·¦ä¸Šè§’ï¼Œ(x2, y2)ä¸ºå³ä¸‹è§’çš„å­çŸ©é˜µçš„å’Œä¸ºï¼š S[x2, y2] - S[x1 - 1, y2] - S[x2, y1 - 1] + S[x1 - 1, y1 - 1] å·®åˆ† -ä¸€ç»´-äºŒç»´ åŒæŒ‡é’ˆç®—æ³• ä½è¿ç®— ç¦»æ•£åŒ– è¡¥ 1234567891011121314151617vector&lt;int&gt; alls; // å­˜å‚¨æ‰€æœ‰å¾…ç¦»æ•£åŒ–çš„å€¼sort(alls.begin(), alls.end()); // å°†æ‰€æœ‰å€¼æ’åºalls.erase(unique(alls.begin(), alls.end()), alls.end()); // å»æ‰é‡å¤å…ƒç´ // äºŒåˆ†æ±‚å‡ºxå¯¹åº”çš„ç¦»æ•£åŒ–çš„å€¼int find(int x) // æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºç­‰äºxçš„ä½ç½®&#123; int l = 0, r = alls.size() - 1; while (l &lt; r) &#123; int mid = l + r &gt;&gt; 1; if (alls[mid] &gt;= x) r = mid; else l = mid + 1; &#125; return r + 1; // æ˜ å°„åˆ°1, 2, ...n&#125; åŒºé—´åˆå¹¶ æ•°æ®ç»“æ„ é“¾è¡¨ä¸é‚»æ¥è¡¨:æ ‘ä¸å›¾çš„å­˜å‚¨ æ ˆå’Œé˜Ÿåˆ— kmp Trieæ ‘ 12345678910111213141516171819202122232425262728293031int son[N][26], cnt[N], idx;// 0å·ç‚¹æ—¢æ˜¯æ ¹èŠ‚ç‚¹ï¼Œåˆæ˜¯ç©ºèŠ‚ç‚¹// son[][]å­˜å‚¨æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹// cnt[]å­˜å‚¨ä»¥æ¯ä¸ªèŠ‚ç‚¹ç»“å°¾çš„å•è¯æ•°é‡// æ’å…¥ä¸€ä¸ªå­—ç¬¦ä¸²void insert(char *str)&#123; int p = 0; for (int i = 0; str[i]; i ++ ) &#123; int u = str[i] - &#x27;a&#x27;; if (!son[p][u]) son[p][u] = ++ idx; p = son[p][u]; &#125; cnt[p] ++ ;&#125;// æŸ¥è¯¢å­—ç¬¦ä¸²å‡ºç°çš„æ¬¡æ•°int query(char *str)&#123; int p = 0; for (int i = 0; str[i]; i ++ ) &#123; int u = str[i] - &#x27;a&#x27;; if (!son[p][u]) return 0; p = son[p][u]; &#125; return cnt[p];&#125; å¹¶æŸ¥é›† 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970(1)æœ´ç´ å¹¶æŸ¥é›†ï¼š int p[N]; //å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—èŠ‚ç‚¹ // è¿”å›xçš„ç¥–å®—èŠ‚ç‚¹ int find(int x) &#123; if (p[x] != x) p[x] = find(p[x]); return p[x]; &#125; // åˆå§‹åŒ–ï¼Œå‡å®šèŠ‚ç‚¹ç¼–å·æ˜¯1~n for (int i = 1; i &lt;= n; i ++ ) p[i] = i; // åˆå¹¶aå’Œbæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆï¼š p[find(a)] = find(b);(2)ç»´æŠ¤sizeçš„å¹¶æŸ¥é›†ï¼š int p[N], size[N]; //p[]å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—èŠ‚ç‚¹, size[]åªæœ‰ç¥–å®—èŠ‚ç‚¹çš„æœ‰æ„ä¹‰ï¼Œè¡¨ç¤ºç¥–å®—èŠ‚ç‚¹æ‰€åœ¨é›†åˆä¸­çš„ç‚¹çš„æ•°é‡ // è¿”å›xçš„ç¥–å®—èŠ‚ç‚¹ int find(int x) &#123; if (p[x] != x) p[x] = find(p[x]); return p[x]; &#125; // åˆå§‹åŒ–ï¼Œå‡å®šèŠ‚ç‚¹ç¼–å·æ˜¯1~n for (int i = 1; i &lt;= n; i ++ ) &#123; p[i] = i; size[i] = 1; &#125; // åˆå¹¶aå’Œbæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆï¼š size[find(b)] += size[find(a)]; p[find(a)] = find(b);(3)ç»´æŠ¤åˆ°ç¥–å®—èŠ‚ç‚¹è·ç¦»çš„å¹¶æŸ¥é›†ï¼š int p[N], d[N]; //p[]å­˜å‚¨æ¯ä¸ªç‚¹çš„ç¥–å®—èŠ‚ç‚¹, d[x]å­˜å‚¨xåˆ°p[x]çš„è·ç¦» // è¿”å›xçš„ç¥–å®—èŠ‚ç‚¹ int find(int x) &#123; if (p[x] != x) &#123; int u = find(p[x]); d[x] += d[p[x]]; p[x] = u; &#125; return p[x]; &#125; // åˆå§‹åŒ–ï¼Œå‡å®šèŠ‚ç‚¹ç¼–å·æ˜¯1~n for (int i = 1; i &lt;= n; i ++ ) &#123; p[i] = i; d[i] = 0; &#125; // åˆå¹¶aå’Œbæ‰€åœ¨çš„ä¸¤ä¸ªé›†åˆï¼š p[find(a)] = find(b); d[find(a)] = distance; // æ ¹æ®å…·ä½“é—®é¢˜ï¼Œåˆå§‹åŒ–find(a)çš„åç§»é‡ å † 12345678910111213141516171819202122232425262728293031323334353637// h[N]å­˜å‚¨å †ä¸­çš„å€¼, h[1]æ˜¯å †é¡¶ï¼Œxçš„å·¦å„¿å­æ˜¯2x, å³å„¿å­æ˜¯2x + 1// ph[k]å­˜å‚¨ç¬¬kä¸ªæ’å…¥çš„ç‚¹åœ¨å †ä¸­çš„ä½ç½®// hp[k]å­˜å‚¨å †ä¸­ä¸‹æ ‡æ˜¯kçš„ç‚¹æ˜¯ç¬¬å‡ ä¸ªæ’å…¥çš„int h[N], ph[N], hp[N], size;// äº¤æ¢ä¸¤ä¸ªç‚¹ï¼ŒåŠå…¶æ˜ å°„å…³ç³»void heap_swap(int a, int b)&#123; swap(ph[hp[a]],ph[hp[b]]); swap(hp[a], hp[b]); swap(h[a], h[b]);&#125;void down(int u)&#123; int t = u; if (u * 2 &lt;= size &amp;&amp; h[u * 2] &lt; h[t]) t = u * 2; if (u * 2 + 1 &lt;= size &amp;&amp; h[u * 2 + 1] &lt; h[t]) t = u * 2 + 1; if (u != t) &#123; heap_swap(u, t); down(t); &#125;&#125;void up(int u)&#123; while (u / 2 &amp;&amp; h[u] &lt; h[u / 2]) &#123; heap_swap(u, u / 2); u &gt;&gt;= 1; &#125;&#125;// O(n)å»ºå †for (int i = n / 2; i; i -- ) down(i); Hashè¡¨ æ¨¡æ‹Ÿæ•£åˆ—è¡¨ 12345678910111213141516171819202122232425262728293031323334353637(1) æ‹‰é“¾æ³• int h[N], e[N], ne[N], idx; // å‘å“ˆå¸Œè¡¨ä¸­æ’å…¥ä¸€ä¸ªæ•° void insert(int x) &#123; int k = (x % N + N) % N; e[idx] = x; ne[idx] = h[k]; h[k] = idx ++ ; &#125; // åœ¨å“ˆå¸Œè¡¨ä¸­æŸ¥è¯¢æŸä¸ªæ•°æ˜¯å¦å­˜åœ¨ bool find(int x) &#123; int k = (x % N + N) % N; for (int i = h[k]; i != -1; i = ne[i]) if (e[i] == x) return true; return false; &#125;(2) å¼€æ”¾å¯»å€æ³• int h[N]; // å¦‚æœxåœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œè¿”å›xçš„ä¸‹æ ‡ï¼›å¦‚æœxä¸åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œè¿”å›xåº”è¯¥æ’å…¥çš„ä½ç½® int find(int x) &#123; int t = (x % N + N) % N; while (h[t] != null &amp;&amp; h[t] != x) &#123; t ++ ; if (t == N) t = 0; &#125; return t; &#125; å­—ç¬¦ä¸²å“ˆå¸Œ 12345678910111213141516171819æ ¸å¿ƒæ€æƒ³ï¼šå°†å­—ç¬¦ä¸²çœ‹æˆPè¿›åˆ¶æ•°ï¼ŒPçš„ç»éªŒå€¼æ˜¯131æˆ–13331ï¼Œå–è¿™ä¸¤ä¸ªå€¼çš„å†²çªæ¦‚ç‡ä½å°æŠ€å·§ï¼šå–æ¨¡çš„æ•°ç”¨2^64ï¼Œè¿™æ ·ç›´æ¥ç”¨unsigned long longå­˜å‚¨ï¼Œæº¢å‡ºçš„ç»“æœå°±æ˜¯å–æ¨¡çš„ç»“æœtypedef unsigned long long ULL;ULL h[N], p[N]; // h[k]å­˜å‚¨å­—ç¬¦ä¸²å‰kä¸ªå­—æ¯çš„å“ˆå¸Œå€¼, p[k]å­˜å‚¨ P^k mod 2^64// åˆå§‹åŒ–p[0] = 1;for (int i = 1; i &lt;= n; i ++ )&#123; h[i] = h[i - 1] * P + str[i]; p[i] = p[i - 1] * P;&#125;// è®¡ç®—å­ä¸² str[l ~ r] çš„å“ˆå¸Œå€¼ULL get(int l, int r)&#123; return h[r] - h[l - 1] * p[r - l + 1];&#125; STLæŠ€å·§ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107vector, å˜é•¿æ•°ç»„ï¼Œå€å¢çš„æ€æƒ³ size() è¿”å›å…ƒç´ ä¸ªæ•° empty() è¿”å›æ˜¯å¦ä¸ºç©º clear() æ¸…ç©º front()/back() push_back()/pop_back() begin()/end() [] æ”¯æŒæ¯”è¾ƒè¿ç®—ï¼ŒæŒ‰å­—å…¸åºpair&lt;int, string&gt; p=make_pair(x,xx);//å¯ä»¥æ˜¯æ•°å­—ä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸² pair&lt;int , pair&lt;int , int&gt;&gt;p; first, ç¬¬ä¸€ä¸ªå…ƒç´  second, ç¬¬äºŒä¸ªå…ƒç´  æ”¯æŒæ¯”è¾ƒè¿ç®—ï¼Œä»¥firstä¸ºç¬¬ä¸€å…³é”®å­—ï¼Œä»¥secondä¸ºç¬¬äºŒå…³é”®å­—ï¼ˆå­—å…¸åºï¼‰stringï¼Œå­—ç¬¦ä¸² string a=&quot;lzzzzzz&quot;; size()/length() è¿”å›å­—ç¬¦ä¸²é•¿åº¦ empty() clear() substr(èµ·å§‹ä¸‹æ ‡ï¼Œ(å­ä¸²é•¿åº¦)) è¿”å›å­ä¸² c_str() è¿”å›å­—ç¬¦ä¸²æ‰€åœ¨å­—ç¬¦æ•°ç»„çš„èµ·å§‹åœ°å€queue, é˜Ÿåˆ— queue&lt;int&gt; q; q=queue&lt;int&gt;(); size() empty() push() å‘é˜Ÿå°¾æ’å…¥ä¸€ä¸ªå…ƒç´  front() è¿”å›é˜Ÿå¤´å…ƒç´  back() è¿”å›é˜Ÿå°¾å…ƒç´  pop() å¼¹å‡ºé˜Ÿå¤´å…ƒç´ priority_queue, ä¼˜å…ˆé˜Ÿåˆ—ï¼Œé»˜è®¤æ˜¯å¤§æ ¹å † priority_queue&lt;int&gt; heap; size() empty() push() æ’å…¥ä¸€ä¸ªå…ƒç´  top() è¿”å›å †é¡¶å…ƒç´  pop() å¼¹å‡ºå †é¡¶å…ƒç´  å®šä¹‰æˆå°æ ¹å †çš„æ–¹å¼ï¼špriority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt;&gt; q;stack, æ ˆ size() empty() push() å‘æ ˆé¡¶æ’å…¥ä¸€ä¸ªå…ƒç´  top() è¿”å›æ ˆé¡¶å…ƒç´  pop() å¼¹å‡ºæ ˆé¡¶å…ƒç´ deque, åŒç«¯é˜Ÿåˆ— size() empty() clear() front()/back() push_back()/pop_back() push_front()/pop_front() begin()/end() [] //éšæœºé€‰å–set, map, multiset, multimap, åŸºäºå¹³è¡¡äºŒå‰æ ‘ï¼ˆçº¢é»‘æ ‘ï¼‰ï¼ŒåŠ¨æ€ç»´æŠ¤æœ‰åºåºåˆ— size() empty() clear() begin()/end() ++, -- è¿”å›å‰é©±(å‰ä¸€ä¸ªæ•°)å’Œåç»§ï¼Œæ—¶é—´å¤æ‚åº¦ O(logn) set/multiset insert() æ’å…¥ä¸€ä¸ªæ•° find() æŸ¥æ‰¾ä¸€ä¸ªæ•° count() è¿”å›æŸä¸€ä¸ªæ•°çš„ä¸ªæ•° erase() (1) è¾“å…¥æ˜¯ä¸€ä¸ªæ•°xï¼Œåˆ é™¤æ‰€æœ‰x O(k + logn) (2) è¾“å…¥ä¸€ä¸ªè¿­ä»£å™¨ï¼Œåˆ é™¤è¿™ä¸ªè¿­ä»£å™¨ lower_bound()/upper_bound() lower_bound(x) è¿”å›å¤§äºç­‰äºxçš„æœ€å°çš„æ•°çš„è¿­ä»£å™¨ upper_bound(x) è¿”å›å¤§äºxçš„æœ€å°çš„æ•°çš„è¿­ä»£å™¨ map/multimap exp:map&lt;string,int&gt;a a[&quot;lzz&quot;]=1; cout&lt;&lt;a[&quot;lzz&quot;] -&gt;1 insert() æ’å…¥çš„æ•°æ˜¯ä¸€ä¸ªpair erase() è¾“å…¥çš„å‚æ•°æ˜¯pairæˆ–è€…è¿­ä»£å™¨ find() [] æ³¨æ„multimapä¸æ”¯æŒæ­¤æ“ä½œã€‚ æ—¶é—´å¤æ‚åº¦æ˜¯ O(logn) lower_bound()/upper_bound()unordered_set, unordered_map, unordered_multiset, unordered_multimap, å“ˆå¸Œè¡¨ å’Œä¸Šé¢ç±»ä¼¼ï¼Œå¢åˆ æ”¹æŸ¥çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(1) ä¸æ”¯æŒ lower_bound()/upper_bound()ï¼Œ è¿­ä»£å™¨çš„++ï¼Œ--bitset, åœ§ä½ bitset&lt;10000&gt; s; ~, &amp;, |, ^ &gt;&gt;, &lt;&lt; ==, != [] count() è¿”å›æœ‰å¤šå°‘ä¸ª1 any() åˆ¤æ–­æ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ª1 none() åˆ¤æ–­æ˜¯å¦å…¨ä¸º0 set() æŠŠæ‰€æœ‰ä½ç½®æˆ1 set(k, v) å°†ç¬¬kä½å˜æˆv reset() æŠŠæ‰€æœ‰ä½å˜æˆ0 flip() ç­‰ä»·äº~ flip(k) æŠŠç¬¬kä½å–å vectoréå† æœç´¢ä¸å›¾è®º DFSä¸BFS DFS Nçš‡åé—®é¢˜ ç¬¬ä¸€ç§è§£æ³•dfs BFS æ ‘ä¸å›¾ å­˜å‚¨ 1234567891011121314// å¯¹äºæ¯ä¸ªç‚¹kï¼Œå¼€ä¸€ä¸ªå•é“¾è¡¨ï¼Œå­˜å‚¨kæ‰€æœ‰å¯ä»¥èµ°åˆ°çš„ç‚¹ã€‚h[k]å­˜å‚¨è¿™ä¸ªå•é“¾è¡¨çš„å¤´ç»“ç‚¹int h[N], e[N], ne[N], idx;// nä¸ªé“¾è¡¨çš„é“¾è¡¨å¤´ ç»“ç‚¹çš„å€¼æ˜¯å¤šå°‘ æ¯ä¸ªèŠ‚ç‚¹çš„nextå€¼æ˜¯å¤šå°‘ // æ·»åŠ ä¸€æ¡è¾¹a-&gt;bvoid add(int a, int b)&#123; e[idx] = b, ne[idx] = h[a], h[a] = idx ++ ; //&#125;// åˆå§‹åŒ–idx = 0;memset(h, -1, sizeof h); éå† dfs 12345678910int dfs(int u)&#123; st[u] = true; // st[u] è¡¨ç¤ºç‚¹uå·²ç»è¢«éå†è¿‡ for (int i = h[u]; i != -1; i = ne[i]) &#123; int j = e[i];//å½“å‰é“¾è¡¨é‡Œçš„èŠ‚ç‚¹å¯¹åº”å›¾é‡Œçš„ç¼–å· if (!st[j]) dfs(j); &#125;&#125; bfs 12345678910111213141516171819queue&lt;int&gt; q;st[1] = true; // è¡¨ç¤º1å·ç‚¹å·²ç»è¢«éå†è¿‡q.push(1);while (q.size())&#123; int t = q.front(); q.pop(); for (int i = h[t]; i != -1; i = ne[i]) &#123; int j = e[i]; if (!st[j]) &#123; st[j] = true; // è¡¨ç¤ºç‚¹jå·²ç»è¢«éå†è¿‡ q.push(j); &#125; &#125;&#125; æœ€çŸ­è·¯ æœ€å°ç”Ÿæˆæ ‘ äºŒåˆ†å›¾ï¼šæŸ“è‰²æ³•ã€åŒˆç‰™åˆ©ç®—æ³• Math More è´¨æ•° çº¦æ•° æ¬§æ‹‰å‡½æ•° å¿«é€Ÿå¹‚ æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³• ä¸­å›½å‰©ä½™å®šç† é«˜æ–¯æ¶ˆå…ƒ ç»„åˆè®¡æ•° å®¹æ–¥åŸç† ç®€å•åšå¼ˆè®º åŠ¨æ€è§„åˆ’ èƒŒåŒ…é—®é¢˜ 01èƒŒåŒ… 1234567891011121314151617181920212223242526272829303132333435363738#include &lt;iostream&gt;#include &lt;algorithm&gt;using namespace std;const int N = 1010;int n;//æ‰€æœ‰ç‰©å“ä¸ªæ•°int m;//èƒŒåŒ…å®¹é‡int v[N], w[N];//vè¡¨ç¤ºä½“ç§¯,wè¡¨ç¤ºä»·å€¼int f[N][N];//è¡¨ç¤ºæ‰€æœ‰çš„çŠ¶æ€int main()&#123; cin &gt;&gt; n &gt;&gt; m; for (int i = 1; i &lt;= n; i++) cin &gt;&gt; v[i] &gt;&gt; w[i]; for(int i=1; i&lt;=n; i++) for (int j = 1; j &lt;= m; j++) &#123; f[i][j] = f[i - 1][j]; if (j &gt;= v[i]) f[i][j] = max(f[i][j], f[i - 1][j - v[i]] + w[i]); &#125; cout &lt;&lt; f[n][m]; return 0;&#125;//è½¬åŒ–æˆä¸€ç»´//f(i)åªç”¨åˆ°äº†f(i-1)è¿™å±‚ int f[N];int main()&#123; cin &gt;&gt; n &gt;&gt; m; for (int i = 1; i &lt;= n; i++) cin &gt;&gt; v[i] &gt;&gt; w[i]; for(int i=1; i&lt;=n; i++) for (int j = m; j &gt;= v[i]; j--) &#123; f[j] = max(f[j], f[j - v[i]] + w[i]); &#125; cout &lt;&lt; f[m]; return 0;&#125; å®Œå…¨èƒŒåŒ… 12345678910111213141516171819202122232425262728293031323334353637//æœ´ç´ åšæ³•#include &lt;iostream&gt;#include &lt;algorithm&gt;using namespace std;const int N=1010;int n,m;int v[N],w[N];int f[N][n];int main()&#123; cin&gt;&gt;n&gt;&gt;m; for (int i = 1; i &lt;= n; i ++ ) cin &gt; v[i] &gt;&gt;w[i]; for (int i = 1; i &lt;= n; i ++ ) for (int j = 0; j &lt;= m; j ++ ) for (int k =0; k * v[i] &lt;= j; k ++ ) f[i][j] = max(f[i][j]ï¼Œf[i - 1][j - v[i]* k] + w[i] * k); cout &lt;&lt; f[n][m] &lt;&lt; endl; return 0;&#125;//ä¼˜åŒ–æˆäºŒç»´for (int i = 1; i &lt;= n; i ++ ) cin &gt; v[i] &gt;&gt;w[i]; for (int i = 1; i &lt;= n; i ++ ) for (int j = 0; j &lt;= m; j ++ ) &#123; f[i][j]=f[i-1][j]; if(j&gt;=v[i]) f[i][j]=max(f[i][j],f[i][j-v[i]]+w[i]); &#125;//ä¼˜åŒ–æˆä¸€ç»´int f[N];for (int i = 1; i &lt;= n; i ++ ) for (int j = v[i]; j &lt;= m; j ++ ) &#123; f[j]=max(f[j],f[j-v[i]]+w[i]); &#125; å®Œå…¨èƒŒåŒ… æš´åŠ› 12345678```## çº¿æ€§DP### æ•°å­—ä¸‰è§’å½¢ ç»™å®šä¸€ä¸ªå¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ•°å­—ä¸‰è§’å½¢ï¼Œä»é¡¶éƒ¨å‡ºå‘ï¼Œåœ¨æ¯ä¸€ç»“ç‚¹å¯ä»¥é€‰æ‹©ç§»åŠ¨è‡³å…¶å·¦ä¸‹æ–¹çš„ç»“ç‚¹æˆ–ç§»åŠ¨è‡³å…¶å³ä¸‹æ–¹çš„ç»“ç‚¹ï¼Œä¸€ç›´èµ°åˆ°åº•å±‚ï¼Œè¦æ±‚æ‰¾å‡ºä¸€æ¡è·¯å¾„ï¼Œä½¿è·¯å¾„ä¸Šçš„æ•°å­—çš„å’Œæœ€å¤§ã€‚ 7 3 8 8 1 0 2 7 4 4 4 5 2 6 5 è¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡ŒåŒ…å«æ•´æ•°nï¼Œè¡¨ç¤ºæ•°å­—ä¸‰è§’å½¢çš„å±‚æ•°ã€‚ æ¥ä¸‹æ¥nè¡Œï¼Œæ¯è¡ŒåŒ…å«è‹¥å¹²æ•´æ•°ï¼Œå…¶ä¸­ç¬¬ i è¡Œè¡¨ç¤ºæ•°å­—ä¸‰è§’å½¢ç¬¬ i å±‚åŒ…å«çš„æ•´æ•°ã€‚ è¾“å‡ºæ ¼å¼ è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤§çš„è·¯å¾„æ•°å­—å’Œã€‚ æ•°æ®èŒƒå›´ 1 â‰¤ n â‰¤ 500, âˆ’10000 â‰¤ ä¸‰è§’å½¢ä¸­çš„æ•´æ•° â‰¤ 10000 è¾“å…¥æ ·ä¾‹ï¼š 5 7 3 8 8 1 0 2 7 4 4 4 5 2 6 5 è¾“å‡ºæ ·ä¾‹ï¼š 30 ![](https://cdn.jsdelivr.net/gh/zhezheup/picture-house/20220326165232.png) ### æœ€é•¿ä¸Šå‡å­åºåˆ— ![](https://cdn.jsdelivr.net/gh/zhezheup/picture-house/20220326165740.png) ![](https://cdn.jsdelivr.net/gh/zhezheup/picture-house/20220327011837.png) ## åŒºé—´DP ### çŸ³å­åˆå¹¶ ![](https://cdn.jsdelivr.net/gh/zhezheup/picture-house/20220327022354.png) ![](https://cdn.jsdelivr.net/gh/zhezheup/picture-house/20220327024625.png) ## è®¡æ•°ç±»DP ## æ•°ä½ç»Ÿè®¡DP ## çŠ¶æ€å‹ç¼©DP ## æ ‘å½¢DP ## è®°å¿†åŒ–æœç´¢ # è´ªå¿ƒ # æ—¶ç©ºå¤æ‚åº¦","categories":[{"name":"DataStructure","slug":"DataStructure","permalink":"https://blogs.leechee.top/categories/DataStructure/"}],"tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://blogs.leechee.top/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ’åº","slug":"æ’åº","permalink":"https://blogs.leechee.top/tags/%E6%8E%92%E5%BA%8F/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://blogs.leechee.top/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}]},{"title":"C++","slug":"CplusåŸºç¡€","date":"2022-03-16T15:21:13.000Z","updated":"2023-01-11T01:24:44.923Z","comments":true,"path":"posts/f9a964a9/","link":"","permalink":"https://blogs.leechee.top/posts/f9a964a9/","excerpt":"","text":"[TOC] åŸºç¡€More size_t : typedef unsigned int C++çš„é™æ€è½¬æ¢: bä¸ºè¦è½¬æ¢çš„å†…å®¹ int a=static_cast&lt;int ç›®æ ‡ç±»å‹&gt;(b); æŸ¥çœ‹å˜é‡ç±»å‹: typeid(å˜é‡).name(); æ ¼å¼åŒ–è¾“å‡ºæµ: è¿ç®—ä¼˜å…ˆçº§:(ä¼˜å…ˆçº§ä»ä¸Šåˆ°ä¸‹) æšä¸¾å˜é‡ 1234567891011enum class xx:int //è‡ªåŠ¨é€’å¢1,ä»ä¸Šå¾€ä¸‹&#123; normal, high, low=xx, other, other1=other//å¤šä¸ªæƒ…å†µ&#125;;//ä½¿ç”¨xx use_xxn&#123;xx::normal&#125;;xx use_xxh&#123;xx::high&#125;; 1.æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå®‰å…¨æ€§ 2.æšä¸¾ç±»å‹é»˜è®¤intå‹ 3.æšä¸¾ç±»å‹æˆå‘˜åªèƒ½æ˜¯æ•´æ•°ç±»å‹ 4.æšä¸¾ç±»å‹å’Œå…¶ä»–ç±»å‹è½¬æ¢éœ€è¦å¼ºåˆ¶è½¬æ¢ è‡ªå®šä¹‰å˜é‡åç§° ä¸‰ç§æ–¹å¼: 123#define A Typename //typedef Typename A; //Typenameè¢«Aæ›¿æ¢using A=Typename; //åŒä¸Š è‡ªå®šä¹‰å‘½åç©ºé—´: 123456namespace yournamespace&#123; int ... string int xx()&#125; å˜é‡çš„å£°æ˜å‘¨æœŸ: å˜é‡ç”Ÿå‘½åœ¨ä»£ç å—ç»“æŸåæ­»äº¡. å…¨å±€å˜é‡çš„ç”Ÿå‘½ç¨‹åºè¿è¡Œä¸€ç›´å­˜åœ¨ 1::xx //å®šä¹‰åä½¿ç”¨åŒå†’å·ä½¿ç”¨ ä½è¿ç®—: è¾“å‡ºäºŒè¿›åˆ¶æ–‡ä»¶. 12å¼•ç”¨ bitsetå¤´æ–‡ä»¶std::bitset&lt;è¦æ˜¾ç¤ºçš„äºŒè¿›åˆ¶ä½æ•°&gt;(è¦æ˜¾ç¤ºçš„å˜é‡); std::boolalpha å¯ä»¥å°†æµçš„è¾“å‡ºæ§åˆ¶ä¸ºboolç±»å‹ å­—ç¬¦å¤„ç† åˆ¤æ–­ C++17è¯­æ³• if(int a; check() ) {} switch(å˜é‡å£°æ˜ ï¼›æ¡ä»¶ï¼ˆï¼‰) {} gotoçš„ä½¿ç”¨ ï¼š input&#123;ä»£ç æ®µ&#125; ... goto inputï¼› æ•°ç»„ æ•°ç»„çš„åœ°å€è¿ç»­ æ±‚å¤§å° sizeof(a[])/sizeof(a[0]) or sizeof(æ•°ç»„å/sizeof(ç±»å‹å)) åŸºäºæ•°ç»„çš„å¾ªç¯ for(å˜é‡ç±»å‹ å˜é‡åç§° : æ•°ç»„) &#123;&#125; for(auto å˜é‡åç§° : æ•°ç»„) &#123;&#125; arrayå®¹å™¨ #include std::array&lt; å˜é‡ç±»å‹ , å…ƒç´ æ•°é‡&gt; å˜é‡å; exp: std::array&lt;int ,5&gt;stuID; //äº”ä¸ªå­¦ç”Ÿçš„å­¦å· 1234stuID.size();stuID.fill(x); //å°†æ‰€æœ‰å…ƒç´ éƒ½è®¾ç½®ä¸ºxstuID.at(1); //è¿”å›stu[1]é‡Œçš„å†…å®¹ vectorå®¹å™¨ arrayçš„ä¼˜ç‚¹åŸºæœ¬éƒ½å…·å¤‡ size fill at #include æŒ‡é’ˆ c++å£°æ˜æŒ‡é’ˆéœ€è¦åˆå§‹åŒ– æŒ‡é’ˆæ•°ç»„ int* array[10] æ•°ç»„é‡Œé¢å­˜äº†10ä¸ªæŒ‡é’ˆ æŒ‡é’ˆè¯¦ç»† {å¾…è¡¥å……} 123 åŠ¨æ€å†…å­˜åˆ†é… cå†…å­˜åˆ†é… void* malloc ï¼š ç”¨æ³•{ } nullptr ç›¸å½“äº0 ï¼ˆc++17æ–°ï¼‰ void* calloc(size_t count , size_t size); : ä¸ºç”¨æˆ·åˆ†é…count*sizeå­—èŠ‚ä¸ªå†…å­˜ void* realloc(void* _Block,size_t_size) : ä¸ºç”¨æˆ·é‡æ–°åˆ†é…å†…å­˜ï¼Œ_Blockæ˜¯ç”¨æˆ·å·²ç»åˆ†é…å¥½çš„å†…å­˜ï¼ŒSizeæ˜¯è¦æ±‚é‡æ–°åˆ†é…çš„å¤§å° void* free(void* _Block) : é‡Šæ”¾å†…å­˜ c++å†…å­˜åˆ†é… é‡Šæ”¾å†…å­˜ï¼š 12if (int* p = new int ) delete p;if (int* p = new int[x]) delete []p; é£é™© æ‚¬æŒ‚æŒ‡é’ˆï¼šé‡Šæ”¾äº†è¿˜åœ¨ç»§ç»­ä½¿ç”¨é‡Šæ”¾æ‰çš„åœ°å€ å†…å­˜ç¢ç‰‡ï¼šé¢‘ç¹ç”³è¯·å’Œé‡Šæ”¾å°å—å†…å­˜ä¼šé€ æˆå†…å­˜ç¢ç‰‡ï¼ŒåŸåˆ™ä¸Šå¯ä»¥ä½¿ç”¨ï¼Œå®é™…ä¸Šä½¿å¾—æˆ‘ä»¬æ— æ³•åˆ†é…æ–°çš„å†…å­˜.ä½†æ˜¯newå’Œdeleteçš„ç®—æ³•ä¼šå¸®åŠ©æˆ‘ä»¬å°½é‡è§„é¿ å¤åˆ¶å†…å­˜ mallocå’Œnewæœ¬è´¨åŒºåˆ« å¯¹äºæ™®é€šçš„æ•°æ®ç±»å‹æ¥è¯´mallocå’Œnewæ²¡ä»€ä¹ˆåŒºåˆ«,ä½†æ˜¯å¯¹äºç±»æ¥è¯´,mallocä»…ä»…æ˜¯åˆ†é…å†…å­˜è€Œnewé™¤äº†åˆ†é…å†…å­˜ä»¥å¤–è¿˜ä¼šè°ƒç”¨æ„é€ å‡½æ•°! freeå’Œdeleteæœ¬è´¨åŒºåˆ« å¯¹äºæ™®é€šçš„æ•°æ®ç±»å‹æ¥è¯´freeå’Œdeleteæ²¡æœ‰ä»€ä¹ˆåŒºåˆ«,ä½†æ˜¯å¯¹äºç±»æ¥è¯´,freeä»…ä»…æ˜¯é‡Šæ”¾å†…å­˜ç©ºé—´,è€Œdeleteä¸ä»…é‡Šæ”¾å†…å­˜ç©ºé—´,è¿˜ä¼šè°ƒç”¨ç±»çš„ææ„å‡½æ•° deleteå’Œdelete[]æœ¬è´¨åŒºåˆ« å¯¹äºæ™®é€šçš„æ•°æ®ç±»å‹æ¥è¯´deletcå’Œdelete[]æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«,ä½†æ˜¯å¯¹äºç±»æ¥è¯´,deleteä»…ä»…æ˜¯é‡Šæ”¾å†…å­˜ç©ºé—´,ä¸”è°ƒç”¨ç¬¬ä¸€ä¸ªå…ƒç´ çš„ææ„å‡½æ•°,è€Œdelete[]ä¸ä»…é‡Šæ”¾å†…å­˜ç©ºé—´,è¿˜ä¼šè°ƒç”¨æ¯ä¸€ä¸ªå…ƒç´ çš„ææ„å‡½æ•° å¯¹æ™®é€šæ•°æ®ç±»å‹æ— æ‰€è°“ å¼•ç”¨ å¼•ç”¨çš„æœ¬è´¨å…¶å®å°±æ˜¯ä¸€ç§è¢«é˜‰å‰²äº†çš„æŒ‡é’ˆï¼Œè™½ç„¶æˆ‘ä»¬å–å€å¼•ç”¨å˜é‡å¾—åˆ°çš„æ˜¯åŸåœ°å€çš„å†…å­˜åœ°å€ï¼Œä½†æ˜¯å¼•ç”¨å˜é‡ä¹Ÿæ˜¯å ç”¨å†…å­˜çš„ å¼•ç”¨éœ€è¦åˆå§‹åŒ– æé«˜ä»£ç æ•ˆç‡ï¼Œ{ä¸ªäººè§‰å¾—ç±»ä¼¼äºè½¯è¿æ¥} è¯­æ³•ï¼š æ•°æ®ç±»å‹&amp;å˜é‡åç§°&#123;å¼•ç”¨å¯¹è±¡çš„åç§°&#125;ï¼› expï¼š int a&#123;500&#125;; int&amp; la&#123;a&#125;; la=500å³a=5200. æ™ºèƒ½æŒ‡é’ˆ std::unique_ptr ç¬¬ä¸€ç§å£°æ˜ä¸å…è®¸ç”¨æ•°ç»„æ–¹å¼è®¿é—®ï¼Œç¬¬äºŒç§å¯ä»¥ã€‚ æ™ºèƒ½æŒ‡é’ˆä¸å…è®¸æŒ‡å‘åˆ«çš„æ™ºèƒ½æŒ‡é’ˆã€‚å…·æœ‰å”¯ä¸€æ€§ã€‚ ç”¨æ³• 1234567reset();//resetå°†ä¼šé‡Šæ”¾std::unique_ptrçš„å†…å­˜ç©ºé—´ï¼Œå¹¶ä¸”è®¾ç½®ä¸ºnullptrget();//getè¿”å›std::unique_ptrçš„æŒ‡é’ˆrelease();//releaseè¿”å›std::unique_ptrçš„æŒ‡é’ˆ,å¹¶ä¸”è®¾ç½®ä¸ºnullptrï¼Œä½†æ˜¯ä¸ä¼šé‡Šæ”¾å ç”¨çš„å†…å­˜ç©ºé—´ std::shared_ptr 12345678910111213141516std::shared_ptrçš„å¤åˆ¶std::shared_ptr&lt;int&gt; ptrA&#123;&#125;std::shared_ptr&lt;int&gt; ptrB&#123;std::make_shared&lt;int&gt;(5)&#125;;ptrA=ptrB;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·//è·å¾—è®¡æ•°long std::shared_ptr.use_count();.use_count();ä¼šè¿”å›å½“å‰æŒ‡é’ˆå…±æœ‰å¤šå°‘ä¸ªå¯¹è±¡è°ƒç”¨bool std::shared_ptr.unique();//unique()ä¼šè¿”å›ä»¥ä¸€ä¸ªboolå€¼ï¼Œifå½“å‰æ™ºèƒ½æŒ‡é’ˆæ˜¯å”¯ä¸€æ‹¥æœ‰è¯¥æŒ‡é’ˆçš„äººï¼Œè¿”å›truestd::shared_ptr.reset();//å°†å½“å‰å…±äº«æŒ‡é’ˆè®¾ç½®ä¸ºnullptrï¼Œå¦‚æœæ˜¯æœ€åä¸€ä¸ªæ‹¥æœ‰è¯¥æŒ‡é’ˆçš„å¯¹è±¡ï¼Œé‡Šæ”¾å†…å­˜ ç‰¹æ€§ å¯ä»¥æœ‰å¤šä¸ªstd::shared_ptræŒ‡å‘åŒä¸€åœ°å€ï¼ŒåŒä¸€åœ°å€ä¸‹åªæœ‰æœ€åä¸€ä¸ªstd::shared_ptré‡Šæ”¾çš„æ—¶å€™ï¼Œæ‰ä¼šé‡Šæ”¾å…¶æ‰€å ç”¨çš„ç©ºé—´ï¼Œstd::shared_pträ¼šè®°å½•å½“å‰æœ‰å¤šå°‘ä¸ªæ™ºèƒ½æŒ‡é’ˆè°ƒç”¨ CåŸç”Ÿå­—ç¬¦ä¸² å­—ç¬¦ä¸²å°±æ˜¯æŒ‡é’ˆï¼Œæ•°ç»„ &lt;! å¾…è¡¥å…… --&gt; wchar_t str[0xff]&#123;L&quot;HEllo&quot;&#125;; å®½å­—èŠ‚å¸¸é‡ ï¼ˆä½¿ç”¨utf-16å®ç°UNICODEï¼‰ ä½¿ç”¨UNICODEæ ‡å‡† ï¼š setlocale(LC_ALL,&quot;chs&quot;) ä½¿ç”¨wcoutè¾“å‡º std::cout é»˜è®¤è¾“å‡ºcharç±»å‹çš„å€¼æ—¶ä¼šå½“ä½œå­—ç¬¦ä¸²è¿›è¡Œå¤„ç†ã€‚ è”åˆä½“ union è¯­æ³•ï¼š 1234567891011union è”åˆä½“åç§°&#123; å˜é‡ç±»å‹ å˜é‡åç§°; å˜é‡ç±»å‹ å˜é‡åç§°;&#125;exp:union user&#123; short shp; int xhp;&#125; é€šè¿‡unionå¯ä»¥åˆ›å»ºä¸€ä¸ªè”åˆä½“ï¼Œunionä¸­çš„æˆå‘˜å˜é‡å…±äº«å†…å­˜ï¼Œå› æ­¤ unionçš„æ•°æ®ç±»å‹å¤§å°ç”±å…¶æœ€å¤§çš„æˆå‘˜å˜é‡å†³å®š unionä¸­ä»»æ„ä¸€æˆå‘˜å˜é‡å‘ç”Ÿæ”¹å˜éƒ½å¯èƒ½å½±å“åˆ«çš„å˜é‡ åŒ¿åè”åˆä½“ã€ç»“æ„ä½“ é¡¾åæ€ä¹‰ï¼Œæ²¡æœ‰åå­—çš„è”åˆä½“å’Œç»“æ„ä½“ ä¸€èˆ¬åªç”¨ä¸€æ¬¡ C++å­—ç¬¦ä¸²string #include &lt;string&gt; å®šä¹‰ï¼š std::string str&#123;&quot;wow!&quot;&#125;; std::string å˜é‡åç§°&#123; &quot;å­—ç¬¦ä¸²&quot; , è¦æˆªå–çš„é•¿åº¦&#125; expï¼šstring str&#123;&quot;1234&quot;,2&#125;; str=&quot;12&quot; std::string å˜é‡åç§°&#123; &quot;å­—ç¬¦ä¸²&quot; ï¼Œèµ·å§‹ä½ç½® ï¼Œ è¦æˆªå–çš„é•¿åº¦&#125; std::string å˜é‡åç§°(è¦å¤åˆ¶çš„ä¸ªæ•°ï¼Œ'å­—ç¬¦') è¿æ¥å­—ç¬¦ä¸² std::string str(6,'a'); str=str+&quot;123; str=&quot;aaa123&quot; è¿æ¥å­—ç¬¦ä¸²å’Œæ•°å­— std::string str = std::to_string(æ•°å­—)ï¼› å­—ç¬¦ä¸²è¿æ¥å­—ç¬¦ä¸² å­—ç¬¦ä¸²ä¸èƒ½ç›´æ¥å’Œåˆ«çš„å­—ç¬¦ä¸²è¿æ¥ï¼Œå¯ä»¥ä½¿ç”¨ä¸´æ—¶å˜é‡è§£å†³(std::string(xx)); å¯ä»¥ &quot;å˜é‡&quot;&quot;å˜é‡&quot; å˜æˆ&quot;å˜é‡å˜é‡&quot; ä¹Ÿå¯ä»¥str.append(&quot;ä½ è¦æ‹¼æ¥çš„å†…å®¹&quot;) å¯ä»¥æ— é™åŠ  å­—ç¬¦ä¸²è¿æ¥å­—ç¬¦ ç›´æ¥+â€˜å­—ç¬¦â€™ å³å¯ æˆªå–å­—ç¬¦ä¸² .substr(èµ·å§‹ä½ç½®ï¼Œè¦æˆªå–çš„é•¿åº¦); or .substr(èµ·å§‹ä½ç½®) é•¿åº¦ std::string.length(); å¾—åˆ°é•¿åº¦ å­—ç¬¦ä¸²æ¯”è¾ƒ .compare() æ¯”å¦‚ï¼š str.compare(&quot;abcd&quot;); å¤§äºè¿”å›æ­£æ•°ï¼Œç›¸ç­‰ç­‰äº0ï¼› æ‰©å±•ï¼š .compare(èµ·å§‹ä½ç½®,å‚ä¸æ¯”è¾ƒçš„é•¿åº¦,è¢«æ¯”è¾ƒçš„å­—ç¬¦ä¸²); å­—ç¬¦ä¸²æœç´¢ .find() ç”¨æ¥æœç´ å­—ç¬¦ä¸²çš„å†…å®¹,å¹¶è¿”å›å†…å®¹æ‰€åœ¨çš„ä½ç½®,å½“è¿”å›å€¼æ˜¯std::string::nposè¡¨ç¤ºæœªæ‰¾åˆ° .find(è¦æœç´¢çš„å†…å®¹ , å¼€å§‹æœç´¢çš„ä½ç½®) .find(è¦æœç´¢çš„å†…å®¹,å¼€å§‹æœç´ çš„ä½ç½®,è¦çº³å…¥çš„å­—ç¬¦ä¸²é•¿åº¦[æ³¨:æ˜¯æœç´¢å†…å®¹çš„å­—ç¬¦ä¸²]) .rfind() ç”¨æ³•å’Œfindä¸€æ ·,ä»å­—ç¬¦ä¸²å°¾éƒ¨å€’å™æœç´¢ æ’å…¥å­—ç¬¦ä¸² .insert() å¯ä»¥åœ¨ä¸€ä¸ªstringå­—ç¬¦ä¸²çš„æŒ‡å®šä½ç½®æ’å…¥å¦ä¸€ä¸ªå­—ç¬¦ä¸² .insert(è¦æ’å…¥çš„ä½ç½® , è¦æ’å…¥çš„å­—ç¬¦ä¸²) .insert(è¦æ’å…¥çš„ä½ç½®,è¦æ’å…¥çš„å­—ç¬¦ä¸ªæ•°,è¦æ’å…¥çš„å­—ç¬¦) exp:id.insert(3,6,â€˜xâ€™); .insert(è¦æ’å…¥çš„ä½ç½®,è¦æ’å…¥çš„å­—ç¬¦ä¸²,è¦æ’å…¥çš„å­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½®,è¦æ’å…¥çš„å¤§å°) .insert(è¦æ’å…¥çš„ä½ç½®,è¦æ’å…¥çš„å­—ç¬¦ä¸²,è¦æ’å…¥çš„å¤§å°) æ›¿æ¢å­—ç¬¦ä¸² .replace å¯ä»¥æ›¿æ¢stringå­—ç¬¦ä¸²ä¸­çš„å†…å®¹ .replace(è¦æ›¿æ¢å†…å®¹çš„èµ·å§‹ä½ç½®, è¦æ›¿æ¢çš„é•¿åº¦ ,&quot;æ›¿æ¢çš„å­—ç¬¦ä¸²&quot;) .replace(è¦æ›¿æ¢å†…å®¹çš„èµ·å§‹ä½ç½®, è¦æ›¿æ¢çš„é•¿åº¦ ,&quot;æ›¿æ¢çš„å­—ç¬¦ä¸²&quot; ,'å­—ç¬¦') å¯¹å•å­—ç¬¦ .replace(è¦æ›¿æ¢å†…å®¹çš„èµ·å§‹ä½ç½®, è¦æ›¿æ¢çš„é•¿åº¦ ,&quot;æ›¿æ¢çš„å­—ç¬¦ä¸²&quot; ,æ›¿æ¢åå†…å®¹èŠ‚é€‰é•¿åº¦[æ­¤å¤„æ˜¯æ›¿æ¢çš„å­—ç¬¦ä¸²çš„]) .replace(è¦æ›¿æ¢å†…å®¹çš„èµ·å§‹ä½ç½®, è¦æ›¿æ¢çš„é•¿åº¦ ,&quot;æ›¿æ¢çš„å­—ç¬¦ä¸²&quot;,æ›¿æ¢åçš„èµ·å§‹ä½ç½®,æ›¿æ¢åå†…å®¹çš„èŠ‚é€‰é•¿åº¦ åˆ é™¤å­—ç¬¦ä¸² ``.erase()` åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„å†…å®¹ .erase(è¦åˆ é™¤çš„èµ·å§‹ä½ç½®,è¦åˆ é™¤çš„èµ·å§‹é•¿åº¦) .erase(è¦åˆ é™¤çš„èµ·å§‹ä½ç½®) exp: ä»èµ·å§‹ä½ç½®åˆ é™¤æ‰€æœ‰çš„å†…å®¹ str.clear(); æŒ‡é’ˆæ•°ç»„å­—ç¬¦ä¸²å†…å­˜å­¦ä¹  {å¾…è¡¥å……} æƒ³å¾—åˆ°æ”¾å­—ç¬¦ä¸²è¿™æ®µå†…å­˜çš„åŒºåŸŸ ä¸èƒ½ä¿®æ”¹! å…¶ä»– expï¼šè¾“å…¥ä¸­æ–‡è‹±æ–‡ç­‰å­—ç¬¦ä¸²ï¼Œæ­£ç¡®è¿”å›å­—ç¬¦ä¸ªæ•° å¾…è¡¥å…… å‡½æ•° æŒ‡é’ˆå‚æ•° æ•°ç»„å‚æ•° å»ºè®®ç”¨æ•°ç»„æ–¹å¼å¼•ç”¨ å¼•ç”¨å‚æ•° æŒ‡é’ˆå¯ä»¥ä¼ å…¥nullptrï¼Œè€Œå¼•ç”¨ä¸å¯ä»¥ é»˜è®¤å®å‚ expï¼š void func(int a,int&amp; b,int* c,bool x=true) æ­¤æ—¶ç”¨æˆ·æ ¹æ®éœ€è¦è°ƒç”¨funcæ—¶xå¯å†™å¯ä¸å†™ï¼Œä¸å†™é»˜è®¤æ˜¯true ï¼é»˜è®¤å®å‚åªèƒ½æ”¾åœ¨æœ€å å¼•ç”¨å®šä¹‰çš„æ—¶å€™ä¸èƒ½çæŒ‡ ä¸å®šé‡å‚æ•° mianï¼ˆint argc,char** argcï¼‰&#123;&#125; Cè¯­è¨€ä¹Ÿå¸¸ç”¨ å‡½æ•°è¿”å›ï¼šè¿”å›æŒ‡é’ˆå’Œå¼•ç”¨ {çŸ¥è¯†å¾ˆå¤š å¾…è¡¥å……} æ¯”å¦‚è¿”å›ç»“æ„ä½“ ï¼Œè¿”å›æŒ‡é’ˆï¼Œè¿”å›å¼•ç”¨ï¼Œä¼ é€’å¼•ç”¨å‚æ•°æ—¶çš„ç±»å‹è½¬æ¢ æ•°ç»„çš„å¼•ç”¨ï¼š expï¼š int a[100] int(&amp;b)[100]=a ä¼ é€’æ•°ç»„å¼•ç”¨ï¼š 1234int num(int (&amp;array)[100])&#123; return sizeof(ary);&#125; å‡½æ•°å‚æ•°ï¼šå³å€¼å¼•ç”¨ psï¼šå‡½æ•°ä½¿ç”¨å¼•ç”¨ä¼šèŠ‚çº¦å†…å­˜æ¶ˆè€— å·¦å€¼å°±æ˜¯ä¸€èˆ¬å·¦è¾¹å®šä¹‰çš„ä¸œè¥¿æœ‰æ˜ç¡®çš„å†…å­˜ç©ºé—´ å¯ä»¥è¯»å–å†™å…¥ï¼Œå³å€¼æ˜¯å­˜æ”¾åœ¨ä¸´æ—¶ç©ºé—´å†… expï¼š*(a+1)=2 æ­¤äº‹a+1ä»ç„¶æ˜¯ä¸€ä¸ªå³å€¼ int&amp;&amp; å³å€¼å¼•ç”¨ exp: 1234int&amp;&amp; e = 100+100;void Add(int&amp;&amp; a)&#123; std::cout&lt;&lt;a; &#125;Add(e+320+329); è®¾è®¡å­—ç¬¦ä¸²ç±»çš„æ—¶å€™ä¼šæ„Ÿå—åˆ°â€¦ exp: åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„è§’è‰²ä¿¡æ¯ 1234567891011121314struct Role&#123; int hp; int mp;&#125;Role createmonster()&#123; Role rt&#123;100,200&#125;; return rt;&#125;void Show(Role&amp;&amp; rl)//æ²¡æœ‰åˆ†é…å†…å­˜ç©ºé—´å´è¾¾åˆ°äº†åŒæ ·çš„æ•ˆæœ&#123; std::cout&lt;&lt;rl.hp;&#125; å‡½æ•°çš„æœ¬è´¨ loading å‡½æ•°æŒ‡é’ˆ å¯ä»¥æŒ‡å‘ç‰¹å®šç±»å‹å‡½æ•°çš„æŒ‡é’ˆ å‡½æ•°è¿”å›ç±»å‹ (*å‡½æ•°æŒ‡é’ˆå˜é‡å)(å‚æ•°ç±»å‹ å‚æ•°åç§°, â€¦å‚æ•°ç±»å‹ å‚æ•°åç§°); è½¬ç±»å‹ char (*myadd)(int,int)=(char (*)(int,int)Add); å¼ºè½¬å¤ªé•¿äº†æ€ä¹ˆåŠ: typedefå‡½æ•°è¿”å›ç±»å‹ (*å‡½æ•°æŒ‡é’ˆå˜é‡å)(å‚æ•°ç±»å‹ å‚æ•°åç§°,....å‚æ•°ç±»å‹ å‚æ•°åç§°); ä¹Ÿå¯ä»¥: using pfadd=char (*)(int,int); å‡½æ•°é‡è½½ C++æœ‰ï¼Œcè¯­è¨€éœ€è¦è‡ªå·±å®ç°ï¼Œä¸è‡ªå¸¦æ­¤åŠŸèƒ½ å°½ç®¡å‡½æ•°åç§°ç›¸åŒ,ä½†æ˜¯åœ¨æˆ‘ä»¬è°ƒç”¨å‡½æ•°æ—¶,é€šè¿‡å‡½æ•°å‚æ•°çš„ä¸åŒ,ç¼–è¯‘å™¨è¿˜æ˜¯èƒ½å¤Ÿç¡®å®šæˆ‘ä»¬è°ƒç”¨çš„æ˜¯å“ªä¸€ä¸ªå‡½æ•°,å› æ­¤ç¨‹åºèƒ½å¤Ÿå‡†ç¡®çš„ç¼–è¯‘ ï¼ æ˜¯å‚æ•°çš„ä¸åŒå¯ä»¥ç¡®å®šæ˜¯å“ªä¸ªå‡½æ•°ã€‚ ä½†æ˜¯ç¼–è¯‘å™¨æ— æ³•å•çº¯é€šè¿‡è¿”å›å€¼æ¥ç¡®å®šä½ è¦è¿”å›çš„å‡½æ•°,å‚æ•°è¦ä¸åŒ! exp: float ave() å’Œ int ave() æ— æ³•é‡è½½ exp: åŒæ ·çš„å‡½æ•°,ç”¨æŒ‡é’ˆå’Œæ•°ç»„å†™æ³•ä¸èƒ½é‡è½½,å¼•ç”¨ä¹Ÿä¸è¡Œ Tips:ä¸ºä»€ä¹ˆä¿©ä¸ªå‡½æ•°,æœ‰ä¸€ä¸ªint&amp; ä¸€ä¸ªfloat ,æˆ‘å®šä¹‰äº†charå˜é‡å»è°ƒç”¨,å¼ºè½¬ä¸º(int)xå‹,å»è°ƒç”¨å‡½æ•°å´ä»ç„¶æ˜¯floatå‡½æ•°,å› ä¸ºå¼ºè½¬åªæ˜¯å£°æ˜äº†ä¸€ä¸ªä¸´æ—¶çš„å˜é‡,è€Œå¼•ç”¨éœ€è¦å·²ç»å®šä¹‰çš„(çœŸå®å­˜åœ¨çš„)å˜é‡ åŒæ ·çš„å‡½æ•°,ä¸€ä¸ªint ä¸€ä¸ªconst intä¹Ÿä¸è¡Œ(ä¼šå‡ºç°æ­§ä¹‰) ä½†æ˜¯ä¸€ä¸ªæ˜¯intçš„å¼•ç”¨int&amp; ä¸€ä¸ªæ˜¯ const int&amp; å¸¸é‡å¼•ç”¨,é‚£å°±å¯ä»¥é‡è½½ å‡½æ•°é‡è½½çš„æ—¶å€™ä¸å¯ä»¥è®¾ç½®é»˜è®¤å‚æ•° å‡½æ•°æ¨¡æ¿ é™¤äº†ç±»å‹ä¸åŒå¤–,å‡½æ•°çš„è¿ç®—é€»è¾‘éƒ½ä¸€æ ·,è¿™æ ·çš„å‡½æ•°æˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨å‡½æ•°æ¨¡æ¿æŠ€æœ¯æ¥ç”Ÿæˆå¯¹åº”çš„å‡½æ•°. 123456789101112131415template &lt;typename type1&gt; type1 ave(type1 a,type1 b)//aveæ±‚å¹³å‡å€¼çš„&#123; return (a+b/2);&#125;int a=ave(1,2); //aveç›¸å½“äºint ave(int a,int b)char a=ave(1,2); //aveç›¸å½“äºchar ave(cahr a,char b)exp:template &lt;typename type1&gt; type1 ave(type1 a,type1 b,type1 c)&#123; type1 a;//å¯ä»¥å®šä¹‰ return (a+b+c)/3;&#125;//ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªå‡½æ•°æ¨¡æ¿expï¼š ave&lt;int&gt;(192.0f,159.3f); // æ‰§è¡Œint ave å‡½æ•°æ¨¡æ¿å’Œé‡è½½ å‡½æ•°æ¨¡æ¿çš„ä¾‹å¤–å¤„ç† 12345678910template &lt;typename type1&gt; type1 ave(type1 a,type1 b)&#123;return (a+b)/2;&#125;template &lt;&gt; float ave(float a,float b)&#123;return (a+b-100.0f)/2;&#125;æˆ‘ä»¬å¯ä»¥åˆ©ç”¨template&lt;&gt;å®šä¹‰ä¸€ç§å‡½æ•°æ¨¡æ¿çš„ä¾‹å¤–æƒ…å†µ å‡½æ•°é‡è½½ä¼˜å…ˆäºå‡½æ•°æ¨¡æ¿,ä½†æ˜¯å‡½æ•°æ¨¡æ¿çš„ä¾‹å¤–æƒ…å†µè¦ä¼˜å…ˆäºå‡½æ•°é‡è½½ å‡½æ•°æ¨¡æ¿çš„é‡è½½ å‡½æ•°æ¨¡æ¿çš„é‡è½½ä¹Ÿæ˜¯é€šè¿‡å‚æ•°æ¥åŒºåˆ† 1 æ¨æ–­å‡½æ•°æ¨¡æ¿è¿”å›ç±»å‹(å¤šä¸åŒç±»å‹) è¿”å›å€¼,ä¼ å…¥å‚æ•°éƒ½ä¸åŒ 123456789101112131415161718192021222324252627282930313233343536373839404142434445temp1ate &lt;typename type1,typename type2&gt;type1 ave(type1 a,type2 b)&#123;return (a+b)/2;&#125;template &lt;typename type1,typename type2&gt;type1 ave(type1 a,type2 b,int c)&#123;return (a+b+c)/3;&#125;//åŒæ—¶è°ƒç”¨çš„æ—¶å€™å¯ä»¥ ave&lt;int,int&gt;();ç±»ä¼¼äºè¿™æ ·å¼ºè¡Œæ›´æ”¹ç±»å‹ template &lt;typename type1,typename type2&gt;type1 ave(type1 a,type2 b,int c)&#123;return (a+b+c)/2;M&#125;template &lt;typename typeR,typename type1,typename type2&gt;typeR bigger(type1 a,type2 b)&#123;return a&gt;b?a:b;bigger&lt;int&gt;(100,120.2f);bigger&lt;int,float,int&gt;(100,120.2f);//### å¦‚ä½•æ›´åŠ æ™ºèƒ½çš„æ¨æ–­-&gt; (c++14å)temp1ate &lt;typename typeR,typename type1,typename type2&gt;typeR bigger(type1 a,type2 b)&#123;return a&gt;b?a:b;&#125;//å¯ä»¥åˆ©ç”¨autoæ¥æ¨æ–­è¿”å›å€¼çš„ç±»å‹template &lt;typename type1,typename type2&gt;auto bigger(type1 a,type2 b)&#123;return ab?a:b;)&#125;æ³¨*autoåšè¿”å›ç±»å‹æ¨æ–­æ˜¯åœ¨C++14ä¹‹åå¼•å…¥çš„template &lt;typename type1,typename type2&gt;auto bigger(type1 a,type2 b-&gt;decltype(a&gt;b?a:b)&#123;return a&gt;b?a:b;&#125;template &lt;typename type1,typename type2&gt;decltype(auto) bigger(type1 a,type2 b) //decltype(auto)å¯ä»¥é€šè¿‡å¼•ç”¨æ›´æ”¹å€¼&#123;return a&gt;b?a:b;&#125;//decltype(auto)ä¸ºC++14åçš„å†™æ³• å‡½æ•°æ¨¡æ¿å‚æ•° 1å¾…è¡¥å…… å¾ˆå¤š å‡½æ•°æ¨¡æ¿æœ¬è´¨ å¾…è¡¥å…… auto and decltype c++11ä¹‹åå‡ºç° autoå¯ä»¥å£°æ˜ä¸€ä¸ªå˜é‡,è®©ç¼–è¯‘å™¨æ ¹æ®å˜é‡çš„å€¼æ¥æ¨æ–­å˜é‡çš„ç±»å‹ ä¾‹å¦‚ auto a&#123;123&#125;; ç›¸å½“äº``int a{123; åˆ©ç”¨autoçš„è¿™ä¸€ç‰¹æ€§æˆ‘ä»¬å¯ä»¥åˆ©ç”¨autoæ¥åˆ›å»ºä¸€ä¸ªå‡½æ•° 123456789101112auto ave(int a,int b)&#123;return a+b;&#125;ç›¸å½“äºint ave(int a,int b)&#123;return a+b;&#125;æ³¨*ä»¥ä¸Šéƒ½å¹¶éautoçš„æœ€æ°å½“ç”¨æ³•,ä¸ç®¡æ˜¯å‡½æ•°è¿˜æ˜¯å˜é‡,éƒ½ä¸æ¨èä½¿ç”¨autoæ¥å£°æ˜ auto 12345678910111213141516171819202122232425autoä¸èƒ½ä¿ç•™constå±æ€§æ¯”å¦‚const int a&#123;&#125;;auto c = a;cæ˜¯intç±»å‹è€Œéconstç±»å‹auto ä¼šä¼˜å…ˆæ¨æ–­ä¸ºå€¼ç±»å‹è€Œéå¼•ç”¨ç±»å‹int a&#123;5&#125;;const int&amp; la=a;auto d=a;dä¸ºintç±»å‹è€Œéint&amp; autoåˆ©ç”¨å‡½æ•°è¿”å›å€¼æ¥ç¡®å®šç±»å‹çš„æ—¶å€™,å‡½æ•°ä¼šæ‰§è¡Œauto x=ave(1,2);//ave(1,2)ä¼šæ‰§è¡Œxçš„ç±»å‹ä¾æ®aveå‡½æ•°çš„è¿”å›ç±»å‹æ¥ç¡®å®šauto bigger(int&amp; a,int&amp; b)&#123;return a&gt;b?a:b;&#125;autoä¼šä¼˜å…ˆæŠŠå€¼åŒ¹é…æˆå€¼ç±»å‹è€Œéå¼•ç”¨ç±»å‹,å°±ä»¥æœ¬ä¾‹æ¥è¯´å‡è®¾æˆ‘ä»¬å¸Œæœ›biggerå‡½æ•°è¿”å›çš„æ˜¯int&amp; ç”¨autoå£°æ˜è¾¾ä¸åˆ°è¿™æ ·çš„æ•ˆæœ,ä¸ºäº†è¾¾åˆ°è¿™ç§ç›®çš„,æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦å¤–ä¸€ç§æŠ€æœ¯: æ‹–å°¾å‡½æ•°auto bigger(int&amp; a,int&amp; b)-&gt;int&amp;&#123;return a&gt;b?a:b;&#125; decltype decltypeå…³é”®å­—å¯ä»¥å¾—å‡ºä¸€ä¸ªè¡¨è¾¾å¼çš„ç±»å‹; è¯­æ³•:decltype(è¡¨è¾¾å¼) int a&#123;&#125;; unsigned b; decltype(a-b) x;ç›¸å½“äºunsigned x; å¦‚æœdecltypeå†…çš„è¡¨è¾¾å¼æ²¡ç»å†ä»»ä½•è¿ç®—,é‚£ä¹ˆå¾—å‡ºçš„æ•°æ®ç±»å‹åŒè¡¨è¾¾å¼å†…çš„æ•°æ®ç±»å‹,å¹¶ä¸”decltypeå¯ä»¥ä¿ç•™constå’Œå¼•ç”¨ç±»å‹ . ç¼–è¯‘å™¨ä¾å¤„ç†decltypeå…³é”®å­—æ—¶çš„åŸåˆ™: å¦‚æœdecltypeå†…çš„è¡¨è¾¾å¼ç»å†äº†è¿ç®—,é‚£ä¹ˆå¾—å‡ºçš„æ•°æ®ç±»å‹æ˜¯æ ¹æ®è¿ç®—ç»“æœæ˜¯å¦æœ‰å›ºå®šçš„å†…å­˜åœ°å€(å·¦å€¼)æ¥å†³å®šçš„,å¦‚æœæœ‰å›ºå®šçš„å†…å­˜åœ°å€åˆ™å¾—å‡ºçš„ç±»å‹ä¸ºè¯¥ç±»å‹çš„å¼•ç”¨ç±»å‹,å¦‚æœæ²¡æœ‰å›ºå®šçš„å†…å­˜åœ°å€,åˆ™å¾—å‡ºçš„ç±»å‹ä¸ºè¯¥ç»“æœçš„ç±»å‹. å¦‚æœdecltypeå†…çš„è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªå‡½æ•°,é‚£ä¹ˆå¾—å‡ºçš„æ•°æ®ç±»å‹æ˜¯æ ¹æ®å‡½æ•°çš„è¿”å›ç±»å‹æ¥ç¡®å®šçš„;(decltypeä¸ä¼šæ‰§è¡Œå‡½æ•°) static(onlyå˜é‡) and inline static åˆ©ç”¨staticå¯ä»¥å£°æ˜ä¸€ä¸ªé™æ€å˜é‡ staticç±»å‹å˜é‡åç§°; ä¾‹å¦‚: static int a; staticçš„å˜é‡,å¦‚æœæ²¡æœ‰æŒ‡å®šåˆå§‹åŒ–çš„å€¼,é‚£ä¹ˆä¼šåˆå§‹åŒ–ä¸º0,æ— è®ºæœ‰æ²¡æœ‰æŒ‡å®šåˆå§‹å€¼,éƒ½åªä¼šåˆå§‹åŒ–ä¸€æ¬¡! exp: countä¸ä¼šåªä¼šåœ¨å‡½æ•°è¢«åˆå§‹åŒ–ä¸€æ¬¡,ç”Ÿå‘½å‘¨æœŸå¾ˆé•¿,å€¼ä¼šä¿ç•™ 1234int Add(int a,int b)&#123;static int count;count++;&#125; inline inline int Add(int a,int b){ return a+b; } æˆ‘ä»¬å¯ä»¥ç”¨inlineå£°æ˜ä¸€ä¸ªå†…è”å‡½æ•° å†…è”å‡½æ•°å°†ä¼šå»ºè®®ç¼–è¯‘å™¨æŠŠè¿™ä¸ªå‡½æ•°å¤„ç†æˆå†…è”ä»£ç ä»¥æå‡æ€§èƒ½ å§‹ç»ˆæ˜¯å»ºè®®,å…·ä½“ç¼–è¯‘å™¨æ˜¯å¦é‡‡çº³,ç”±ç¼–è¯‘å™¨å†³å®š [æœ‰äº›è¿‡æ—¶äº†] extern å‡½æ•°ä¸€äº›ç†è®º ç†è§£å®šä¹‰å’Œå£°æ˜ æˆ‘ä»¬å†™çš„å‡½æ•°å°±æ˜¯å‡½æ•°çš„å®šä¹‰ å› ä¸ºå‡½æ•°çš„å®šä¹‰æ˜¯æˆ‘ä»¬è¦å‘Šè¯‰è®¡ç®—æœºå…·ä½“å¦‚ä½•æ¥æ‰§è¡Œæˆ‘ä»¬çš„å‘½ä»¤,æ‰€ä»¥è¿™ä¸ªå‘½ä»¤å¿…é¡»æ˜¯æ˜ç¡®çš„,ä½ ä¸èƒ½å‘Šè¯‰å®ƒåŒæ—¶å¾€ä¸œå¹¶ä¸”å¾€å³,è¿™å°±è¯´æ˜æˆ‘ä»¬ç¼–å†™ä»£ç çš„æ—¶å€™,ä½ ä¸èƒ½å¤šæ¬¡å®šä¹‰ä¸€ä¸ªå‡½æ•°! å› æ­¤å‡½æ•°çš„å®šä¹‰åªèƒ½æœ‰ä¸€æ¬¡! ä½†æ˜¯å‡½æ•°çš„å£°æ˜æ˜¯æˆ‘ä»¬å’Œç¼–è¯‘å™¨çš„å¯¹è¯,åœ¨æŸäº›ç‰¹æ®Šçš„åœºæ™¯ä¸‹,æˆ‘ä»¬å¯ä»¥å¤šæ¬¡å£°æ˜ä¸€ä¸ªå‡½æ•°! è™½ç„¶ç¼–è¯‘å™¨è§‰å¾—æˆ‘ä»¬å•°å—¦,ä½†æ˜¯å¹¶ä¸å½±å“æˆ‘ä»¬ä¹‹å‰çš„æ„Ÿæƒ…ã€‚ å£°æ˜çš„æœ¬è´¨æ˜¯ä¸ç¼–è¯‘å™¨çš„å¯¹è¯,å•çº¯çš„å£°æ˜å¹¶ä¸å­˜åœ¨å†…å­˜çš„åˆ†é…,åªæ˜¯ç»™ç¼–è¯‘å™¨ä¸€ä¸ªå¤§ä½“çš„æ¦‚å¿µï¼Œæ—¢ç„¶æ˜¯å¯¹è¯,æˆ‘ä»¬å¯ä»¥å¤šæ¬¡å¯¹è¯,æ‰€ä»¥å¯¹äºåŒä¸€ä¸ªäº‹ç‰©,æˆ‘ä»¬å¯ä»¥å¤šæ¬¡å£°æ˜; è€Œå®šä¹‰çš„æœ¬è´¨æ˜¯è¦é€šè¿‡ç¼–è¯‘å™¨ä¸è®¡ç®—æœºå¯¹è¯,è¿™å°±æ¶‰åŠåˆ°å†…å­˜çš„åˆ†é…å’Œè®¿é—®,å› æ­¤åŒä¸€äº‹ç‰©,ä¸ç®¡å£°æ˜å¤šå°‘æ¬¡,ä½†æ˜¯åªèƒ½æœ‰ä¸€æ¬¡å®šä¹‰; å˜é‡å…¶å®ä¹Ÿé€‚ç”¨è¿™ä¸ªè§„åˆ™,æˆ‘ä»¬å¯ä»¥é€šè¿‡å…³é”®å­—externå£°æ˜ä¸€ä¸ªå˜é‡,è€ŒæŠŠå˜é‡çš„å£°æ˜å’Œå®šä¹‰åˆ†å¼€; æˆ‘ä»¬å†™å‡½æ•°çš„å£°æ˜çš„æ—¶å€™,æ²¡æœ‰å†™externå…³é”®å­—,æ˜¯å› ä¸ºå‡½æ•°çš„å£°æ˜æœ¬èº«å°±æ˜¯externçš„,å› æ­¤ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æŒ‡å‡º; extern çš„ä½œç”¨ä¹Ÿæ˜¯å‘Šè¯‰ç¼–è¯‘å™¨,æ­¤å¤„åªæ˜¯ä¸€ä¸ªå£°æ˜,ä½ å»åˆ«å¤„æ‰¾å®šä¹‰,å› æ­¤externæ˜¯é’ˆå¯¹çš„å…¨å±€å˜é‡ï¼Œå› ä¸ºå±€éƒ¨å˜é‡ä¸å­˜åœ¨å»åˆ«Uæ‰¾çš„å¯èƒ½æ€§!è€Œå‡½æ•°çš„å£°æ˜è‡ªå¸¦externå±æ€§,å› æ­¤å‡½æ•°æœ¬èº«ä¹Ÿæ˜¯å…¨å±€çš„! ä¾‹å¦‚: extern int a; å‡½æ•°åæ˜¯å†…å­˜åœ°å€ å¤´æ–‡ä»¶å’Œæºæ–‡ä»¶ å¤šä¸ªæºç å…±ç”¨ä¸€ä¸ªå…¨å±€å˜é‡ åœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜å¤šä¸ªæºæ–‡ä»¶ä¸­è¦å…±ç”¨çš„å…¨å±€å˜é‡ å¯Ÿ æ¯”å¦‚ extern int verId; è‡³äºverldçš„å®šä¹‰ä½ å¯ä»¥æ”¾åˆ°ä»»ä½•æºæ–‡ä»¶ä¸­,ä½†æ˜¯ä¸å¯ä»¥æ”¾åˆ°å¤´æ–‡ä»¶ä¸­,å› ä¸ºè¿™æ ·å°±è¿èƒŒäº†ä¹ä¸ªäº‹ç‰©åªèƒ½å®šä¹‰ä¸€æ¬¡çš„åŸåˆ™! 123456#pragma onceæ”¾åœ¨å¤´æ–‡ä»¶ä¸­çš„ç¬¬ä¸€è¡Œ,å¯ä»¥é˜²æ­¢å¤´æ–‡ä»¶è¢«å¤šæ¬¡è°ƒç”¨#ifndef#define#endif åˆ›å»ºè‡ªå·±çš„SDK 12345678#incldue &quot;&quot;#define VERSION &quot;1.0&quot;int xx() &#123; &#125;namespace my_sdk&#123; const char* Getversion() &#123; &#125; ...&#125; æ­¥éª¤:(vsç¯å¢ƒ) åšæˆé™æ€åº“ å³é”®å±æ€§-&gt;é…ç½®ç±»å‹.é™æ€åº“ .lib-&gt;å³é”®å±æ€§ . ç”Ÿæˆ-&gt;æ‰“å¼€æ–‡ä»¶å¤¹ åº“åšå¥½äº† .lib ä½¿ç”¨æ—¶: å³é”®å±æ€§-&gt;åŒ…å«ç›®å½• æ”¾å…¥è‡ªå·±çš„lib-&gt;åº“ç›®å½• åŠ å…¥è‡ªå·±çš„.hç›®å½•-&gt; å‡ ç§æ–¹æ³•: 1: #pragma comment(lib,&quot;xxx.lib&quot;) 2: å³é”®å±æ€§-&gt;é“¾æ¥å™¨-&gt;è¾“å…¥-&gt;é™„åŠ ä¾èµ–é¡¹(åº“ç›®å½•éœ€è¦æœ‰) åˆ›å»ºé¡¹ç›®ç±»å‹ 1234567891011121314151617181920212223242526272829```### å‡½æ•°è°ƒç”¨çº¦å®šå‡½æ•°è°ƒç”¨çº¦å®šæ˜¯å‡½æ•°è°ƒç”¨ä¸è¢«è°ƒç”¨è€…ä¹‹é—´çš„ä¸€ç§åè®®,è¿™ä¸ªåè®®ä¸»è¦è§„å®šäº†ä»¥ä¸‹ä¸¤ä¸ªå†…å®¹:`å¦‚ä½•ä¼ é€’å‚æ•°` `å¦‚ä½•æ¢å¤æ ˆå¹³è¡¡````c++å‡½æ•°è°ƒç”¨çº¦å®š_cdecl:__cdeclå‚æ•°å…¥æ ˆé¡ºåºä»å³åˆ°å·¦å †æ ˆå¹³è¡¡:è°è°ƒç”¨è°å¹³è¡¡æ­£å› ä¸º__cdeclè¿™ç§å †æ ˆå¹³è¡¡æ–¹å¼,èƒ½å¤Ÿæ”¯æŒä¸å®šé‡å‚æ•°å‡½æ•°è°ƒç”¨çº¦å®š_stdcall___stdcallå‚æ•°å…¥æ ˆé¡ºåºä»å³åˆ°å·¦æ¬¡å †æ ˆä¹è¡¡:å‡½æ•°è‡ªå·±æ¢å¤æ ˆå¹³è¡¡Windowsç¼–ç¨‹ä¸­WINAPICA1LBACKéƒ½æ˜¯__stdcallçš„å®ç”Ÿæˆçš„å‡½æ•°åä¼šåŠ ä¸‹åˆ’çº¿,åé¢è·Ÿ@å’Œå‚æ•°å°ºå¯¸int _stdcallave(int a, int b)å‡½æ•°è°ƒç”¨çº¦å®š__fastcallç¬¬ä¸€ä¸ªå‚æ•°é€šè¿‡ecsä¼ é€’ç¬¬äºŒä¸ªå‚æ•°é€šè¿‡edxä¼ é€’å‰©ä½™å‚æ•°å…¥æ ˆé¡ºåºä»å³åˆ°å·¦å †æ ˆä¹è¡¡:å‡½æ•°è‡ªå·±æ¢å¤æ ˆå¹³è¡¡fastcallçš„å‡½æ•°æ‰§è¡Œé€Ÿåº¦æ¯”è¾ƒå¿«_thiscall ç”¨ä½œC++ä¸­ç±»çš„è®¿é—®,æˆ‘ä»¬å°†åœ¨ç±»çš„åº•å±‚æ—¶è®²è¿™ç§callnaked callæ˜¯ä¸€ä¸ªä¸å¸¸ç”¨çš„è°ƒç”¨çº¦å®š,ä¸€èˆ¬ç”¨äºå®æ¨¡å¼é©±åŠ¨å¼€å‘ é€’å½’å‡½æ•° å¥—å¨ƒ&gt;&gt;&gt; aè°ƒç”¨b,bè°ƒç”¨aç§°ä¸ºäº’é€’å½’å‡½æ•° é€’å½’ä¼šé€ æˆæ ˆæº¢å‡º å†…è”å‡½æ•°ä¸èƒ½é€’å½’ ç¼–è¯‘å™¨ ç†è®º è½¬æ¢å•å…ƒ æˆ‘ä»¬å†™å¥½çš„æ¯ä¸ªæºæ–‡ä»¶(.cpp,.c)å°†å…¶æ‰€åŒ…å«çš„å¤´æ–‡ä»¶(#include &lt;xxx.h&gt;)åˆå¹¶å,ç§°ä¸ºä¸€ä¸ªè½¬æ¢å•å…ƒ; ç¼–è¯‘å™¨å•ç‹¬çš„å°†æ¯ä¸€ä¸ªè½¬æ¢å•å…ƒç”Ÿæˆä¸ºå¯¹åº”çš„å¯¹è±¡æ–‡ä»¶(.obj),å¯¹è±¡æ–‡ä»¶åŒ…å«äº†è½¬æ¢å•å…ƒçš„æœºå™¨ç å’Œè½¬æ¢å•å…ƒçš„å¼•ç”¨ä¿¡æ¯(ä¸åœ¨è½¬æ¢å•å…ƒä¸­å®šä¹‰çš„å¯¹è±¡); æœ€åé“¾æ¥å™¨å°†å„ä¸ªè½¬æ¢å•å…ƒçš„å¯¹è±¡æ–‡ä»¶é“¾æ¥èµ·æ¥,ç”Ÿæˆæˆ‘ä»¬çš„ç›®æ ‡ç¨‹åº; æ¯”å¦‚åœ¨å¯¹è±¡æ–‡ä»¶Aä¸­åŒ…å«äº†å®šä¹‰åœ¨å…¶ä»–è½¬æ¢å•å…ƒçš„å¼•ç”¨,é‚£ä¹ˆå°±å»å…¶ä»–è½¬æ¢å•å…ƒçš„å¯¹è±¡æ–‡ä»¶ä¸­å¯»æ‰¾è¿™ä¸ªå¼•ç”¨çš„å®šä¹‰æ¥å»ºç«‹é“¾æ¥,å¦‚æœåœ¨æ‰€æœ‰çš„å¯¹è±¡æ–‡ä»¶ä¸­éƒ½æ‰¾ä¸åˆ°è¿™ä¸ªå®šä¹‰,é‚£ä¹ˆå°±ä¼šç”Ÿæˆä¸€ä¸ªé“¾æ¥é”™è¯¯. æœªå®šä¹‰è¡Œä¸º å³æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç ä¸­,Cæ ‡å‡†æœªä½œè§„å®šçš„è¡Œä¸º,ç§°ä¸ºæœªå®šä¹‰è¡Œä¸º,æœªå®šä¹‰è¡Œä¸ºçš„ç»“æœæ˜¯ä¸ç¡®å®šçš„,å…·ä½“åœ¨ä¸åŒçš„ç¼–è¯‘å™¨ä¸‹ä¼šæœ‰ä¸å‘çš„æ•ˆæœ; æ¯”å¦‚ c=2*a++ + ++a*6; è¿™é‡Œå…ˆç®—aè¿˜æ˜¯å…ˆç®—++aå°±æ˜¯ä¸€ä¸ªæœªå®šä¹‰è¡Œä¸º æ¯”å¦‚: int x=-25602;Ã—=x&gt;2; xçš„ç»“æœåœ¨ä¸åŒçš„ç¼–è¯‘å™¨ä¸‹æ˜¯ä¸ç¡®å®šçš„,å› ä¸ºè¿™ä¹Ÿå±äºæœªå®šä¹‰è¡Œä¸º One Definition Rule å•ä¸€æ€§è§„åˆ™ ODRæ˜¯ä¸€ç³»åˆ—è§„åˆ™,è€Œä¸æ˜¯ä¸€ä¸ªè§„åˆ™,ç¨‹åºä¸­å®šä¹‰çš„æ¯ä¸ªå¯¹è±¡éƒ½å¯¹åº”ç€è‡ªå·±çš„è§„åˆ™; ä½†æ˜¯åŸºæœ¬ä¸Šæ¥è®²ä»»ä½•çš„å˜é‡,å‡½æ•°,ç±»,æšä¸¾,æ¨¡æ¿,æ¦‚å¿µ(C20)åœ¨æ¯ä¸ªè½¬æ¢å•å…ƒä¸­éƒ½åªå…è®¸æœ‰ä¸€ä¸ªå®šä¹‰;éinlineçš„å‡½æ•°æˆ–å˜é‡(C17),åœ¨æ•´ä¸ªç¨‹åºä¸­,æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå®šä¹‰; æ€»ç»“: æœ‰å¤šä¸ªå£°æ˜ , åªèƒ½æœ‰ä¸€ä¸ªå®šä¹‰ åç§°çš„é“¾æ¥å±æ€§ ç¨‹åºä¸­çš„å˜é‡,å‡½æ•°,ç»“æ„ç­‰éƒ½æœ‰ç€è‡ªå·±çš„åå­—,è¿™äº›åå­—å…·æœ‰ä¸åŒçš„é“¾æ¥å±æ€§,é“¾æ¥å™¨å°±æ˜¯æ ¹æ®è¿™äº›é“¾æ¥å±æ€§æ¥æŠŠå„ä¸ªå¯¹è±¡æ–‡ä»¶é“¾æ¥èµ·æ¥çš„; é“¾æ¥å±æ€§åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§: å†…éƒ¨é“¾æ¥å±æ€§:è¯¥åç§°ä»…ä»…åœ¨æœ¬è½¬æ¢å•å…ƒä¸­æœ‰æ•ˆ å¤–éƒ¨é“¾æ¥å±æ€§:è¯¥åç§°åœ¨å…¶ä»–çš„è½¬æ¢å•å…ƒä¸­ä¹Ÿæœ‰æ•ˆ æ— é“¾æ¥å±æ€§:è¯¥åç§°ä»…ä»…èƒ½å¤Ÿç”¨äºè¯¥åç§°çš„ä½œç”¨åŸŸå†…è®¿é—® define 1234567891011121314151617181920212223#define A Bå°†æ ‡è¯†ç¬¦Aå®šä¹‰ä¸ºBçš„åˆ«å#defineæ•´æ•°intæ•´æ•°a&#123;&#125;;å–æ¶ˆå®šä¹‰ï¼š #undef å®šä¹‰å¤æ‚è¡¨è¾¾å¼çš„å®ï¼š#define SUM(X,Y) X+Y#define AVE(X,Y) (X+Y)/2#define BIGGER(X,Y) ((X)&gt;(Y)?(X):(Y))SUM(100,200)AVE(100,200)BIGGER(100,200)#å¯ä»¥å°†ä¸€ä¸ªæ ‡è¯†ç¬¦å‚æ•°å­—ç¬¦ä¸²åŒ–#define SHOW(X) std:cout&lt;&lt;#X //å­—ç¬¦ä¸²SHOW(1234fg);=&gt;std:cout&lt;&lt;&quot;12345fg&quot;##å¯ä»¥è¿æ¥ä¸¤ä¸ªæ ‡è¯†ç¬¦#define T1(X,Y) void X##Y()&#123;std:cout&lt;&lt;#Y;&#125; //è¿æ¥å­—ç¬¦ä¸² ä½¿ç”¨#define çš„æ–¹å¼å®šä¹‰å¸¸é‡å¹¶ä¸å®‰å…¨. namespace æœ‰æ—¶å€™ä¸ºäº†æ–¹ä¾¿ç®¡ç†,æŠŠç›¸å…³çš„å‡½æ•°,å˜é‡,ç»“æ„ä½“ç­‰ä¼šé™„åŠ åˆ°ä¸€ä¸ªå‘½åç©ºé—´ä¸­ namespace t &#123;int value;&#125; è®¿é—®è¿™ä¸ªå‘½åç©ºé—´çš„å˜é‡ t:value æ‰€æœ‰å…·æœ‰é“¾æ¥å±æ€§çš„å¯¹è±¡,åªè¦æ²¡æœ‰å®šä¹‰å‘½åç©ºé—´,å°±é»˜è®¤å®šä¹‰åœ¨å…¨å±€å‘½åç©ºé—´ä¸­,å…¨å±€å‘½åç©ºé—´ä¸­æˆå‘˜çš„è®¿é—®ä¸ç”¨æ˜¾ç¤ºçš„æŒ‡å®š,å½“å±€éƒ¨åç§°è¦†ç›–äº†å…¨å±€åç§°æ—¶æ‰éœ€è¦æ˜¾å¼çš„æŒ‡å®šå…¨å±€å‘½åç©ºé—´; int a; ::a=250 1234567891011121314151617181920212223242526272829303132333435363738394041424344//å…¨å±€å‘½åç©ºé—´çš„æ‰©å±•namespace htd&#123;int weight &#123;1980&#125;;&#125;namespace htd&#123;int height&#123;1080&#125;;&#125;ç¬¬äºŒä¸ªhtdå±äºå¯¹htdå‘½åç©ºé—´çš„æ‰©å±•,weightå’ŒheightåŒå±ä¸€ä¸ªå‘½åç©ºé—´//å‘½åç©ºé—´æ‹“å±•namespace htdvoid sendSms() &#123;&#125;void htd:sendSms() &#123;&#125;//å‘½åç©ºé—´çš„åµŒå¥—namespace htd&#123; void sendSms(); namespace hack &#123; void hackServer(); &#125;&#125;void htd::hack::hackServer() &#123;&#125;void htd::sendSms() &#123;&#125;//æœªå‘½åç©ºé—´ä¸ç»™å‘½åç©ºé—´æŒ‡å®šåç§°,å°†ä¼šå£°æ˜ä¸€ä¸ªæœªå‘½åçš„å‘½åç©ºé—´namespace &#123;&#125;æœªå‘½åçš„å‘½åç©ºé—´ä¸­å£°æ˜çš„å†…å®¹ä¸€å¾‹ä¸ºå†…éƒ¨é“¾æ¥å±æ€§,åŒ…æ‹¬ç”¨externå£°æ˜çš„å†…å®¹,æœªå‘½åçš„å‘½åç©ºé—´ä»…ä»…åœ¨æœ¬è½¬æ¢å•å…ƒä¸­æœ‰æ•ˆ//å‘½åç©ºé—´çš„åˆ«ånamespace htd&#123; void sendSms(); namespace hack&#123; void hackServer(); &#125;&#125;namespace hServer=htd::hack;hSever:hackServer(); é¢„å¤„ç†é€»è¾‘æŒ‡ä»¤ #ifndef #if #elif é¢„å®šä¹‰å® 123456//æ ‡å‡†é¢„å®šä¹‰å®__func__ç¼–è¯‘å™¨æ”¯æŒISO C99å’ŒISO C++11æŒ‡å®šçš„é¢„å®šä¹‰æ ‡è¯†ç¬¦å‡½æ•°çš„åç§° //ä¸‹é¢æ˜¯å¾®è½¯å…¬å¸åšçš„å® è°ƒè¯• ä¸ºäº†æ–¹ä¾¿è°ƒè¯•,åœ¨ç¼–ç é£æ ¼ä¸Š: 1 æ¨¡å—åŒ– 2 ä½¿ç”¨èƒ½å¤Ÿä½“ç°å‡ºå…·ä½“æ„ä¹‰çš„å‡½æ•°åå’Œå˜é‡å 3 ä½¿ç”¨æ­£ç¡®çš„ç¼©è¿›å’Œä»£ç å— 4 è‰¯å¥½çš„æ³¨é‡Šä¹ æƒ¯ 1è¡¥å……ã€‚ã€‚ã€‚ assertè°ƒè¯• ï¼ˆæ–­è¨€ï¼‰ è¯­æ³•: assert(boolè¡¨è¾¾å¼); å¦‚æœæ‹¬å·å†…çš„boolè¡¨è¾¾å¼ä¸ºfalse åˆ™ä¼šè°ƒç”¨std:abort()å‡½æ•° å¼¹å‡ºå¯¹è¯æ¡† assertå®éœ€è¦å¤´æ–‡ä»¶ cassert å¯ä»¥é€šè¿‡ #define NDEBUG å…³é—­ è¦æ”¾åœ¨includeå‰ static_assertç”¨äºç¼–è¯‘æ—¶æ£€æŸ¥æ¡ä»¶ static_assert(boolè¡¨è¾¾å¼,â€œé”™è¯¯ä¿¡æ¯â€); C++17æ–°è¯­æ³•ï¼š static_assert(boolè¡¨è¾¾å¼); ä¸assertä¸åŒ,static_assertä¸»è¦æ˜¯ç”¨æ¥åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥é‡è¦çš„æ¡ä»¶ å› æ­¤æ£€æŸ¥çš„boolè¡¨è¾¾å¼ä¸­,åªèƒ½ç”¨äºå¸¸é‡ STL STLä»‹ç» ç±» OOP 00P(Object Oriented Programming)å³é¢å‘å¯¹è±¡ç¼–ç¨‹,æœ¬è´¨ä¸Šæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³,é€šè¿‡æŠŠæˆ‘ä»¬ç¼–ç¨‹ä¸­é‡åˆ°çš„äº‹ç‰©æ¥æŠ½è±¡æˆå¯¹è±¡æ¥ç¼–ç¨‹;ä¸OOPç›¸å…³çš„è¿˜æœ‰OOD(é¢å‘å¯¹è±¡è®¾è®¡),00A(é¢å‘å¯¹åˆ†æ)ç­‰; OOPåº”å½“éµå¾ªOODçš„åŸåˆ™,æ‰€æœ‰åçš„OOPä»£ç åŸºæœ¬éƒ½æ˜¯è¿åäº†OODåŸåˆ™ SOLIDåŸåˆ™ { å¾…ç™¾åº¦ } é¢å‘å¯¹è±¡çš„ç‰¹ç‚¹ å°è£…ï¼š ç»§æ‰¿ï¼š å¤šæ€ï¼š å®šä¹‰ç±» 1234class&#123; private://å½±å“åé¢å‡ºç°çš„å†…å®¹ åªèƒ½ç±»ä¸­ä½¿ç”¨ public://å…¬å¼€&#125; æˆå‘˜å‡½æ•° 123456789101112131415161718192021class ROLE&#123; private: int hpRecover;-&gt;&gt;æˆå‘˜å˜é‡ void Init() -&gt;&gt;æˆå‘˜å‡½æ•° &#123; hpRecover=3; &#125; public: int hp;-&gt;&gt;æˆå‘˜å˜é‡ int damage; -&gt;&gt;æˆå‘˜å˜é‡ void Act(ROLE&amp; role)-&gt;&gt;æˆå‘˜å‡½æ•° &#123; role.hp-=damage; &#125; void Act(ROLE&amp; role);//å¤–éƒ¨å®šä¹‰åéœ€è¦å®šä¹‰æˆè¿™æ ·&#125;;//åœ¨ç±»çš„å¤–éƒ¨å®šä¹‰æˆå‘˜å‡½æ•°void ROLE::Act()&#123;...&#125; ç©ºclassé»˜è®¤ä¸€ä¸ªå†…å­˜ç©ºé—´ inlineæˆå‘˜å‡½æ•°ï¼š ï¼ˆæ¨èå†™åœ¨å¤´æ–‡ä»¶é‡Œï¼‰ thisæŒ‡é’ˆ æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆ ï¼Œ ä»£è¡¨å®šä¹‰çš„æˆå‘˜æœ¬èº« const 1234567891011class Rolepublic:int hp;int GetHP() const ;&#123;&#125;int Role::GetHP() const&#123;return hp;&#125;//constå¯¹è±¡åªèƒ½è°ƒç”¨constæˆå‘˜å‡½æ•° constå¯¹è±¡ä¸èƒ½ä»¥ä»»ä½•æ–¹å¼æ”¹å˜,è¿™æ˜¯constçš„åŸåˆ™,åœ¨è¿™ä¸ªåŸºæœ¬åŸåˆ™ä¸‹,äº§ç”Ÿäº†ä¸€äº›åˆ—æ•ˆåº”,æ¯”å¦‚constå¯¹è±¡åªèƒ½è°ƒç”¨constæˆå‘˜å‡½æ•°; constå¯¹è±¡æ— æ³•è°ƒç”¨åˆ«çš„æˆå‘˜ å¦å¤–ä¸€ä¸ªæˆ‘ä»¬ä¸æ³¨æ„çš„å˜åŒ–æ˜¯,åœ¨constæˆå‘˜å‡½æ•°ä¸‹,thisæŒ‡é’ˆä¹Ÿå˜æˆäº†constæŒ‡é’ˆ constç±»å‹è½¬æ¢ mutable mutableå£°æ˜çš„æˆå‘˜å˜é‡å¯ä»¥è¢«constæˆå‘˜å‡½æ•°ä¿®æ”¹ 1234567891011121314class Role&#123;private: int hp; mutable int getHPCount;public: int GetHP0 const ; &#125;int Role:GetHP0 const&#123;getHPCont++;return hp;&#125; æ„é€ å‡½æ•° åœ¨ç±»çš„å®šä¹‰ä¸­æœ‰ä¸€ç§ç‰¹æ®Šçš„æˆå‘˜å‡½æ•°å«åšæ„é€ å‡½æ•°.æ„é€ å‡½æ•°åœ¨ç±»è¢«åˆ›å»ºæ—¶è‡ªåŠ¨è¢«è°ƒç”¨,ä¸€èˆ¬ç”¨æ¥åˆ›å»ºæ–°çš„ç±»å®ä¾‹æ—¶æ‰§è¡Œåˆå§‹åŒ–æ“ä½œæ„é€ å‡½æ•°ä¸å®ƒæ‰€åœ¨çš„ç±»åŒå,å¹¶ä¸”æ²¡æœ‰è¿”å›å€¼,ä»»ä½•ç±»éƒ½è‡³å°‘æœ‰ä¸€ä¸ªæ„é€ å‡½æ•°; 1234567891011121314151617181920class ROLE&#123;private: int hpRecover; void lnit0 &#123; hpRecover=3; &#125;public: ROLE() &#123; Init(); &#125; int hp; int damage; void Act(ROLE&amp; role)&#123; role.hp-=damage; &#125;);//è·Ÿjavaä¸€æ · ï¼Œ æ„é€ å‡½æ•°å’Œç±»åŒåå¦‚æœä»€ä¹ˆéƒ½ä¸åš æ¨èRole() = default; explicitå…³é”®å­— è¢«explicitå…³é”®å­—ä¿®é¥°çš„æ„é€ å‡½æ•°ä¼šç¦ç”¨ç±»å‹è½¬æ¢ æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ 12ROLE(int _lv,int _damage):lv&#123;_lv&#125;, damage&#123;_damage&#125;&#123;&#125; åˆå§‹åŒ–æ—¶ï¼Œåˆå§‹åŒ–å¯ä»¥è¿™æ ·å†™å¿«é€Ÿåˆå§‹åŒ– æ•ˆç‡æ›´é«˜ï¼Œæœ‰æ—¶å€™åªèƒ½è¿™æ ·å»åˆå§‹åŒ– ä½¿ç”¨æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨è¿™æ ·çš„æ–¹å¼æ„é€ ç±»,è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜,å³ä¸ºæˆå‘˜èµ‹å€¼çš„é¡ºåºä¸æ˜¯ä¾æ®ä»£ç çš„é¡ºåº,è€Œæ˜¯æˆå‘˜å˜é‡åœ¨ç±»çš„å‡ºç°é¡ºåº; å§”æ‰˜æ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨é‡Œä¸èƒ½åˆå§‹åŒ–æˆå‘˜å˜é‡ä¸”åªèƒ½è°ƒç”¨ä¸€æ¬¡åŒä¸€ä¸ªç±»çš„æ„é€ å‡½æ•° ROLE(int _lv,int xx):ROLE(_lv) è¿™ç§æ˜¯å§”æ‰˜æ„é€ ï¼Œå…³äºlvçš„éƒ½åœ¨ROLEè¿™ä¸ªæ„é€ å‡½æ•°é‡Œ å‰¯æœ¬æ„é€ å‡½æ•° ç¼–è¯‘å™¨ä¸ºç±»æŒ‡å®šäº†ä¸€ä¸ªé»˜è®¤çš„å‰¯æœ¬æ„é€ å‡½æ•°,æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šå‰¯æœ¬æ„é€ å‡½æ•° Role role1; Role role2(role1); ææ„å‡½æ•° åœ¨ç±»ä¸­è¿˜æœ‰ä¸€ç§ç‰¹æ®Šçš„æˆå‘˜å‡½æ•°,å«åšææ„å‡½æ•°,ææ„å‡½æ•°åœ¨ç±»çš„ç”Ÿå‘½å‘¨ç»“æŸæ—¶,è¢«è‡ªåŠ¨è°ƒç”¨,ä¸€èˆ¬ç”¨æ¥åš æ‰«å°¾å·¥ä½œ æ¯”å¦‚é‡Šæ”¾å†…å­˜,å…³é—­å¥æŸ„ç­‰ç­‰,å¦‚æœä¸€ä¸ªç±»æ²¡æœ‰å®šä¹‰ææ„å‡½æ•°,é‚£ä¹ˆç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ·»åŠ ä¸€ä¸ªç©ºçš„ææ„å‡½æ•°,ææ„å‡½æ•°åªèƒ½æœ‰ä¸€ä¸ª; ææ„å‡½æ•°æ²¡æœ‰å‚æ•°,æ²¡æœ‰è¿”å›ç±»å‹,ä¸€èˆ¬ä¸ä¼šæ‰‹åŠ¨è°ƒç”¨,å¦‚æœç±»çš„ææ„å‡½æ•°ä¸ºç©º,æœ€å¥½ä½¿ç”¨å…³é”®å­—defaultæ¥å®šä¹‰,ä¾‹å¦‚: ~ROLE()=default; é™æ€æˆå‘˜å˜é‡ æˆ‘ä»¬å¯ä»¥åœ¨ç±»ä¸­é€šè¿‡staticå…³é”®å­—å£°æ˜ä¸€ä¸ªç±»çš„é™æ€æˆå‘˜å˜é‡,ç±»çš„é™æ€æˆå‘˜å˜é‡çš„ç‰¹ç‚¹: 1 æ‰€æœ‰ç±»çš„å®ä¾‹ä¸­,å…±äº«ç±»ä¸­çš„é™æ€æˆå‘˜å˜é‡ 2 ç±»çš„é™æ€æˆå‘˜å˜é‡åœ¨æ²¡æœ‰ç±»çš„å®ä¾‹çš„æƒ…å†µä¸‹,ä¾ç„¶å¯ä»¥è®¿é—® 3 ç±»çš„é™æ€æˆå‘˜å˜é‡å¹¶ä¸å®Œå…¨å±äºç±» å†…å­˜ç©ºé—´ä¸å±äºç±» å®ä¾‹ç±»ä¸ç®¡å¤šå°‘ä¸ªï¼Œstaticéƒ½ä¸å˜ï¼Œè¢«æ‰€æœ‰å®ä¾‹å…±äº«ä¸€ä¸ªå†…å­˜ç©ºé—´ c++17å å¯ä»¥ inline static int count&#123;20&#125; æ¥å®šä¹‰ const static int count&#123;20&#125; é™æ€æˆå‘˜å‡½æ•° æˆ‘ä»¬å¯ä»¥åˆ©ç”¨staticå…³é”®å­—å£°æ˜ä¸€ä¸ªç±»çš„é™æ€æˆå‘˜å‡½æ•°,ç±»çš„é™æ€æˆå‘˜å‡½æ•°æœ‰å¦‚ä¸‹ç‰¹ç‚¹: (1)ä¸ç®¡æœ‰æ²¡æœ‰åˆ›å»ºç±»çš„å®ä¾‹,éƒ½å¯ä»¥è®¿é—®ç±»çš„é™æ€æˆå‘˜å‡½æ•° (2ç±»çš„é™æ€æˆå‘˜å‡½æ•°ä¸èƒ½è®¿é—®éé™æ€çš„æˆå‘˜å˜é‡ (3)ç±»çš„é™æ€æˆå‘˜å‡½æ•°ä¸èƒ½æ˜¯const (4)ç±»çš„é™æ€æˆå‘˜å‡½æ•°ä¸èƒ½ä½¿ç”¨thisæŒ‡é’ˆ å‹å…ƒ 12345678910111213å¯ä»¥é€šè¿‡friendå…³é”®å­—å£°æ˜ä¸€ä¸ªå‡½æ•°ä¸ºæŸä¸ªç±»çš„å‹å…ƒå‡½æ•°,å‹å…ƒå‡½æ•°å¯ä»¥è®¿é—®è¯¥ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜class T&#123; int hp; void ResetHP(); friend void SetHP(T&amp; t);&#125;void SetHP(T&amp; t)&#123; t.ResetHP(); t.hp++;&#125; ä¿©ä¸ªç±»äº¤æœ‹å‹çš„è¯ åœ¨å¦ä¸€ä¸ªç±»ä¸Šé¢å£°æ˜ class ç±»å å³å¯ å‹å…ƒ ä¸å»ºè®®ç”¨ åµŒå¥—ç±» æŠŠä¸€ä¸ªç±»å†™åœ¨ä¸€ä¸ªç±»é‡Œ 12345678910class Role&#123;private: int hp; int mp; class Weapon &#123; int lv; &#125;;æˆ‘ä»¬å¯ä»¥åœ¨ç±»çš„å£°æ˜ä¸­å†å£°æ˜ä¸€ä¸ªç±»,åœ¨ç±»ä¸­å£°æ˜çš„ç±»ç§°ä¸ºåµŒå¥—ç±»,è€Œå£°æ˜åµŒå¥—ç±»çš„ç±»ç§°ä¸ºå¤–å±‚ç±» ä½œç”¨åŸŸ åµŒå¥—ç±»çš„å£°æ˜åœ¨å¤–å±‚ç±»ä¸­,å› æ­¤åµŒå¥—ç±»çš„ä½œç”¨åŸŸå—å¤–å±‚ç±»é™å®š å‡å¦‚è¦åœ¨ç±»å¤–å£°æ˜å¥³ä¸ªWeaponå¯¹è±¡ Role::Weapon mWpon; åµŒå¥—ç±»çš„ä½œç”¨åŸŸå—å°è£…å±æ€§ç®¡è¾–,å³privateå°è£…çš„åµŒå¥—ç±»æ˜¯æ— æ³•åœ¨ç±»å¤–ä½¿ç”¨çš„ åœ¨ç±»å¤–å®šä¹‰åµŒå¥—ç±» class ROLE::Weapen åœ¨å¤–çš„ç±»è¦è¿™ä¹ˆå†™ ã€‚ å‡½æ•°ã€å¯¹è±¡åŒç† å‡½æ•°æŒ‡é’ˆæƒ…å†µï¼š 123456class Weapon;&#125;;class Role::Weapon&#123;Weapon*CreateWeapon();&#125;Role::Weapon* Role::Weapon::CreateWeapon()&#123; return this; &#125; åµŒå¥—ç±»å¯ä»¥è®¿é—®å¤–å±‚ç±»çš„æ‰€æœ‰æˆå‘˜ å¤–å±‚ç±»ä»…èƒ½è®¿é—®åµŒå¥—ç±»çš„å…¬æœ‰æˆå‘˜ å±€éƒ¨ç±» å®šä¹‰åœ¨å‡½æ•°å†…çš„ç±»ç§°ä¸ºå±€éƒ¨ç±» å±€éƒ¨ç±»çš„å®šä¹‰å¿…é¡»å†™åœ¨ç±»å†… å±€éƒ¨ç±»ä¸­ä¸å…è®¸ä½¿ç”¨é™æ€æˆå‘˜å˜é‡ å±€éƒ¨ç±»å¯ä»¥è®¿é—®å…¨å±€å˜é‡ åµŒå¥—ç±»æ¨¡å—åŒ–é—®é¢˜ å¤šæ–‡ä»¶æ—¶ã€‚åµŒå¥—å¤´æ–‡ä»¶ï¼Œç±»å‡ºé”™ æ³¨æ„å¤´æ–‡ä»¶ ç±»çš„æˆå‘˜å‡½æ•°çš„å‡½æ•°æŒ‡é’ˆ ä»åº•å±‚ç†è§£ç±»ï¼ˆé€†å‘ï¼‰ {å¾…è¡¥å……} é‡è½½ è¿ç®—ç¬¦é‡è½½ åœ¨OOPç¼–ç¨‹ä¸­,ä¸‡ç‰©çš†å¯¹è±¡,æˆ‘ä»¬å¦‚ä½•è®©è¿™äº›å¯¹è±¡ä¹Ÿèƒ½å¤Ÿåƒæ™®é€šç±»å‹ä¸€æ ·å®ç°åŠ å‡ä¹˜é™¤å‘¢?æ¯”å¦‚æˆ‘ä»¬å­¦ä¹ è¿‡çš„std:stringå¯¹è±¡ std:string str=&quot;å¤§å®¶å¥½!&quot;; str=str+â€æ‰æ˜¯çœŸçš„å¥½!&quot;; è¦å®ç°è¿™ä¸ªåŠŸèƒ½æˆ‘ä»¬å°±è¦å¯¹è¿ç®—ç¬¦+é‡æ–°è¿›è¡Œè®¾è®¡,å½“æˆ‘ä»¬çš„å¯¹è±¡è¿›è¡Œ+è¿ç®—æ—¶ä¸å†æ˜¯ç¼–è¯‘å™¨é»˜è®¤çš„+é¢„ç®—,è€Œæ˜¯è¿›å…¥æˆ‘ä»¬æŒ‡å®šçš„å‡½æ•°,è¿™ç§é‡æ–°è®¾è®¡è¿ç®—ç¬¦è§„åˆ™çš„æŠ€æœ¯å°±ç§°ä¸ºè¿ç®—ç¬¦é‡è½½! è¯­æ³•:è¿”å›ç±»å‹operatorè¿ç®—ç¬¦0 //ä¾‹å¦‚ bool operator&lt;(const Role&amp; role); éç±»æˆå‘˜å‡½æ•°å®ç°éœ€è¦ä½¿ç”¨å‹å…ƒå®šä¹‰ å³ï¼š man&lt;woman == man.operator&lt;(woman) == man&lt;woman åŸåˆ™å’Œæ—¶æœº æ„ä¹‰ (1ï¼‰è®©ç±»ä¹Ÿæ”¯æŒåŸç”Ÿçš„è¿ç®—æ¯”å¦‚ï¼‹-*/ (2ï¼‰æå‡å¯¹ç¨‹åºçš„æ§åˆ¶æƒæ¯”å¦‚é‡è½½new delete newdelete[ å¤‡æ³¨: è¿ç®—ç¬¦é‡è½½çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†è®©ç›®æ ‡ä»£ç æ›´æ–¹ä¾¿ä½¿ç”¨å’Œç»´æŠ¤ï¼Œè€Œä¸æ˜¯æå‡å¼€å‘æ•ˆç‡ï¼Œé‡è½½è¿ç®—ç¬¦æœªå¿…èƒ½æå‡å¼€å‘æ•ˆç‡ é™åˆ¶ (1)ä¸èƒ½è‡ªåˆ›è¿ç®—ç¬¦æ¯”å¦‚=== ,=&lt;&gt;=åªèƒ½é‡è½½ç°æœ‰è¿ç®—ç¬¦ (2)ä»¥ä¸‹è¿ç®—ç¬¦ä¸èƒ½é‡è½½ (a)å¯¹è±¡è®¿é—®è¿ç®—ç¬¦ï¼ä¾‹å¦‚ user.hp (b)ä½œç”¨åŸŸè§£æè¿ç®—ç¬¦::ä¾‹å¦‚std::cout Â©æ±‚å¤§å°çš„è¿ç®—ç¬¦sizeof ä¾‹å¦‚sizeof(int) (d)æ¡ä»¶è¿ç®—ç¬¦?:ä¾‹å¦‚b=a&gt;c?100:200 (3)ä¸èƒ½ä¿®æ”¹è¿ç®—ç¬¦æœ¬èº«çš„ä¼˜å…ˆçº§,ç›¸å…³æ€§ (4)åœ¨C17åï¼Œä¹Ÿä¸èƒ½ä¿®æ”¹è¿ç®—ç¬¦çš„æ“ä½œæ•°çš„è®¡ç®—é¡ºåºï¼Œåœ¨C17å‰ï¼Œç¼–è¯‘å™¨å¯ä»¥è‡ªç”±é€‰æ‹©å¦‚ä½•è®¡ç®—ï¼ˆæœªå®šä¹‰è¡Œä¸º) (5)é™¤äº†delete/deleteå’Œnew/newå¤–,ä¸èƒ½å¯¹åŸç”Ÿæ•°æ®ç±»å‹çš„å…¶ä»–è¿ç®—ç¬¦è¿›è¡Œé‡è½½ï¼Œæ¯”å¦‚æŠŠcharç±»å‹çš„+å®šä¹‰ä¸º- (6)é™¤äº†newå’Œdeleteä»¥ä¸ºï¼Œå…¶ä»–è¿ç®—ç¬¦çš„arity(è¿ç®—ç¬¦å…³è”çš„æ“ä½œæ•°çš„ä¸ªæ•°æˆ–è€…æ˜¯å…³è”çš„å‚æ•°ï¼‰ä¸€å¾‹ä¸èƒ½ä¿®æ”¹ åŸåˆ™ (1)ä¸è¦æ”¹å˜è¿ç®—ç¬¦æœ¬èº«çš„æ„ä¹‰,æ¯”å¦‚æŠŠåŠ æ³•é‡è½½ä¸ºå‡æ³• (2)ä¸å»ºè®®é‡è½½é€»è¾‘è¿ç®—ç¬¦&amp;&amp; ||,å–å€è¿ç®—ç¬¦&amp; é€—å·è¿ç®—ç¬¦ï¼Œ å¤‡æ³¨:é‡è½½åçš„é€»è¾‘è¿ç®—ç¬¦å°†ä¸ä¼šè¿›è¡ŒçŸ­è·¯æµ‹è¯•ï¼Œåœ¨C17æ ‡å‡†å‰ï¼Œç¼–è¯‘å™¨å¯ä»¥è‡ªç”±å†³å®šå…ˆè®¡ç®—å·¦æ“ä½œæ•°è¿˜æ˜¯å³æ“ä½œæ•°,åœ¨C17åè®¡ç®—çš„é¡ºåºè§„å®šä¸ºå…ˆè®¡ç®—å·¦å†è®¡ç®—å³ è¯­æ³• äºŒå…ƒè¿ç®—ç¬¦çš„é‡è½½ åˆ©ç”¨å…¨å±€å‡½æ•° è¿”å›ç±»å‹ operator è¿ç®—ç¬¦(ç±»å‹ å·¦æ“ä½œæ•°,ç±»å‹ å³æ“ä½œæ•°ï¼‰ åˆ©ç”¨ç±»çš„æˆå‘˜å‡½æ•° è¿”å›ç±»å‹ operator è¿ç®—ç¬¦(ç±»å‹ å³æ“ä½œæ•°) ä¸€å…ƒè¿ç®—ç¬¦çš„é‡è½½ åˆ©ç”¨å…¨å±€å‡½æ•°è¿”å› è¿”å›ç±»å‹ operator è¿ç®—ç¬¦(ç±»å‹ æ“ä½œæ•°) åˆ©ç”¨ç±»çš„æˆå‘˜å‡½æ•° è¿”å›ç±»å‹ operator è¿ç®—ç¬¦() æœ‰çš„è¿ç®—ç¬¦åªèƒ½é‡è½½ä¸ºç±»çš„æˆå‘˜å‡½æ•°,æœ‰äº›è¿ç®—ç¬¦åªèƒ½é‡è½½ä¸ºå…¨å±€å‡½æ•°,æœ‰äº›è¿ç®—ç¬¦æ—¢å¯ä»¥é‡è½½ä¸ºç±»çš„æˆå‘˜å‡½æ•°åˆå¯ä»¥é‡è½½ä¸ºå…¨å±€å‡½æ•°,å¦‚æœä¸€ä¸ªè¿ç®—ç¬¦æ—¢å¯ä»¥é‡è½½ä¸ºæˆå‘˜å‡½æ•°åˆå¯ä»¥é‡è½½ä¸ºå…¨å±€å‡½æ•°,æˆ‘ä»¬ä¸€èˆ¬æ¨èé‡è½½ä¸ºç±»çš„æˆå‘˜å‡½æ•°,å› ä¸ºç±»çš„æˆå‘˜å‡½æ•°å¯ä»¥æ˜¯è™šå‡½æ•°,å•å…¨å±€å‡½æ•°ä¸èƒ½æ˜¯è™šå‡½æ•°,å¦‚æœè¿™ä¸ªè¿ç®—ç¬¦ä¸ä¿®æ”¹å¯¹è±¡,åº”è¯¥å°†è¿™ä¸ªæˆå‘˜å‡½æ•°é™å®šä¸ºconst è¿ç®—ç¬¦é‡è½½çš„å‚æ•°ä¸€èˆ¬å¯ä»¥ä¼ é€’å€¼æˆ–è€…å¼•ç”¨,å¤§éƒ¨åˆ†æƒ…å†µä¸‹,èƒ½å¤Ÿä¼ é€’å¼•ç”¨å°±ä¸è¦ä¼ é€’å€¼,å¯¹äºä¸ä¼šä¿®æ”¹çš„å€¼æœ€å¥½æ˜¯é™å®šä¸ºconst,æŸäº›æ—¶å€™è¦æ“…ç”¨ä½¿ç”¨å³å€¼å¼•ç”¨&amp;&amp;ä½œä¸ºå‚æ•° è¿ç®—ç¬¦é‡è½½çš„è¿”å›å€¼ä¸€èˆ¬æ¥è¯´å¯ä»¥æ˜¯ä»»ä½•ç±»å‹,ä½†æ˜¯å°½é‡è¦ç¬¦åˆè¿ç®—ç¬¦çš„åŸæ„,æ¯”å¦‚æŠŠ&gt;è¿ç®—ç¬¦è¿”å›æŒ‡é’ˆç±»å‹,æŠŠ+è¿”å›boolç±»å‹,éƒ½ä¸æ˜¯å¾ˆå¥½çš„é€‰æ‹© é‡è½½è¿ç®—ç¬¦ {å¾…è¡¥å……} å¾ˆå¤šç¬¦å· é‡è½½ç±»å‹è½¬æ¢ 1 ç±»å‹è½¬æ¢è¿ç®—ç¬¦åªèƒ½é‡è½½ä¸ºç±»çš„æˆå‘˜å‡½æ•° 2 ç±»å‹è½¬æ¢è¿ç®—ç¬¦æ²¡æœ‰è¿”å›å€¼ã€‚å®ƒçš„è¿”å›å€¼ç”±ç±»å‹è½¬æ¢çš„ç±»å‹æ¥å†³å®š 3 è¯­æ³• `` 4 operator ç±»å‹() const {å¾…è¡¥å……} ä»€ä¹ˆæ˜¯éšè¯•ç±»å‹è½¬æ¢ï¼š float x=2 æ­¤æ—¶2æ˜¯intå‹ è¿™æ˜¯å°±æ˜¯éšå¼ç±»å‹è½¬æ¢è½¬æˆfloatå‹ é‡è½½å†…å­˜åˆ†é… 1å¾…è¡¥å…… ç»§æ‰¿ å‡è®¾æœ‰ä¸€ä¸ªç±»animalç°åœ¨æˆ‘ä»¬åŸºäºanimalç±»åˆ›é€ ä¸€ä¸ªæ–°ç±»monkey,é‚£ä¹ˆæˆ‘ä»¬è¯´ç±»animal monkeyç±»çš„åŸºç±»(çˆ¶ç±»),monekyç±»æ˜¯animaç±»çš„æ´¾ç”Ÿç±»(å­ç±»),å­ç±»è‡ªåŠ¨ç»§æ‰¿åŒ…å«äº†çˆ¶ç±»çš„æˆå‘˜å˜é‡ä»¥åŠæˆå‘˜å‡½æ•°! å­ç±»ä¸èƒ½ç»§æ‰¿çˆ¶ç±»çš„æ„é€ å‡½æ•°,ææ„å‡½æ•°,é‡è½½èµ‹å€¼è¿ç®—ç¬¦,è™½ç„¶ä¸èƒ½ç»§æ‰¿,ä½†æ˜¯è¿™äº›å†…å®¹ä¾ç„¶æ˜¯å­˜åœ¨äºçˆ¶ç±»ä¸­çš„ã€‚ å¦‚æœæˆ‘ä»¬ç»§ç»­åŸºäºmonkeyåˆ›é€ ä¸€ä¸ªæ–°ç±»bigMonkey,é‚£ä¹ˆmonkeyæ˜¯bigMonkeyçš„ç›´æ¥åŸºç±»,animalæ˜¯bigMonkeyçš„é—´æ¥åŸºç±» class ç±»å:è®¿é—®å±æ€§[public|private|protected] çˆ¶ç±»åç§° protected: åªæœ‰å­ç±»å’Œå‹å…ƒå¯ä»¥è®¿é—® ä¸æƒ³è¢«åˆ«äººç»§æ‰¿çš„è¯ åé¢åŠ  final ä¿®æ”¹ç»§æ‰¿æˆå‘˜çš„è®¿é—®å±æ€§ å¯ä»¥ç”¨using åŸºç±»å::æˆå‘˜å æ¥ä¿®æ”¹ç»§æ‰¿æ¥çš„æˆå‘˜çš„è®¿é—®å±æ€§ ä½¿ç”¨protetedå’Œprivateè®¿é—®å±æ€§æœ‰å‡ ä¸ªå¥½å¤„ å¯ä»¥æ›´å¥½çš„å°è£…çˆ¶ç±»æˆå‘˜ å¯ä»¥åœ¨å­ç±»ä½œä¸ºåŸºç¡€è¿›è¡Œæ´¾ç”Ÿç±»çš„æ—¶å€™æä¾›ç»§æ‰¿æ§åˆ¶ å°†ä¿æŠ¤å±æ€§ä¸ºprivateçš„çˆ¶ç±»äº§ç”Ÿçš„å­ç±»ä½œä¸ºåŸºç±»çš„æ—¶å€™,æ´¾ç”Ÿç±»ç»§æ‰¿ä½†ä¸èƒ½è®¿é—®æ„å»ºå…¶çˆ¶ç±»çš„åŸºç±»æˆå‘˜ å°†ä¿æŠ¤å±æ€§ä¸ºprotectedçš„çˆ¶ç±»äº§ç”Ÿçš„å­ç±»ä½œä¸ºåŸºç±»çš„æ—¶å€™,æ´¾ç”Ÿç±»ç»§æ‰¿ä¸”å¯ä»¥è®¿é—®å…¶éç§æœ‰æˆå‘˜ ç»§æ‰¿è®¿é—®å±æ€§çš„é€‰æ‹© ä¸€èˆ¬æ¥è¯´,å°½é‡å°„å‡»ç±»çš„æˆå‘˜å˜é‡ä¸ºprivate,å¦‚æœéœ€è¦è®¿é—®è¿™äº›æˆå‘˜å˜é‡,åº”è¯¥æä¾›setterä»¥åŠgetterå‡½æ•° ç»§æ‰¿ä¸­çš„æ„é€ å‡½æ•° æ´¾ç”Ÿç±» æ„é€ é¡ºåº:å…ˆæ„é€ åŸºç±»å†æ„é€ æ´¾ç”Ÿç±» (çˆ¶äº²-&gt;å„¿å­) çˆ¶æœ¬æ„é€ å‡½æ•° ä¸€ä¸ªç”±å¦ä¸€ä¸ªæ¥å¤åˆ¶. æ‰§è¡Œæ—¶å°±ä¸ä¼šè°ƒç”¨åŸæœ¬çš„æ„é€ å‡½æ•°äº† exp: actObject(const actObject&amp; obj) ç»§æ‰¿æ„é€ å‡½æ•° é€šè¿‡ using åŸºç±»::åŸºç±»æ„é€ å‡½æ•° å¯ä»¥ç»§æ‰¿åŸºç±»æ„é€ å‡½æ•°,ä½†æ˜¯é»˜è®¤æ„é€ å‡½æ•°ä¸å‰¯æœ¬æ„é€ å‡½æ•°ä¸ä¼šè¢«ç»§æ‰¿ ç»§æ‰¿ææ„å‡½æ•° å…ˆé‡Šæ”¾æ´¾ç”Ÿç±»,å†é‡Šæ”¾åŸºç±» , ä¸æ„é€ é¡ºåºç›¸å å½“åŸºç±»å’Œæ´¾ç”Ÿç±»çš„æˆå‘˜å‡½æ•°åŒåæ—¶,è¦åˆ†ä¿©ç§æƒ…å†µ: 1 å‡½æ•°åç›¸åŒ,å‚æ•°ä¸åŒ using åŸºç±»::å‡½æ•°å 2 å‡½æ•°åç›¸åŒ,å‚æ•°ç›¸åŒ åŸºç±»::å‡½æ•°å exp: obj.lastObject::lastlastObject::show(); å¤šé‡ç»§æ‰¿ ä¸€ä¸ªç±»å¯ä»¥æ‹¥æœ‰å¤šä¸ªçˆ¶ç±»,å¹¶ä¸”å¯ä»¥ç»§æ‰¿å„ä¸ªçˆ¶ç±»çš„æˆå‘˜ (ä¸æ¨èç”¨) class xx: public x1 , public x2 &#123;&#125;; å¤šé‡ç»§æ‰¿å¸¦æ¥çš„é‡å¤ç»§æ‰¿é—®é¢˜ é—®é¢˜æ—¶ç»§æ‰¿æ¥çš„ä¸œè¥¿é‡å¤ç»§æ‰¿ é¦–å…ˆå¯ä»¥å¼ºåˆ¶æŒ‡å®šè§£å†³âˆš å¦ä¸€æ–¹æ³•: è™šåŸºç±» class xx:public virtual x&#123;&#125;; æ„æ€æ—¶åªå¼•å…¥ä¸€æ¬¡,ç¬¬äºŒæ¬¡ä¸å¼•å…¥ å†…å­˜è§’åº¦ç†è§£ {æ·±å…¥ç†è§£ å¾…è¡¥å……} å¤šæ€ å¯¹è±¡å¤šæ€ exp: äººæ˜¯åŠ¨ç‰©âˆš åŠ¨ç‰©æ˜¯äººÃ— å³ç¬¬ä¸€ä¸ªç¬¬å‘ä¸Šè½¬å‹(çˆ¶ç±»=&gt;å­ç±» çˆ¶ç±»è¡¨è¾¾å­ç±»), ç¬¬äºŒä¸ªæ˜¯å‘ä¸‹è½¬å‹(å­ç±»=&gt;çˆ¶ç±» å­ç±»è¡¨è¾¾çˆ¶ç±») 12345678910111213141516171819class animal&#123;public: int age; &#125;;class people&#123;public: int money;&#125;main()&#123; peole lz; lz.age = 22; lz.monry=1; animal* anm1=&amp;lz; people* humn=(people*)anm1; //ä¸æ¨èè¿™æ ·ç”¨&#125; å†…å­˜åˆ‡ç‰‡ exp: äººç±»è½¬æˆåŠ¨ç‰©ç±»çš„æ—¶å€™, æœ‰äº›ä¸œè¥¿ä¼šä¸¢æ‰(æ¯”å¦‚é’±), è¿™å°±æ˜¯å†…å­˜åˆ‡ç‰‡ å¯¹è±¡å¤šæ€è¯¦è§£ 12345678910111213class moveobj&#123;&#125;;class monstermove:public moveobj&#123;&#125;;monstermove monster;moveobj* _move=&amp;monster;//éšå¼ç±»å‹è½¬æ¢ å‘ä¸Šè½¬å‹monstermove* _pmove=&amp;_move; //éšå¼ å‘ä¸‹è½¬å‹ ä¸å…è®¸! å¯ä»¥å¼ºåˆ¶monstermove* _pmove=(monstermove*)_move;monstermove* _pmove=static_cast&lt;monstermove*&gt;_move; //ä¼šæ£€æµ‹å¾…è¡¥å……... åŠ¨æ€å¼ºåˆ¶è½¬æ¢ åªèƒ½ç”¨äºå¤šæ€ç±» æ–¹æ³•å¤šæ€(å¤šæ€ç±») é™æ€å¤šæ€ â‘ å‡½æ•°é‡è½½ å‡½æ•°(&amp;ç±»å®ä¾‹åŒ–çš„å¯¹è±¡) ä»è€Œåˆ¤æ–­æ‰§è¡Œå“ªä¸€ä¸ªå‡½æ•° â‘¡å‡½æ•°æ¨¡æ¿ åŠ¨æ€å¤šæ€ virtualè™šå‡½æ•° å‘Šè¯‰æ´¾ç”Ÿç±» æˆ‘è¿™ä¸ªå‡½æ•°æ˜¯è™šçš„ ä½ éœ€è¦é‡å†™ virtual æ”¾åœ¨å®šä¹‰å‡½æ•°çš„å‰é¢ ä½¿ç”¨æ¡ä»¶ virtualåªèƒ½å†™åœ¨ç±»çš„å†…éƒ¨å£°æ˜æˆ–è€…å®šä¹‰,ä¸èƒ½æŠŠvirtualå†™åœ¨ç±»çš„å¤–éƒ¨å®šä¹‰ä¸­ è°ƒç”¨ç±»çš„å¯¹è±¡æ˜¯æ— æ³•ä½¿ç”¨è™šå‡½æ•°çš„,å¿…é¡»ä½¿ç”¨åŸºç±»æŒ‡é’ˆæ¥å®ç°è™šå‡½æ•°çš„è°ƒç”¨ è™šå‡½æ•°åœ¨æ´¾ç”Ÿç±»å’ŒåŸºç±»ä¸­å¿…é¡»å…·æœ‰ç›¸åŒçš„åŠå‚æ•°åˆ—è¡¨ è™šå‡½æ•°åœ¨æ´¾ç”Ÿç±»å’ŒåŸºç±»ä¸­è¿”å›å€¼è¦æ±‚åŸºæœ¬ä¸€è‡´,ä½†æ˜¯å½“è¿”å›ç±»å‹ä¸ºç±»ç±»å‹çš„æŒ‡é’ˆå’Œå¼•ç”¨æ—¶é™¤å¤– è™šå‡½æ•°ä¸èƒ½æ˜¯å‡½æ•°æ¨¡æ¿ ç±»å* å‡½æ•°å() override ä»£è¡¨æˆ‘è¿™ä¸ªå‡½æ•°æ˜¯ç»§æ‰¿æ¥çš„ final ä»£è¡¨ä¸å†è¢«ç»§æ‰¿. è™šå‡½æ•°çš„æ‰§è¡Œä¹Ÿæ˜¯éµå¾ªç±»çš„ç”Ÿæˆå’Œé”€æ¯çš„(è‡ªæˆ‘ç†è§£) å¯ä»¥ä½¿ç”¨ åŸºç±»::åŸºç±»å‡½æ•°() å¼ºè¡Œè°ƒç”¨åŸºç±»å‡½æ•° é»˜è®¤å®å‚åœ¨åŸºç±»å·²ç»å®šä¹‰äº†é‚£ä¹ˆæ´¾ç”Ÿç±»çš„ä¿®æ”¹æ˜¯æ— æ•ˆçš„,å³ä½¿æ‰§è¡Œæ´¾ç”Ÿç±»çš„å‡½æ•° å½“ä½ é€šè¿‡åŸºç±»å£°æ˜æ´¾ç”Ÿç±»å¯¹è±¡ åŸºç±»* p=new æ´¾ç”Ÿç±»(); ç„¶åé‡Šæ”¾å†…å­˜è°ƒç”¨ææ„å‡½æ•°çš„æ—¶å€™,è°ƒç”¨çš„æ˜¯åŸºç±»çš„ææ„å‡½æ•°(å› ä¸ºæ´¾ç”Ÿå‡½æ•°ä¸æ˜¯è™šå‡½æ•°,ä½ æ˜¯é€šè¿‡åŸºç±»å£°æ˜çš„å¯¹è±¡) å®¹æ˜“é€ æˆå†…å­˜æ³„æ¼,æ‰€ä»¥éœ€è¦ è¿›è¡Œ è™šææ„å‡½æ•° , å³å¯æ­£å¸¸. æŠ½è±¡ç±» çº¯è™šå‡½æ•° åœ¨å®é™…çš„é¡¹ç›®è®¾è®¡ä¸­,å¯èƒ½å‡ºç°ä¸€ç§æƒ…å†µ,çˆ¶ç±»æœ‰Nä¸ªæ´¾ç”Ÿç±» æ¯”å¦‚Animalç±»æ´¾ç”Ÿå‡ºDogå’ŒCat æ­¤æ—¶æˆ‘ä»¬åœ¨Animalç±»ä¸­æ˜¯æ— æ³•ç¡®å®šMoveå‡½æ•°çš„å†…å®¹çš„,è¿™ä¸ªæ—¶å€™ä¸ºAnimalç±»è®¾è®¡Moveå‡½æ•°çš„å†…å®¹æ˜¯æ— æ„ä¹‰çš„,è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥å°†Moveå‡½æ•°è®¾è®¡ä¸ºçº¯è™šå‡½æ•° void virtual Move(=0; =0å¯ä»¥å°†æŒ‡å®šçš„å‡½æ•°è®¾ç½®ä¸ºçº¯è™šå‡½æ•° ä¸ºä»€ä¹ˆè¦å®šä¹‰æˆçº¯è™šå‡½æ•° ä¸ºäº†åˆ©ç”¨å®ƒçš„å¤šæ€æ€§,å®ç°å¤šæ€ æŠ½è±¡ç±» æœ‰çº¯è™šå‡½æ•°çš„ç±» ä¸èƒ½ç”¨äºå®ä½“ æ‹¥æœ‰çº¯è™šå‡½æ•°çš„ç±»ç§°ä¸ºæŠ½è±¡ç±»,å› ä¸ºè¯¥ç±»çš„å‡½æ•°æ²¡æœ‰å®ç°,å› æ­¤ä¸èƒ½åˆ›å»ºæŠ½è±¡ç±»çš„å®ä¾‹,ä½†æ˜¯å´å¯ä»¥ä½¿ç”¨æŠ½è±¡ç±»çš„æŒ‡é’ˆå’Œå¼•ç”¨ä½œä¸ºè¿”å›æˆ–è€…å‚æ•°! æŠ½è±¡ç±»çš„æ„é€ å‡½æ•°å› ä¸ºä¸èƒ½å®é™…ä½¿ç”¨,æ‰€ä»¥ä¸€èˆ¬æ¨èæŠŠæŠ½è±¡ç±»çš„æ„é€ å‡½æ•°å®šä¹‰ä¸ºprotected æŠ½è±¡ç±»çš„æ´¾ç”Ÿç±»å¦‚æœæ²¡æœ‰å®šä¹‰çº¯è™šå‡½æ•°,åˆ™è¯¥æ´¾ç”Ÿç±»ä¾ç„¶æ˜¯æŠ½è±¡ç±» æ¥å£ç±» ç±»ä¸­æ‰€æœ‰(æå¤§éƒ¨åˆ†)å‡½æ•°å®šä¹‰ä¸ºçº¯è™šå‡½æ•°çš„ç±»æˆä¸ºæ¥å£ç±» è°ƒè¯• typeid(ç±»å‹).name è¾“å‡ºç±»å‹åå­— ä½†æ˜¯å¿…é¡»è¦æœ‰å¤šæ€ æ€»ç»“ c++ çš„åŸºç¡€è¿˜æ˜¯æœ‰äº›æ²¡æœ‰æ€»ç»“å¥½,åé¢è¡¥å……","categories":[{"name":"C/C++","slug":"C-C","permalink":"https://blogs.leechee.top/categories/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://blogs.leechee.top/tags/C-C/"},{"name":"è¯­è¨€","slug":"è¯­è¨€","permalink":"https://blogs.leechee.top/tags/%E8%AF%AD%E8%A8%80/"}]},{"title":"Ubuntu20.04ç¾åŒ–","slug":"Ubuntuç¾åŒ–","date":"2022-02-13T15:21:13.000Z","updated":"2023-01-11T01:58:45.436Z","comments":true,"path":"posts/7eea43f6/","link":"","permalink":"https://blogs.leechee.top/posts/7eea43f6/","excerpt":"","text":"[TOC] ä¸»é¢˜https://www.pling.com/s/Gnome æ‰©å±•https://extensions.gnome.org/ é…ç½® ç™»é™† Ubuntu è´¦å·ï¼Œå¼€å¯ Livepatch åŠŸèƒ½ ç‚¹å‡» Ubuntu Single-On å°±ä¼šå¼¹å‡ºç™»é™†é¡µé¢äº†ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥å…ˆä¸ç™»é™†ï¼Œç›´æ¥ç‚¹å‡»è·³è¿‡ï¼Œåé¢å†ç™»é™†ã€‚ ä¹Ÿå¯ä»¥é€šè¿‡åœ¨å·²å®‰è£…è½¯ä»¶åˆ—è¡¨é‡Œé¢æœç´¢ Software &amp; Updates è½¯ä»¶ï¼Œå¦‚ä¸‹å›¾ï¼Œæ‰“å¼€åç™»é™† Ubuntu è´¦å·ã€‚ è¿™é‡Œæœ‰é—®é¢˜,å…ˆä¸çœ‹ ç¾åŒ– å®‰è£…å¿…è¦è½¯ä»¶ 12345sudo apt install gnome-tweak-toolsudo apt-get install gnome-shell-extensionsåˆ æ‰åŸæ¥çš„ubuntu-dock (emmmm)sudo apt-get autoremove --purge gnome-shell-extension-ubuntu-dock -y ç”¨æµè§ˆå™¨æ‰“å¼€æ‰©å±•æ’ä»¶å•†åº—ï¼Œåœ°å€ï¼šhttps://extensions.gnome.org/ ä¸‹è½½ä¸»é¢˜McMojave https://www.gnome-look.org/p/1275087/ icon theme https://www.gnome-look.org/s/Gnome/p/1348081 è‡ªå·±æ‰¾ ç„¶åè§£å‹æ”¾åœ¨/usr/share/themeså’Œiconsä¸‹é¢ ç„¶ååœ¨gnomeé‡Œé¢ä½¿ç”¨å°±å¯ä»¥","categories":[{"name":"Linux","slug":"Linux","permalink":"https://blogs.leechee.top/categories/Linux/"}],"tags":[{"name":"è®°å½•","slug":"è®°å½•","permalink":"https://blogs.leechee.top/tags/%E8%AE%B0%E5%BD%95/"},{"name":"ubuntu","slug":"ubuntu","permalink":"https://blogs.leechee.top/tags/ubuntu/"}]},{"title":"ROS1","slug":"rosåŸºç¡€","date":"2022-02-05T15:21:13.000Z","updated":"2023-01-11T01:58:22.873Z","comments":true,"path":"posts/f85532d9/","link":"","permalink":"https://blogs.leechee.top/posts/f85532d9/","excerpt":"","text":"[TOC] å°è®° 12345678910111213-å¦‚ä½•ç§»æ¤åˆ«äººçš„å·¥ç¨‹:åœ¨æ ¹ç›®å½• catkin_make å ,ä¼šæŠ¥é”™,ç„¶åä¿®æ”¹çš„åœ°æ–¹åœ¨buildé‡Œ,éœ€è¦æ›´æ”¹Cmake.txtä»¥åŠ Makefile ,å†è¡¥ä¸Šæ‰€éœ€è¦çš„ä¾èµ–,å°±å¯ä»¥äº†å®‰è£…ä¾èµ–:rosdep install --from-paths src --ignore-src --rosdistro=kinetic -y #è‡ªå·±ä¿®æ”¹rosdep install --from-paths ~/catkin_ws/src --ignore-src -r------- NEW 123source /opt/ros/noetic/setup.bashecho &quot;source /opt/ros/noetic/setup.bash&quot; &gt;&gt; ~/.bashrcsource ~/.bashrc å¸¸è§æ“ä½œæŒ‡ä»¤ æŸ¥æ‰¾ï¼š rosc/roscdï¼šåˆ‡æ¢å½“å‰å·¥ä½œç›®å½•åˆ°rosçš„æŸä¸ªç¨‹åºåŒ… roslsï¼šæŒ‰ç¨‹åºåŒ…çš„åç§°æ‰§è¡Œlså‘½ä»¤ catkin_ctreate_pkgï¼šåˆ›å»ºåŠŸèƒ½åŒ… catkin_makeï¼šç¼–è¯‘ROSå·¥ä½œç©ºé—´ï¼Œè¯¥srcç©ºé—´ä¸‹æ‰€æœ‰ç¨‹åºåŒ…ä»¥åŠå…¶å­åŒ…éƒ½ä¼šè¢«ç¼–è¯‘ roscoreï¼šå¯åŠ¨ç®¡ç†å™¨ rosrunï¼šè¿è¡ŒROSç¨‹åºåŒ…ä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶ roslaunchï¼šå¯åŠ¨roscoreï¼Œæœ¬åœ°ç»“ç‚¹å’Œè¿œç¨‹ç»“ç‚¹ï¼Œè®¾ç½®æœåŠ¡å™¨å‚æ•°ï¼ˆsshï¼‰ roslaunch package_name filename.launchï¼šå¯åŠ¨åŒ…ä¸­çš„ä¸€ä¸ªæ–‡ä»¶ rospackï¼šè·å–ç¨‹åºåŒ…æœ‰å…³ä¿¡æ¯ rospack findï¼šè¿”å›ç¨‹åºåŒ…çš„è·¯å¾„ rospack listï¼šè·å–æ‰€æœ‰çš„ç¨‹åºåŒ… rosdepï¼šrosdep install package_name å¯ä»¥ä¸‹è½½å®‰è£…ROS ç¨‹åºåŒ…æ‰€éœ€è¦çš„ç³»ç»Ÿä¾èµ–é¡¹ roswtfï¼šå¯ä»¥æ£€æŸ¥ROSç³»ç»Ÿå¹¶å°è¯•å‘ç°é—®é¢˜ rostopic -hï¼šæŸ¥çœ‹æ‰€æœ‰Topicæ“ä½œ rostopic listï¼šè·å–æ‰€æœ‰çš„Topicåˆ—è¡¨ rosrun rqt_plot rqt_plotï¼šå›¾å½¢åŒ–æ˜¾ç¤ºTopic rostopic echo â€˜topic namaeâ€™ï¼šæŸ¥çœ‹æŸä¸ªTopicçš„ä¿¡æ¯ video 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102catkin_create_pkg usb_cam std_msgs roscpp cv_bridge sensor_msgs image_transport img_publisher.cpp#include &lt;ros/ros.h&gt;#include &lt;image_transport/image_transport.h&gt;#include &lt;opencv2/highgui.hpp&gt;#include &lt;opencv2/calib3d.hpp&gt;#include &lt;cv_bridge/cv_bridge.h&gt;#include &lt;iostream&gt; int main(int argc, char** argv)&#123; ros::init(argc, argv, &quot;img_publisher&quot;); ros::NodeHandle nh; image_transport::ImageTransport it(nh); image_transport::Publisher pub = it.advertise(&quot;camera/image&quot;, 1); cv::VideoCapture cap; cv::Mat frame; int deviceID=0; if(argc&gt;1) deviceID=argv[1][0]-&#x27;0&#x27;; int apiID=cv::CAP_ANY; cap.open(deviceID+apiID); if(!cap.isOpened())&#123; std::cerr&lt;&lt;&quot;ERROR! Unable to open camera&quot;&lt;&lt;std::endl; return -1; &#125; ros::Rate loop_rate(30); while (nh.ok()) &#123; cap.read(frame); if(!frame.empty())&#123; sensor_msgs::ImagePtr msg = cv_bridge::CvImage(std_msgs::Header(), &quot;bgr8&quot;, frame).toImageMsg(); pub.publish(msg); &#125; ros::spinOnce(); loop_rate.sleep(); &#125; return 0;&#125;img_viewer.cpp#include &lt;ros/ros.h&gt;#include &lt;image_transport/image_transport.h&gt;#include &lt;opencv2/highgui/highgui.hpp&gt;#include &lt;cv_bridge/cv_bridge.h&gt; void imageCallback(const sensor_msgs::ImageConstPtr&amp; msg)&#123; try &#123; cv::imshow(&quot;view&quot;, cv_bridge::toCvShare(msg, &quot;bgr8&quot;)-&gt;image); &#125; catch (cv_bridge::Exception&amp; e) &#123; ROS_ERROR(&quot;Could not convert from &#x27;%s&#x27; to &#x27;bgr8&#x27;.&quot;, msg-&gt;encoding.c_str()); &#125;&#125; int main(int argc, char **argv)&#123; ros::init(argc, argv, &quot;img_viewer&quot;); ros::NodeHandle nh; cv::namedWindow(&quot;view&quot;); cv::startWindowThread(); image_transport::ImageTransport it(nh); image_transport::Subscriber sub = it.subscribe(&quot;camera/image&quot;, 1, imageCallback); ros::spin(); cv::destroyWindow(&quot;view&quot;); return 0;&#125;find_package(catkin REQUIRED COMPONENTS cv_bridge image_transport roscpp sensor_msgs std_msgs)find_package(OpenCV REQUIRED) include_directories( $&#123;catkin_INCLUDE_DIRS&#125; $&#123;OpenCV_INCLUDE_DIRS&#125;) add_executable(img_publisher src/img_publisher.cpp)add_executable(img_viewer src/img_viewer.cpp) target_link_libraries(img_publisher $&#123;catkin_LIBRARIES&#125; $&#123;OpenCV_LIBS&#125;)target_link_libraries(img_viewer $&#123;catkin_LIBRARIES&#125; $&#123;OpenCV_LIBS&#125;) &lt;build_depend&gt;opencv2&lt;/build_depend&gt;&lt;build_export_depend&gt;opencv2&lt;/build_export_depend&gt;&lt;exec_depend&gt;opencv2&lt;/exec_depend&gt; https://github.com/thinkexist1989/ROS-Academy-for-Beginners/tree/noetic","categories":[{"name":"Linux","slug":"Linux","permalink":"https://blogs.leechee.top/categories/Linux/"}],"tags":[{"name":"è®°å½•","slug":"è®°å½•","permalink":"https://blogs.leechee.top/tags/%E8%AE%B0%E5%BD%95/"},{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://blogs.leechee.top/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"ROSæœºå™¨äºº","slug":"ROSæœºå™¨äºº","permalink":"https://blogs.leechee.top/tags/ROS%E6%9C%BA%E5%99%A8%E4%BA%BA/"}]},{"title":"C++åŸºç¡€å†å­¦ä¹ ","slug":"Cplusè¡¥å……","date":"2022-02-01T15:21:13.000Z","updated":"2023-01-11T01:24:42.566Z","comments":true,"path":"posts/fd31ca55/","link":"","permalink":"https://blogs.leechee.top/posts/fd31ca55/","excerpt":"","text":"CåŸºç¡€å†å­¦ä¹  PS:ä¹‹å‰å­¦äº†ä¸€ç‚¹,ä¸è¿‡åªåœ¨opencvç®€å•ä½¿ç”¨,ç®—æ³•é¢˜å’Œé¢è¯•é¢˜,åŒ…æ‹¬ROSç­‰,éšç€pythonçš„ä¸æ–­å£®å¤§,pythonä¼¼ä¹æ˜¯æ›´å¥½ç”¨çš„å·¥å…·.ä¸è¿‡Cè¿˜æ˜¯æŒºé‡è¦çš„,å¯¹äºåµŒå…¥å¼é¢†åŸŸè¿˜æ˜¯éœ€è¦çš„. [TOC] æšä¸¾ç±»å‹ æšä¸¾ç±»å‹(enumeration)æ˜¯C++ä¸­çš„ä¸€ç§æ´¾ç”Ÿæ•°æ®ç±»å‹ï¼Œå®ƒæ˜¯ç”±ç”¨æˆ·å®šä¹‰çš„è‹¥å¹²æšä¸¾å¸¸é‡çš„é›†åˆã€‚ å¦‚æœä¸€ä¸ªå˜é‡åªæœ‰å‡ ç§å¯èƒ½çš„å€¼ï¼Œå¯ä»¥å®šä¹‰ä¸ºæšä¸¾(enumeration)ç±»å‹ã€‚æ‰€è°“&quot;æšä¸¾&quot;æ˜¯æŒ‡å°†å˜é‡çš„å€¼ä¸€ä¸€åˆ—ä¸¾å‡ºæ¥ï¼Œå˜é‡çš„å€¼åªèƒ½åœ¨åˆ—ä¸¾å‡ºæ¥çš„å€¼çš„èŒƒå›´å†…ã€‚ åˆ›å»ºæšä¸¾ï¼Œéœ€è¦ä½¿ç”¨å…³é”®å­— enumã€‚æšä¸¾ç±»å‹çš„ä¸€èˆ¬å½¢å¼ä¸ºï¼š 123456enum æšä¸¾å&#123; æ ‡è¯†ç¬¦[=æ•´å‹å¸¸æ•°], æ ‡è¯†ç¬¦[=æ•´å‹å¸¸æ•°], ... æ ‡è¯†ç¬¦[=æ•´å‹å¸¸æ•°]&#125; æšä¸¾å˜é‡; å¦‚æœæšä¸¾æ²¡æœ‰åˆå§‹åŒ–, å³çœæ‰&quot;=æ•´å‹å¸¸æ•°&quot;æ—¶, åˆ™ä»ç¬¬ä¸€ä¸ªæ ‡è¯†ç¬¦å¼€å§‹ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªé¢œè‰²æšä¸¾ï¼Œå˜é‡ c çš„ç±»å‹ä¸º colorã€‚æœ€åï¼Œc è¢«èµ‹å€¼ä¸º â€œblueâ€ã€‚ 12enum color &#123; red, green, blue &#125; c;c = blue; é»˜è®¤æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ä¸ªåç§°çš„å€¼ä¸º 0ï¼Œç¬¬äºŒä¸ªåç§°çš„å€¼ä¸º 1ï¼Œç¬¬ä¸‰ä¸ªåç§°çš„å€¼ä¸º 2ï¼Œä»¥æ­¤ç±»æ¨ã€‚ä½†æ˜¯ï¼Œæ‚¨ä¹Ÿå¯ä»¥ç»™åç§°èµ‹äºˆä¸€ä¸ªç‰¹æ®Šçš„å€¼ï¼Œåªéœ€è¦æ·»åŠ ä¸€ä¸ªåˆå§‹å€¼å³å¯ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„æšä¸¾ä¸­ï¼Œgreen çš„å€¼ä¸º 5ã€‚ enum color &#123; red, green=5, blue &#125;; åœ¨è¿™é‡Œï¼Œblue çš„å€¼ä¸º 6ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªåç§°éƒ½ä¼šæ¯”å®ƒå‰é¢ä¸€ä¸ªåç§°å¤§ 1ï¼Œä½† red çš„å€¼ä¾ç„¶ä¸º 0ã€‚ æ•´æ•°å¸¸é‡ 123456785 // åè¿›åˆ¶0213 // å…«è¿›åˆ¶ 0x4b // åå…­è¿›åˆ¶ 30 // æ•´æ•° 30u // æ— ç¬¦å·æ•´æ•° 30l // é•¿æ•´æ•° 30ul // æ— ç¬¦å·é•¿æ•´æ•° ç±»å‹é™å®šç¬¦ é™å®šç¬¦ å«ä¹‰ const const ç±»å‹çš„å¯¹è±¡åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´ä¸èƒ½è¢«ä¿®æ”¹æ”¹å˜ã€‚ volatile ä¿®é¥°ç¬¦ volatile å‘Šè¯‰ç¼–è¯‘å™¨ä¸éœ€è¦ä¼˜åŒ–volatileå£°æ˜çš„å˜é‡ï¼Œè®©ç¨‹åºå¯ä»¥ç›´æ¥ä»å†…å­˜ä¸­è¯»å–å˜é‡ã€‚å¯¹äºä¸€èˆ¬çš„å˜é‡ç¼–è¯‘å™¨ä¼šå¯¹å˜é‡è¿›è¡Œä¼˜åŒ–ï¼Œå°†å†…å­˜ä¸­çš„å˜é‡å€¼æ”¾åœ¨å¯„å­˜å™¨ä¸­ä»¥åŠ å¿«è¯»å†™æ•ˆç‡ã€‚ restrict ç”± restrict ä¿®é¥°çš„æŒ‡é’ˆæ˜¯å”¯ä¸€ä¸€ç§è®¿é—®å®ƒæ‰€æŒ‡å‘çš„å¯¹è±¡çš„æ–¹å¼ã€‚åªæœ‰ C99 å¢åŠ äº†æ–°çš„ç±»å‹é™å®šç¬¦ restrictã€‚ C++å­˜å‚¨ç±» auto(c++17å¼€å§‹å¼ƒç”¨) è‡ª C++ 11 ä»¥æ¥ï¼Œauto å…³é”®å­—ç”¨äºä¸¤ç§æƒ…å†µï¼šå£°æ˜å˜é‡æ—¶æ ¹æ®åˆå§‹åŒ–è¡¨è¾¾å¼è‡ªåŠ¨æ¨æ–­è¯¥å˜é‡çš„ç±»å‹ã€å£°æ˜å‡½æ•°æ—¶å‡½æ•°è¿”å›å€¼çš„å ä½ç¬¦ã€‚ C98æ ‡å‡†ä¸­autoå…³é”®å­—ç”¨äºè‡ªåŠ¨å˜é‡çš„å£°æ˜ï¼Œä½†ç”±äºä½¿ç”¨æå°‘ä¸”å¤šä½™ï¼Œåœ¨ C17 ä¸­å·²åˆ é™¤è¿™ä¸€ç”¨æ³•ã€‚ æ ¹æ®åˆå§‹åŒ–è¡¨è¾¾å¼è‡ªåŠ¨æ¨æ–­è¢«å£°æ˜çš„å˜é‡çš„ç±»å‹ï¼Œå¦‚ï¼š 1234auto f=3.14; //doubleauto s(&quot;hello&quot;); //const char*auto z = new auto(9); // int*auto x1 = 5, x2 = 5.0, x3=&#x27;r&#x27;;//é”™è¯¯ï¼Œå¿…é¡»æ˜¯åˆå§‹åŒ–ä¸ºåŒä¸€ç±»å‹ register(c++17å¼€å§‹å¼ƒç”¨) register å­˜å‚¨ç±»ç”¨äºå®šä¹‰å­˜å‚¨åœ¨å¯„å­˜å™¨ä¸­è€Œä¸æ˜¯ RAM ä¸­çš„å±€éƒ¨å˜é‡ã€‚è¿™æ„å‘³ç€å˜é‡çš„æœ€å¤§å°ºå¯¸ç­‰äºå¯„å­˜å™¨çš„å¤§å°ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªè¯ï¼‰ï¼Œä¸”ä¸èƒ½å¯¹å®ƒåº”ç”¨ä¸€å…ƒçš„ â€˜&amp;â€™ è¿ç®—ç¬¦ï¼ˆå› ä¸ºå®ƒæ²¡æœ‰å†…å­˜ä½ç½®ï¼‰ã€‚ &#123; register int miles; &#125; å¯„å­˜å™¨åªç”¨äºéœ€è¦å¿«é€Ÿè®¿é—®çš„å˜é‡ï¼Œæ¯”å¦‚è®¡æ•°å™¨ã€‚è¿˜åº”æ³¨æ„çš„æ˜¯ï¼Œå®šä¹‰ â€˜registerâ€™ å¹¶ä¸æ„å‘³ç€å˜é‡å°†è¢«å­˜å‚¨åœ¨å¯„å­˜å™¨ä¸­ï¼Œå®ƒæ„å‘³ç€å˜é‡å¯èƒ½å­˜å‚¨åœ¨å¯„å­˜å™¨ä¸­ï¼Œè¿™å–å†³äºç¡¬ä»¶å’Œå®ç°çš„é™åˆ¶ã€‚ staticå­˜å‚¨ç±» static å­˜å‚¨ç±»æŒ‡ç¤ºç¼–è¯‘å™¨åœ¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸå†…ä¿æŒå±€éƒ¨å˜é‡çš„å­˜åœ¨ï¼Œè€Œä¸éœ€è¦åœ¨æ¯æ¬¡å®ƒè¿›å…¥å’Œç¦»å¼€ä½œç”¨åŸŸæ—¶è¿›è¡Œåˆ›å»ºå’Œé”€æ¯ã€‚å› æ­¤ï¼Œä½¿ç”¨ static ä¿®é¥°å±€éƒ¨å˜é‡å¯ä»¥åœ¨å‡½æ•°è°ƒç”¨ä¹‹é—´ä¿æŒå±€éƒ¨å˜é‡çš„å€¼ã€‚ static ä¿®é¥°ç¬¦ä¹Ÿå¯ä»¥åº”ç”¨äºå…¨å±€å˜é‡ã€‚å½“ static ä¿®é¥°å…¨å±€å˜é‡æ—¶ï¼Œä¼šä½¿å˜é‡çš„ä½œç”¨åŸŸé™åˆ¶åœ¨å£°æ˜å®ƒçš„æ–‡ä»¶å†…ã€‚ åœ¨ C++ ä¸­ï¼Œå½“ static ç”¨åœ¨ç±»æ•°æ®æˆå‘˜ä¸Šæ—¶ï¼Œä¼šå¯¼è‡´ä»…æœ‰ä¸€ä¸ªè¯¥æˆå‘˜çš„å‰¯æœ¬è¢«ç±»çš„æ‰€æœ‰å¯¹è±¡å…±äº«ã€‚ 1234567891011121314151617181920212223#include &lt;iostream&gt; // å‡½æ•°å£°æ˜ void func(void); static int count = 10; /* å…¨å±€å˜é‡ */ int main()&#123; while(count--) &#123; func(); &#125; return 0;&#125;// å‡½æ•°å®šä¹‰void func( void )&#123; static int i = 5; // å±€éƒ¨é™æ€å˜é‡ i++; std::cout &lt;&lt; &quot;å˜é‡ i ä¸º &quot; &lt;&lt; i ; std::cout &lt;&lt; &quot; , å˜é‡ count ä¸º &quot; &lt;&lt; count &lt;&lt; std::endl;&#125; å½“ä¸Šé¢çš„ä»£ç è¢«ç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒä¼šäº§ç”Ÿä¸‹åˆ—ç»“æœï¼š externå­˜å‚¨ç±» extern å­˜å‚¨ç±»ç”¨äºæä¾›ä¸€ä¸ªå…¨å±€å˜é‡çš„å¼•ç”¨ï¼Œå…¨å±€å˜é‡å¯¹æ‰€æœ‰çš„ç¨‹åºæ–‡ä»¶éƒ½æ˜¯å¯è§çš„ã€‚å½“æ‚¨ä½¿ç”¨ â€˜externâ€™ æ—¶ï¼Œå¯¹äºæ— æ³•åˆå§‹åŒ–çš„å˜é‡ï¼Œä¼šæŠŠå˜é‡åæŒ‡å‘ä¸€ä¸ªä¹‹å‰å®šä¹‰è¿‡çš„å­˜å‚¨ä½ç½®ã€‚ å½“æ‚¨æœ‰å¤šä¸ªæ–‡ä»¶ä¸”å®šä¹‰äº†ä¸€ä¸ªå¯ä»¥åœ¨å…¶ä»–æ–‡ä»¶ä¸­ä½¿ç”¨çš„å…¨å±€å˜é‡æˆ–å‡½æ•°æ—¶ï¼Œå¯ä»¥åœ¨å…¶ä»–æ–‡ä»¶ä¸­ä½¿ç”¨ extern æ¥å¾—åˆ°å·²å®šä¹‰çš„å˜é‡æˆ–å‡½æ•°çš„å¼•ç”¨ã€‚å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œextern æ˜¯ç”¨æ¥åœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­å£°æ˜ä¸€ä¸ªå…¨å±€å˜é‡æˆ–å‡½æ•°ã€‚ extern ä¿®é¥°ç¬¦é€šå¸¸ç”¨äºå½“æœ‰ä¸¤ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶å…±äº«ç›¸åŒçš„å…¨å±€å˜é‡æˆ–å‡½æ•°çš„æ—¶å€™ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼šmain.cpp 12345678910#include &lt;iostream&gt; int count ;extern void write_extern(); int main()&#123; count = 5; write_extern();&#125; ç¬¬äºŒä¸ªæ–‡ä»¶ï¼šsupport.cpp 12345678#include &lt;iostream&gt; extern int count; void write_extern(void)&#123; std::cout &lt;&lt; &quot;Count is &quot; &lt;&lt; count &lt;&lt; std::endl;&#125; è¿™é‡Œï¼Œç¬¬äºŒä¸ªæ–‡ä»¶ä¸­çš„ extern å…³é”®å­—ç”¨äºå£°æ˜å·²ç»åœ¨ç¬¬ä¸€ä¸ªæ–‡ä»¶ main.cpp ä¸­å®šä¹‰çš„ countã€‚ç°åœ¨ ï¼Œç¼–è¯‘è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1$ g++ main.cpp support.cpp -o write è¿™ä¼šäº§ç”Ÿ write å¯æ‰§è¡Œç¨‹åºï¼Œå°è¯•æ‰§è¡Œ writeï¼Œå®ƒä¼šäº§ç”Ÿä¸‹åˆ—ç»“æœï¼š 12$ ./writeCount is 5 mutableå­˜å‚¨ç±» mutable è¯´æ˜ç¬¦ä»…é€‚ç”¨äºç±»çš„å¯¹è±¡.å®ƒå…è®¸å¯¹è±¡çš„æˆå‘˜æ›¿ä»£å¸¸é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œmutable æˆå‘˜å¯ä»¥é€šè¿‡ const æˆå‘˜å‡½æ•°ä¿®æ”¹ã€‚ thread_local (C++11)å­˜å‚¨ç±» ä½¿ç”¨ thread_local è¯´æ˜ç¬¦å£°æ˜çš„å˜é‡ä»…å¯åœ¨å®ƒåœ¨å…¶ä¸Šåˆ›å»ºçš„çº¿ç¨‹ä¸Šè®¿é—®ã€‚ å˜é‡åœ¨åˆ›å»ºçº¿ç¨‹æ—¶åˆ›å»ºï¼Œå¹¶åœ¨é”€æ¯çº¿ç¨‹æ—¶é”€æ¯ã€‚ æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰å…¶è‡ªå·±çš„å˜é‡å‰¯æœ¬ã€‚ thread_local è¯´æ˜ç¬¦å¯ä»¥ä¸ static æˆ– extern åˆå¹¶ã€‚ å¯ä»¥å°† thread_local ä»…åº”ç”¨äºæ•°æ®å£°æ˜å’Œå®šä¹‰ï¼Œthread_local ä¸èƒ½ç”¨äºå‡½æ•°å£°æ˜æˆ–å®šä¹‰ã€‚ ä»¥ä¸‹æ¼”ç¤ºäº†å¯ä»¥è¢«å£°æ˜ä¸º thread_local çš„å˜é‡ï¼š 1234567891011thread_local int x; // å‘½åç©ºé—´ä¸‹çš„å…¨å±€å˜é‡class X&#123; static thread_local std::string s; // ç±»çš„staticæˆå‘˜å˜é‡&#125;;static thread_local std::string X::s; // X::s æ˜¯éœ€è¦å®šä¹‰çš„ void foo()&#123; thread_local std::vector&lt;int&gt; v; // æœ¬åœ°å˜é‡&#125; Lambda å‡½æ•°ä¸è¡¨è¾¾å¼ C++11 æä¾›äº†å¯¹åŒ¿åå‡½æ•°çš„æ”¯æŒ,ç§°ä¸º Lambda å‡½æ•°(ä¹Ÿå« Lambda è¡¨è¾¾å¼)ã€‚ Lambda è¡¨è¾¾å¼æŠŠå‡½æ•°çœ‹ä½œå¯¹è±¡ã€‚Lambda è¡¨è¾¾å¼å¯ä»¥åƒå¯¹è±¡ä¸€æ ·ä½¿ç”¨ï¼Œæ¯”å¦‚å¯ä»¥å°†å®ƒä»¬èµ‹ç»™å˜é‡å’Œä½œä¸ºå‚æ•°ä¼ é€’ï¼Œè¿˜å¯ä»¥åƒå‡½æ•°ä¸€æ ·å¯¹å…¶æ±‚å€¼ã€‚ Lambda è¡¨è¾¾å¼æœ¬è´¨ä¸Šä¸å‡½æ•°å£°æ˜éå¸¸ç±»ä¼¼ã€‚Lambda è¡¨è¾¾å¼å…·ä½“å½¢å¼å¦‚ä¸‹: 1[capture](parameters)-&gt;return-type&#123;body&#125; ä¾‹å¦‚ï¼š 1[](int x, int y)&#123; return x &lt; y ; &#125; å¦‚æœæ²¡æœ‰è¿”å›å€¼å¯ä»¥è¡¨ç¤ºä¸ºï¼š 1[capture](parameters)&#123;body&#125; ä¾‹å¦‚ï¼š 1[]&#123; ++global_x; &#125; åœ¨ä¸€ä¸ªæ›´ä¸ºå¤æ‚çš„ä¾‹å­ä¸­ï¼Œè¿”å›ç±»å‹å¯ä»¥è¢«æ˜ç¡®çš„æŒ‡å®šå¦‚ä¸‹ï¼š 1[](int x, int y) -&gt; int &#123; int z = x + y; return z + x; &#125; æœ¬ä¾‹ä¸­ï¼Œä¸€ä¸ªä¸´æ—¶çš„å‚æ•° z è¢«åˆ›å»ºç”¨æ¥å­˜å‚¨ä¸­é—´ç»“æœã€‚å¦‚åŒä¸€èˆ¬çš„å‡½æ•°ï¼Œz çš„å€¼ä¸ä¼šä¿ç•™åˆ°ä¸‹ä¸€æ¬¡è¯¥ä¸å…·åå‡½æ•°å†æ¬¡è¢«è°ƒç”¨æ—¶ã€‚ å¦‚æœ lambda å‡½æ•°æ²¡æœ‰ä¼ å›å€¼ï¼ˆä¾‹å¦‚ voidï¼‰ï¼Œå…¶è¿”å›ç±»å‹å¯è¢«å®Œå…¨å¿½ç•¥ã€‚ åœ¨Lambdaè¡¨è¾¾å¼å†…å¯ä»¥è®¿é—®å½“å‰ä½œç”¨åŸŸçš„å˜é‡ï¼Œè¿™æ˜¯Lambdaè¡¨è¾¾å¼çš„é—­åŒ…ï¼ˆClosureï¼‰è¡Œä¸ºã€‚ ä¸JavaScripté—­åŒ…ä¸åŒï¼ŒC++å˜é‡ä¼ é€’æœ‰ä¼ å€¼å’Œä¼ å¼•ç”¨çš„åŒºåˆ«ã€‚å¯ä»¥é€šè¿‡å‰é¢çš„[]æ¥æŒ‡å®šï¼š 123456[] // æ²’æœ‰å®šä¹‰ä»»ä½•å˜é‡ã€‚ä½¿ç”¨æœªå®šä¹‰å˜é‡ä¼šå¼•å‘é”™è¯¯ã€‚[x, &amp;y] // xä»¥ä¼ å€¼æ–¹å¼ä¼ å…¥ï¼ˆé»˜è®¤ï¼‰ï¼Œyä»¥å¼•ç”¨æ–¹å¼ä¼ å…¥ã€‚[&amp;] // ä»»ä½•è¢«ä½¿ç”¨åˆ°çš„å¤–éƒ¨å˜é‡éƒ½éšå¼åœ°ä»¥å¼•ç”¨æ–¹å¼åŠ ä»¥å¼•ç”¨ã€‚[=] // ä»»ä½•è¢«ä½¿ç”¨åˆ°çš„å¤–éƒ¨å˜é‡éƒ½éšå¼åœ°ä»¥ä¼ å€¼æ–¹å¼åŠ ä»¥å¼•ç”¨ã€‚[&amp;, x] // xæ˜¾å¼åœ°ä»¥ä¼ å€¼æ–¹å¼åŠ ä»¥å¼•ç”¨ã€‚å…¶ä½™å˜é‡ä»¥å¼•ç”¨æ–¹å¼åŠ ä»¥å¼•ç”¨ã€‚[=, &amp;z] // zæ˜¾å¼åœ°ä»¥å¼•ç”¨æ–¹å¼åŠ ä»¥å¼•ç”¨ã€‚å…¶ä½™å˜é‡ä»¥ä¼ å€¼æ–¹å¼åŠ ä»¥å¼•ç”¨ã€‚ å¦å¤–æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ã€‚å¯¹äº[=]æˆ–[&amp;]çš„å½¢å¼ï¼Œlambda è¡¨è¾¾å¼å¯ä»¥ç›´æ¥ä½¿ç”¨ this æŒ‡é’ˆã€‚ä½†æ˜¯ï¼Œå¯¹äº[]çš„å½¢å¼ï¼Œå¦‚æœè¦ä½¿ç”¨ this æŒ‡é’ˆï¼Œå¿…é¡»æ˜¾å¼ä¼ å…¥ï¼š 1[this]() &#123; this-&gt;someFunc(); &#125;(); å­—ç¬¦ä¸² æ•°ç»„ç±»å‹ å­—ç¬¦ä¸²å®é™…ä¸Šæ˜¯ä½¿ç”¨ null å­—ç¬¦ \\0 ç»ˆæ­¢çš„ä¸€ç»´å­—ç¬¦æ•°ç»„ã€‚å› æ­¤ï¼Œä¸€ä¸ªä»¥ null ç»“å°¾çš„å­—ç¬¦ä¸²ï¼ŒåŒ…å«äº†ç»„æˆå­—ç¬¦ä¸²çš„å­—ç¬¦ã€‚ å…¶å®ï¼Œä¸éœ€è¦æŠŠ null å­—ç¬¦æ”¾åœ¨å­—ç¬¦ä¸²å¸¸é‡çš„æœ«å°¾ã€‚C++ ç¼–è¯‘å™¨ä¼šåœ¨åˆå§‹åŒ–æ•°ç»„æ—¶ï¼Œè‡ªåŠ¨æŠŠ \\0 æ”¾åœ¨å­—ç¬¦ä¸²çš„æœ«å°¾ã€‚ C++ ä¸­æœ‰å¤§é‡çš„å‡½æ•°ç”¨æ¥æ“ä½œä»¥ null ç»“å°¾çš„å­—ç¬¦ä¸²: åºå· å‡½æ•° &amp; ç›®çš„ 1 strcpy(s1, s2); å¤åˆ¶å­—ç¬¦ä¸² s2 åˆ°å­—ç¬¦ä¸² s1ã€‚ 2 strcat(s1, s2); è¿æ¥å­—ç¬¦ä¸² s2 åˆ°å­—ç¬¦ä¸² s1 çš„æœ«å°¾ã€‚è¿æ¥å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥ç”¨ + å·ï¼Œä¾‹å¦‚: string str1 = &quot;runoob&quot;; string str2 = &quot;google&quot;; string str = str1 + str2; 3 strlen(s1); è¿”å›å­—ç¬¦ä¸² s1 çš„é•¿åº¦ã€‚ 4 strcmp(s1, s2); å¦‚æœ s1 å’Œ s2 æ˜¯ç›¸åŒçš„ï¼Œåˆ™è¿”å› 0ï¼›å¦‚æœ s1&lt;s2 åˆ™è¿”å›å€¼å°äº 0ï¼›å¦‚æœ s1&gt;s2 åˆ™è¿”å›å€¼å¤§äº 0ã€‚ 5 strchr(s1, ch); è¿”å›ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å­—ç¬¦ä¸² s1 ä¸­å­—ç¬¦ ch çš„ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚ 6 strstr(s1, s2); è¿”å›ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å­—ç¬¦ä¸² s1 ä¸­å­—ç¬¦ä¸² s2 çš„ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚ #include &lt;cstring&gt; Stringç±»å‹ å…³äºé¢å‘å¯¹è±¡: exampl: 1234567891011121314151617181920212223242526#include &lt;iostream&gt;#include &lt;string&gt; using namespace std; int main ()&#123; string str1 = &quot;runoob&quot;; string str2 = &quot;google&quot;; string str3; int len ; // å¤åˆ¶ str1 åˆ° str3 str3 = str1; cout &lt;&lt; &quot;str3 : &quot; &lt;&lt; str3 &lt;&lt; endl; // è¿æ¥ str1 å’Œ str2 str3 = str1 + str2; cout &lt;&lt; &quot;str1 + str2 : &quot; &lt;&lt; str3 &lt;&lt; endl; // è¿æ¥åï¼Œstr3 çš„æ€»é•¿åº¦ len = str3.size(); cout &lt;&lt; &quot;str3.size() : &quot; &lt;&lt; len &lt;&lt; endl; return 0;&#125; 123str3 : runoobstr1 + str2 : runoobgooglestr3.size() : 12 C++å¼•ç”¨ å¼•ç”¨å˜é‡æ˜¯ä¸€ä¸ªåˆ«åï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ˜¯æŸä¸ªå·²å­˜åœ¨å˜é‡çš„å¦ä¸€ä¸ªåå­—ã€‚ä¸€æ—¦æŠŠå¼•ç”¨åˆå§‹åŒ–ä¸ºæŸä¸ªå˜é‡ï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥å¼•ç”¨åç§°æˆ–å˜é‡åç§°æ¥æŒ‡å‘å˜é‡ã€‚ å’ŒæŒ‡é’ˆçš„åŒºåˆ«: å¼•ç”¨å¾ˆå®¹æ˜“ä¸æŒ‡é’ˆæ··æ·†ï¼Œå®ƒä»¬ä¹‹é—´æœ‰ä¸‰ä¸ªä¸»è¦çš„ä¸åŒï¼š ä¸å­˜åœ¨ç©ºå¼•ç”¨ã€‚å¼•ç”¨å¿…é¡»è¿æ¥åˆ°ä¸€å—åˆæ³•çš„å†…å­˜ã€‚ ä¸€æ—¦å¼•ç”¨è¢«åˆå§‹åŒ–ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå°±ä¸èƒ½è¢«æŒ‡å‘åˆ°å¦ä¸€ä¸ªå¯¹è±¡ã€‚æŒ‡é’ˆå¯ä»¥åœ¨ä»»ä½•æ—¶å€™æŒ‡å‘åˆ°å¦ä¸€ä¸ªå¯¹è±¡ã€‚ å¼•ç”¨å¿…é¡»åœ¨åˆ›å»ºæ—¶è¢«åˆå§‹åŒ–ã€‚æŒ‡é’ˆå¯ä»¥åœ¨ä»»ä½•æ—¶é—´è¢«åˆå§‹åŒ–ã€‚ è¯•æƒ³å˜é‡åç§°æ˜¯å˜é‡é™„å±åœ¨å†…å­˜ä½ç½®ä¸­çš„æ ‡ç­¾ï¼Œæ‚¨å¯ä»¥æŠŠå¼•ç”¨å½“æˆæ˜¯å˜é‡é™„å±åœ¨å†…å­˜ä½ç½®ä¸­çš„ç¬¬äºŒä¸ªæ ‡ç­¾ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥é€šè¿‡åŸå§‹å˜é‡åç§°æˆ–å¼•ç”¨æ¥è®¿é—®å˜é‡çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼š 1int i = 17; æˆ‘ä»¬å¯ä»¥ä¸º i å£°æ˜å¼•ç”¨å˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12int&amp; r = i;double&amp; s = d; åœ¨è¿™äº›å£°æ˜ä¸­ï¼Œ&amp; è¯»ä½œå¼•ç”¨ã€‚å› æ­¤ï¼Œç¬¬ä¸€ä¸ªå£°æ˜å¯ä»¥è¯»ä½œ â€œr æ˜¯ä¸€ä¸ªåˆå§‹åŒ–ä¸º i çš„æ•´å‹å¼•ç”¨â€ï¼Œç¬¬äºŒä¸ªå£°æ˜å¯ä»¥è¯»ä½œ â€œs æ˜¯ä¸€ä¸ªåˆå§‹åŒ–ä¸º d çš„ double å‹å¼•ç”¨â€ã€‚ä¸‹é¢çš„å®ä¾‹ä½¿ç”¨äº† int å’Œ double å¼•ç”¨ï¼š 123456789101112131415161718192021222324#include &lt;iostream&gt; using namespace std; int main ()&#123; // å£°æ˜ç®€å•çš„å˜é‡ int i; double d; // å£°æ˜å¼•ç”¨å˜é‡ int&amp; r = i; double&amp; s = d; i = 5; cout &lt;&lt; &quot;Value of i : &quot; &lt;&lt; i &lt;&lt; endl; cout &lt;&lt; &quot;Value of i reference : &quot; &lt;&lt; r &lt;&lt; endl; d = 11.7; cout &lt;&lt; &quot;Value of d : &quot; &lt;&lt; d &lt;&lt; endl; cout &lt;&lt; &quot;Value of d reference : &quot; &lt;&lt; s &lt;&lt; endl; return 0;&#125; å½“ä¸Šé¢çš„ä»£ç è¢«ç¼–è¯‘å’Œæ‰§è¡Œæ—¶ï¼Œå®ƒä¼šäº§ç”Ÿä¸‹åˆ—ç»“æœï¼š 1234Value of i : 5Value of i reference : 5Value of d : 11.7Value of d reference : 11.7 å¼•ç”¨é€šå¸¸ç”¨äºå‡½æ•°å‚æ•°åˆ—è¡¨å’Œå‡½æ•°è¿”å›å€¼ã€‚ä¸‹é¢åˆ—å‡ºäº† C++ ç¨‹åºå‘˜å¿…é¡»æ¸…æ¥šçš„ä¸¤ä¸ªä¸ C++ å¼•ç”¨ç›¸å…³çš„é‡è¦æ¦‚å¿µï¼š æ¦‚å¿µ æè¿° æŠŠå¼•ç”¨ä½œä¸ºå‚æ•° C++ æ”¯æŒæŠŠå¼•ç”¨ä½œä¸ºå‚æ•°ä¼ ç»™å‡½æ•°ï¼Œè¿™æ¯”ä¼ ä¸€èˆ¬çš„å‚æ•°æ›´å®‰å…¨ã€‚ æŠŠå¼•ç”¨ä½œä¸ºè¿”å›å€¼ å¯ä»¥ä» C++ å‡½æ•°ä¸­è¿”å›å¼•ç”¨ï¼Œå°±åƒè¿”å›å…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·ã€‚ I/O å¤´æ–‡ä»¶ å‡½æ•°å’Œæè¿° è¯¥æ–‡ä»¶å®šä¹‰äº† cinã€coutã€cerr å’Œ clog å¯¹è±¡ï¼Œåˆ†åˆ«å¯¹åº”äºæ ‡å‡†è¾“å…¥æµã€æ ‡å‡†è¾“å‡ºæµã€éç¼“å†²æ ‡å‡†é”™è¯¯æµå’Œç¼“å†²æ ‡å‡†é”™è¯¯æµã€‚ è¯¥æ–‡ä»¶é€šè¿‡æ‰€è°“çš„å‚æ•°åŒ–çš„æµæ“çºµå™¨ï¼ˆæ¯”å¦‚ setw å’Œ setprecisionï¼‰ï¼Œæ¥å£°æ˜å¯¹æ‰§è¡Œæ ‡å‡†åŒ– I/O æœ‰ç”¨çš„æœåŠ¡ã€‚ è¯¥æ–‡ä»¶ä¸ºç”¨æˆ·æ§åˆ¶çš„æ–‡ä»¶å¤„ç†å£°æ˜æœåŠ¡ã€‚æˆ‘ä»¬å°†åœ¨æ–‡ä»¶å’Œæµçš„ç›¸å…³ç« èŠ‚è®¨è®ºå®ƒçš„ç»†èŠ‚ã€‚ å»¶ç”³å¾…è¡¥å……â€¦ C++é¢å‘å¯¹è±¡ C++é«˜çº§","categories":[{"name":"C/C++","slug":"C-C","permalink":"https://blogs.leechee.top/categories/C-C/"}],"tags":[{"name":"C/C++","slug":"C-C","permalink":"https://blogs.leechee.top/tags/C-C/"},{"name":"è¯­è¨€","slug":"è¯­è¨€","permalink":"https://blogs.leechee.top/tags/%E8%AF%AD%E8%A8%80/"}]},{"title":"æ—¥å¸¸æ•ˆç‡Tips","slug":"Normal Tips","date":"2022-01-10T15:21:13.000Z","updated":"2023-01-13T03:27:25.157Z","comments":true,"path":"posts/6c0c8dda/","link":"","permalink":"https://blogs.leechee.top/posts/6c0c8dda/","excerpt":"","text":"Github æ›¿æ¢github.com ä¸º hub.fastgit.org Vim æ‰¹é‡æ›¿æ¢: :%s/abc/123/g c (ç”¨cå¯ä»¥ç¡®è®¤æ˜¯å¦æ›¿æ¢) ç¼–è¾‘æ–‡ä»¶:(é»˜è®¤æ¨¡å¼ä¸‹) æŒ‡ä»¤ æè¿° i åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨å­—ç¬¦çš„å‰é¢ï¼Œè½¬ä¸ºç¼–è¾‘æ¨¡å¼ã€‚ I åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œé¦–è½¬æ¢ä¸ºç¼–è¾‘æ¨¡å¼ã€‚ a åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨å­—ç¬¦çš„åé¢ï¼Œè½¬ä¸ºç¼–è¾‘æ¨¡å¼ã€‚ A åœ¨å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œå°¾ï¼Œè½¬æ¢ä¸ºç¼–è¾‘æ¨¡å¼ã€‚ o åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸‹æ–¹ï¼Œæ–°å»ºä¸€è¡Œï¼Œå¹¶è½¬ä¸ºç¼–è¾‘æ¨¡å¼ã€‚ O åœ¨å½“å‰å…‰æ ‡æ‰€åœ¨è¡Œçš„ä¸Šæ–¹ï¼Œæ–°å»ºä¸€è¡Œï¼Œå¹¶è½¬ä¸ºç¼–è¾‘æ¨¡å¼ã€‚ æŸ¥æ‰¾: /xxx n åœ¨åŒä¸€ä¸ªæ–¹å‘é‡å¤ä¸Šä¸€æ¬¡æœç´¢å‘½ä»¤ N åœ¨åæ–¹å‘é‡å¤ä¸Šä¸€æ¬¡æœç´¢å‘½ä»¤ é€‰ä¸­ å•è¯å¼€å¤´æˆ–è€…ç»“å°¾ (åœ¨væ¨¡å¼ä¸‹) æŒ‰eè¿›è¡Œé€‰æ‹© Linux é…ç½®ssh sudo apt install openssh-server service ssh start é‡æ–°è¿æ¥Ubuntuè”ç½‘æŒ‡ä»¤ï¼š sudo /etc/init.d/network-manager restart é‡æ–°æŒ‚è½½å…±äº«æ–‡ä»¶å¤¹ sudo vmhgfs-fuse .host:/ /mnt/hgfs/ -o allow_other -o uid=1000 æœwifi: sudo iw dev wlan0 scan | grep SSID äº¤å‰ç¼–è¯‘æ ‘è“æ´¾gccï¼š arm-linux-gnueabihf-gcc æ ‘è“æ´¾å®‰å…¨å…³æœºï¼š sudo shutdown -h now æ ‘è“æ´¾é‡å¯ï¼š sudo reboot æ ‘è“æ´¾ä¼ è¾“æ–‡ä»¶ä½¿ç”¨fillzeilaï¼šå‰é¢åŠ ä¸Š sftp:// æ ‘è“æ´¾æ‹ç…§ï¼š raspistill -o image.jpg ç›‘æ§ :8080 å®‰è£…è½¯ä»¶: ``sudo dpkg -itar xvf xxx **LinuxæŸ¥çœ‹pdfï¼š**zathura **LINUXè§£å‹æ–‡ä»¶ï¼š**tar xvf xxx` æ‘„åƒå¤´æ¨æµï¼š /usr/local/bin/mjpg_streamer -i &quot;/usr/local/lib/mjpg-streamer/input_uvc.so -n -f 30 -r 1280x720&quot; -o &quot;/usr/local/lib/mjpg-streamer/output_http.so -p 8080 -w /usr/local/share/mjpg-streamer/www&quot; ä¸´æ—¶è·¯å¾„ï¼š export LD_LIBRARY_PATH=/home/lz/face/samplecode/ASFTestDemo/linux_so/:$LD_LIBRARY_PATH opencv: ç¼–è¯‘æ—¶ åŠ  pkg-config --cflags --libs opencv äº‘æœåŠ¡å™¨ é˜²ç«å¢™æ“ä½œ firewall-cmd --list-all åˆ—å‡ºæ‰€æœ‰ç«¯å£å·ç™½åå• firewall-cmd --add-port=8888/tcp --permanent æ·»åŠ ä¸€ä¸ª8888ç«¯å£ä¸ºç™½åå• firewall-cmd --reload æ›´æ–°é˜²ç«å¢™æ“ä½œ Windows ç™¾åº¦æ–‡åº“ä¸‹è½½: ç½‘å€baiduåé¢åŠ ä¸‰ä¸ªv Typora+ä¸ƒç‰›äº‘é…ç½®: 12345678910111213141516&#123; &quot;picBed&quot;: &#123; &quot;uploader&quot;: &quot;qiniu&quot;, &quot;qiniu&quot;: &#123; &quot;accessKey&quot;: &quot;&quot;, &quot;secretKey&quot;: &quot;&quot;, &quot;bucket&quot;: &quot;&quot;, // å­˜å‚¨ç©ºé—´å &quot;url&quot;: &quot;&quot;, // è‡ªå®šä¹‰åŸŸå &quot;area&quot;: &quot;&quot;, // å­˜å‚¨åŒºåŸŸç¼–å· &quot;options&quot;: &quot;&quot;, // ç½‘å€åç¼€ï¼Œæ¯”å¦‚ï¼Ÿimgslim &quot;path&quot;: &quot;img/&quot; // è‡ªå®šä¹‰å­˜å‚¨è·¯å¾„ï¼Œæ¯”å¦‚ img/ &#125; &#125;, &quot;picgoPlugins&quot;: &#123;&#125;&#125; pyhton conda install é—®é¢˜ ç»ˆç«¯ä¸­è¾“å…¥ä»£ç ï¼š 1conda config --add channels conda-forge å†é€šè¿‡condaæˆ–è€…pipå®‰è£…è‡ªå·±éœ€è¦çš„åŒ…å°±ä¸ä¼šå†å‡ºé—®é¢˜äº†ã€‚ æ³¨æ„channelä¸ä¸€å®šæ˜¯conda-forgeï¼Œæ ¹æ®ä½ éœ€è¦å®‰è£…åŒ…çš„ç±»å‹ï¼Œå…·ä½“åŒ…å±äºé‚£ä¸ªç±»å‹å¯ä»¥é€šè¿‡ä»£ç æ¥æŸ¥çœ‹ï¼š 1anaconda search -t conda è¦å®‰è£…çš„åŒ… å½“ç„¶å•¦å¦‚æœä½ éœ€è¦å®‰è£…çš„åŒ…æ¯”è¾ƒå°‘ä¹Ÿå¯ä»¥ç›´æ¥æŒ‰ç…§ä¸Šé¢ç»™å‡ºé“¾æ¥çš„åšå®¢æ–¹æ³•è¿›è¡Œæ“ä½œ conda activate tensorflow conda create -n tensorflow python=3.8.5 Windows pip install 1pip install åŒ…å -i http://mirrors.aliyun.com/pypi/simple/ --trusted-host mirrors.aliyun.com ä¸‹è½½é—®é¢˜ CSDN ä½¿ç”¨: f12 conslo è¾“å…¥ 1234567891011121314151617181920212223242526272829303132333435363738394041// å°†ä¸»è¦å†…å®¹ç§»åŠ¨åˆ° body$(&quot;body&quot;).prepend($(&quot;main&quot;)); // ç§»é™¤æ‰bodyä¸­çš„å…¶ä»–èŠ‚ç‚¹// ä¸ç§»é™¤è„šæœ¬å’Œ style æ˜¯å› ä¸ºè¦ä¿æŒæ ·å¼$.each($(&quot;body&quot;).children(), function(index, obj) &#123; var tag = obj.tagName; if (!(tag==&quot;MAIN&quot; || tag==&quot;SCRIPT&quot; || tag==&quot;STYLE&quot;)) &#123; obj.remove(); &#125; &#125;); // å†…å®¹å®½åº¦ä¸ºé¡µé¢çš„100% $(&quot;main&quot;).css(&quot;width&quot;, &quot;100%&quot;);// ç§»é™¤æ‰ç”¨æˆ·ä¿¡æ¯å·¥å…·æ $(&quot;#toolBarBox&quot;).remove();//å¦‚æœæœ‰ä¸“æ ï¼Œå»æ‰ä¸“æ if ( $(&quot;#blogColumnPayAdvert&quot;).length &gt; 0 )&#123; $(&quot;#blogColumnPayAdvert&quot;).remove();&#125;//å»æ‰ä½œè€…æ $(&quot;.article-info-box&quot;).remove();//é™¤å»ç›¸å…³æ¨èå¯¹ä½ æœ‰å¸®åŠ©å—æ $(&quot;#recommendNps&quot;).remove();//é™¤å»è¯„ä»·æ $(&quot;#pcCommentBox&quot;).remove();//é™¤å»åº•éƒ¨$(&quot;.template-box&quot;).remove();$(&quot;.blog-footer-bottom&quot;).remove();$(&quot;.recommend-box&quot;).remove();//å¦‚æœæœ‰é“¾æ¥å…ƒç´ ï¼Œå¾ªç¯ç‚¹å‡»å›¾ç‰‡é“¾æ¥if ( $(&quot;.look-more-preCode&quot;).length &gt; 0 )&#123; $.each($(&quot;.look-more-preCode&quot;), function(index, obj) &#123; obj.click();&#125;);&#125; // è¿›è¡Œæ‰“å°ï¼Œä¿å­˜PDF// è®¾ç½® 500 æ¯«ç§’ç­‰å¾…æ—¶é—´æ˜¯å› ä¸ºè¦ç­‰å¾…é¡µé¢è®¾ç½®å®Œæˆ// å¦åˆ™é¡µé¢å¯èƒ½ä¼šæœ‰éƒ¨åˆ†æ ·å¼æ²¡æœ‰åŠ è½½å‡ºæ¥setTimeout(function()&#123;window.print()&#125;, 500);","categories":[{"name":"Tips","slug":"Tips","permalink":"https://blogs.leechee.top/categories/Tips/"}],"tags":[{"name":"Tips","slug":"Tips","permalink":"https://blogs.leechee.top/tags/Tips/"},{"name":"Windows","slug":"Windows","permalink":"https://blogs.leechee.top/tags/Windows/"},{"name":"Linux","slug":"Linux","permalink":"https://blogs.leechee.top/tags/Linux/"},{"name":"åµŒå…¥å¼","slug":"åµŒå…¥å¼","permalink":"https://blogs.leechee.top/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/"},{"name":"C/C++","slug":"C-C","permalink":"https://blogs.leechee.top/tags/C-C/"},{"name":"è®°å½•","slug":"è®°å½•","permalink":"https://blogs.leechee.top/tags/%E8%AE%B0%E5%BD%95/"}]},{"title":"åšå®¢æ–‡ç« Title","slug":"æ–‡ç« Tips","date":"2022-01-01T15:21:13.000Z","updated":"2023-01-11T01:20:56.160Z","comments":true,"path":"posts/57b0fba5/","link":"","permalink":"https://blogs.leechee.top/posts/57b0fba5/","excerpt":"","text":"Front-matter æ˜¯markdown æ–‡ä»¶æœ€ä¸Šæ–¹ä»¥ â€” åˆ†éš”çš„åŒºåŸŸï¼Œç”¨äºæŒ‡å®šä¸ªåˆ«æ¡£æ¡ˆçš„å˜æ•°ã€‚ Page Front-matter ç”¨äºé é¢é…ç½® Post Front-matter ç”¨äºæ–‡ç« é é…ç½® 123456789101112131415---title:date:updated:type:comments:description:keywords:top_img:mathjax:katex:aside:aplayer:highlight_shrink:--- ç¬”è®° 12345678910111213141516171819202122232425262728293031323334353637383940414243444546---title:date:updated:tags:categories:keywords:description:top_img:comments:cover:ç¼©ç•¥å›¾toc:toc_number:toc_style_simple:copyright:copyright_author:copyright_author_href:copyright_url:copyright_info:mathjax:katex:aplayer:highlight_shrink:aside:---another:::::::::::::::::::---title: date: author: img: /medias/banner/7.jpgcoverImg: /medias/banner/7.jpgtop: truecover: truetoc: truepassword: 5f15b28ffe43f8be4f239bdd9b69af9d80dbafcb20a5f0df5d1677a120ae9110mathjax: truesummary: è‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦tags:- Hexo- Github- categories:- --- æ–°.md 12345678910111213141516171819202122232425262728293031---title: Copyright-beautify # æ–‡ç« åç§°date: 2021-03-02 13:52:46 # æ–‡ç« å‘å¸ƒæ—¥æœŸupdated: 2021-03-02 13:52:46 # æ–‡ç« æ›´æ–°æ—¥æœŸcopyright_author: Nesxc # ä½œè€…è¦†å†™copyright_url: #https://www.nesxc.com/post/hexocc.html # åŸæ–‡é“¾æ¥è¦†å†™license: # è®¸å¯åè®®åç§°è¦†å†™license_url: # è®¸å¯åè®®é“¾æ¥è¦†å†™author: img: coverImg: top: falsecover: falsetoc: truemathjax: falsepassword:summary:tags:categories:sticky: 1 #ç½®é¡¶ç”¨ è¶Šå¤§ç½®é¡¶ä¼˜å…ˆçº§è¶Šå¤§aside: false &lt;-- å…³é—­ä¾§è¾¹æ title: æ–‡ç« æ ‡é¢˜date: åˆ›å»ºæ—¥æœŸupdated: æ›´æ–°æ—¥æœŸcover: æ–‡ç« å°é¢description: æ–‡ç« æè¿°swiper_index: 1 #ç½®é¡¶è½®æ’­å›¾é¡ºåºï¼Œéœ€å¡«éè´Ÿæ•´æ•°ï¼Œæ•°å­—è¶Šå¤§è¶Šé å‰comments: false #å…³é—­è¯„è®ºsubtitle: å·¦ä¸Šè§’æ˜¾ç¤ºdescription: æç¤º-&gt;å·¦ä¸Šè§’--- å…¶ä»– ç»™ js è„šæœ¬åŠ ä¸Š defer å’Œ ansyc å±æ€§æ¥å®ç°å¼‚æ­¥åŠ è½½ï¼Œä¾‹å¦‚ï¼š 123bottom: - &lt;script defer https://unpkg.zhimg.com/vue@2.6.11&quot;&gt;&lt;/script&gt; - &lt;script async src=&quot;https://cdn.jsdelivr.net/gh/zjwo/CDN/js/pyq/pyq.min.js&quot;&gt;&lt;/script&gt;","categories":[{"name":"HexoPost","slug":"HexoPost","permalink":"https://blogs.leechee.top/categories/HexoPost/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"https://blogs.leechee.top/tags/hexo/"},{"name":"post","slug":"post","permalink":"https://blogs.leechee.top/tags/post/"}]},{"title":"è¿œç¨‹æ§åˆ¶é¡¹ç›®ä¸€äº›é—®é¢˜","slug":"è¿œç¨‹æ§åˆ¶é¡¹ç›®é—®é¢˜","date":"2021-03-25T15:21:13.000Z","updated":"2023-01-11T01:23:12.161Z","comments":true,"path":"posts/8d1f2d1/","link":"","permalink":"https://blogs.leechee.top/posts/8d1f2d1/","excerpt":"","text":"[TOC] é¡¹ç›®å¼€å‘ é…ç½®å¯åŠ¨é¡¹ä¸ºmianCRTstartup , å­ç³»ç»Ÿä¸ºæ§åˆ¶çª—å£æ ¼å¼ ç½‘ç»œç¼–ç¨‹ åˆå§‹Windows socket è®¾è®¡ç±»,mainä¹‹å‰å•çº¿ç¨‹æ‰§è¡Œ é—®é¢˜ å¦‚æœå£°æ˜çš„ç±»è¢«æ‹¿å»å£°æ˜å˜é‡æ€ä¹ˆåŠ? -&gt;å•ä¾‹ é€šè¿‡å•ä¾‹,å¾ˆå¤šåˆå§‹åŒ–ä¸ç”¨ç®¡,å°è£…åœ¨å•ä¾‹é‡Œ ç±» é™æ€æˆå‘˜ æ–¹æ³• éœ€è¦this é™æ€æ–¹æ³•æ²¡æœ‰thisæŒ‡é’ˆ å› ä¸ºæ˜¯å…¨å±€è®¿é—®çš„ public é™æ€æˆå‘˜ä¹Ÿä¸€æ · éƒ½æ˜¯å…¬ç”¨çš„(å¿…é¡»é€šè¿‡æ˜¾å¼æ–¹å¼è¿›è¡Œåˆå§‹åŒ–) ç½‘ç»œ: åŒ…çš„å°è£… åŒ…çš„è®¾è®¡ : å¾ˆå¤šä¸ªæ•°æ®, è®¾å®šä¸€åˆ°ä¿©ä¸ªå­—èŠ‚çš„åŒ…å¤´,ç”¨å››ä¸ªå­—èŠ‚ä½œä¸ºé•¿åº¦(å¤ªé•¿çš„è¯ä¿ç•™å››ä¸ªå­—èŠ‚),åé¢å°±æ˜¯æ•°æ®,ä¸€èˆ¬ç”¨ä¸€åˆ°ä¿©ä¸ªå­—èŠ‚ä½œä¸ºä¸€ä¸ªå‘½ä»¤,åœ¨åŒ…çš„æœ€åä¿ç•™ä¿©ä¸ªå­—èŠ‚åšä¸€ä¸ªæ ¡éªŒ . åŒ…å¤´:å›ºå®šçš„,æ¯”å¦‚FFFF \\ FFFE (å› ä¸ºä¸å¤ªå¸¸è§) , æ”¶åˆ°æ—¶,å¼€å§‹ä¸€ä¸ªä¸ªå»æ‰¾,å¦‚æœæ‰¾ä¸åˆ°å°±è·³è¿‡ , (å¦‚æœç¼“å†²åŒºæœ‰æ®‹ç•™,é‚£ä¹ˆæ®‹ç•™çš„æ•°æ®éœ€è¦è¢«è·³è¿‡,å°±éœ€è¦åŒ…å¤´) , (å—…æ¢åŒ…çš„åŸå› ,æ•°æ®æ‚ä¹±,æ¸—é€æµ‹è¯•ç”¨) , (å…¶ä»–åº”ç”¨çš„è¯¯å‘). ç„¶åè¯»åŒ…é•¿åº¦,ä¸ºäº†å®‰å…¨å¯ä»¥åŠ æ ¡éªŒ(æ¯”å¦‚å’Œæ ¡éªŒ,å°†åŒ…å¤´å’Œé•¿åº¦ä»¥å¤–çš„æ•°æ®éƒ½åŠ èµ·æ¥,æº¢å‡ºçš„éƒ¨åˆ†ä¸è¦äº†,å¦å¤–çš„æ¯”å¦‚CRCè¿™ç§). å…·ä½“åšæ³•: å‘½ä»¤è®¾è®¡ é©±åŠ¨ä¿¡æ¯ ç›®å½•ä¿¡æ¯ å±å¹•å›¾åƒ é¼ æ ‡å¤„ç† æ‰“å¼€æ–‡ä»¶ ä¸‹è½½æ–‡ä»¶ é”æœº è§£é” æ˜¾ç¤ºæ–‡å­— åˆ é™¤æ–‡ä»¶ å®¢æˆ·ç«¯å¼€å‘ é¡¹ç›®åˆ›å»º æ§ä»¶å¸ƒå±€ ç½‘ç»œç¼–ç¨‹ æ¶ˆæ¯è®¾è®¡ æ–‡ä»¶å±•ç¤º å›¾åƒæ˜¾ç¤º é¼ æ ‡æ§åˆ¶ å…¶ä»–åŠŸèƒ½ é—®é¢˜ å•ä¾‹æ¨¡å¼: RALLæœºåˆ¶ æ‰“åŒ…é—®é¢˜: #prama pack(push)é—®é¢˜ : exp: FFFE 07000000 0100 432C44 B300 åŒ…å¤´:FFFE 07000000:æ•´ä¸ªé•¿åº¦ 0100:å‘½ä»¤ä¿©ä¸ªå­—èŠ‚ æ–‡ä»¶é©±åŠ¨æ–¹å¼: éœ€æ±‚:å¤„ç†æ–‡ä»¶ éœ€è¦çŸ¥é“åœ¨å“ªä¸ªåˆ†åŒº,makedriverinfoæ¥å›å¤ D:\\my_ws\\c_ws\\control_ws\\control_client\\ClientSocket.h(202) : atlTraceGeneral - m_sock : 192 D:\\my_ws\\c_ws\\control_ws\\control_client\\control_clientDlg.cpp(171) : atlTraceGeneral - Client Send ret 1 D:\\my_ws\\c_ws\\control_ws\\control_ws\\ServerSocket.h(161) : atlTraceGeneral - m_client = 188 D:\\my_ws\\c_ws\\control_ws\\control_ws\\control_ws.cpp(437) : atlTraceGeneral - Acceptclirnt return true D:\\my_ws\\c_ws\\control_ws\\control_ws\\ServerSocket.h(184) : atlTraceGeneral - recv len : 10 D:\\my_ws\\c_ws\\control_ws\\control_client\\ClientSocket.h(202) : atlTraceGeneral - m_sock : 556 D:\\my_ws\\c_ws\\control_ws\\control_client\\control_clientDlg.cpp(171) : atlTraceGeneral - Client Send ret 1 D:\\my_ws\\c_ws\\control_ws\\control_client\\control_clientDlg.cpp(173) : atlTraceGeneral - Client ack : -1 D:\\my_ws\\c_ws\\control_ws\\control_ws\\ServerSocket.h(161) : atlTraceGeneral - m_client = 508 D:\\my_ws\\c_ws\\control_ws\\control_ws\\control_ws.cpp(437) : atlTraceGeneral - Acceptclirnt return true D:\\my_ws\\c_ws\\control_ws\\control_ws\\ServerSocket.h(185) : atlTraceGeneral - recv len : 12 D:\\my_ws\\c_ws\\control_ws\\control_ws\\control_ws.cpp(439) : atlTraceGeneral - dealcommand ret : 12 å›°éš¾: è®¾è®¡çš„æ—¶å€™æ²¡æœ‰è€ƒè™‘å‘¨å…¨å…³äºæ–‡ä»¶æ‰§è¡Œ getfilepathåªå…è®¸å‰å‡ ä¸ª æ–°åŠ åŠŸèƒ½å¾ˆéº»çƒ¦ æ‰¾é”™è¯¯å¾ˆä¹… æ˜¾ç¤ºæ–‡ä»¶æœ‰ä¸¢å¤± æ–­ç‚¹å‘ç°å‘é€æ²¡æœ‰é—®é¢˜ æ¥æ”¶è¿™è¾¹æœ‰é—®é¢˜ é¦–å…ˆä»è®¾è®¡ä¸Šæ¥è®²ä¸€èˆ¬æ²¡æœ‰ä»€ä¹ˆé—®é¢˜,ä»ä¿©æ–¹é¢ä¸‹æ‰‹,é¦–å…ˆç¡®ä¿ä¼ è¾“çš„æ•°æ®æ˜¯æ²¡æœ‰é—®é¢˜çš„,åœ¨æœåŠ¡ç«¯ç«¯åŠ æ—¥å¿—,æ‰“å°äº†ä¼ è¾“çš„æ•°é‡å¹¶ä¸”æ‰“å°äº†æ–‡ä»¶, å®¢æˆ·ç«¯ä¸€æ · ä¿©ç«¯å»æ¯”å¯¹ å¦‚æœæ•°æ®æ²¡æœ‰é—®é¢˜ é‚£å°±æ˜¯æ˜¾ç¤ºæœ‰é—®é¢˜ : ç»“æœæ˜¯æ•°æ®çš„é—®é¢˜ å¯¹ä¸ä¸Šå· countå’ŒåŒ… , å¼€å§‹è°ƒè¯•, ä¸èƒ½è°ƒè¯•å°±åŠ æ—¥å¿—, ä¸€å¼€å§‹æ˜¯indexæ ‡å¿—çš„é—®é¢˜ ,è¢«è¦†ç›– åŠ äº†staticæ²¡æœ‰ç”¨ , åˆå‘ç°æ˜¯bufferçš„é—®é¢˜, å¦ä¸€ä¸ªé—®é¢˜æ˜¯æœåŠ¡ç«¯å‘å®Œäº†,ä½†æ˜¯æˆ‘è¿™è¾¹æ¥æ”¶ç«¯è¿˜æœ‰å¤§é‡çš„æ•°æ® , ç¼“å†²çš„æ•°æ®è¿˜æ²¡æœ‰ç”¨å®Œ ,æ‰€ä»¥å½“receive lengthä¸º0çš„æ—¶å€™è¿˜ä¸èƒ½ç»“æŸ,ç»§ç»­åŠ æ¡ä»¶,è¦ç¼“å†²ä¹Ÿä¸º0. å¤§æ–‡ä»¶ä¼ è¾“è§£å†³ 1 ä¸‹è½½ : è€—æ—¶é—®é¢˜ ä¸ºäº†é¿å…å¾ˆå¤šæ—¶é—´å¡ä½, å½“çª—å£å¯åŠ¨çš„æ—¶å€™æ˜¯æœ‰ä¸€ä¸ªçº¿ç¨‹çš„,çº¿ç¨‹ä¸»è¦æ˜¯åšä¸€ä¸ªå¾ªç¯,è¿™ä¸ªå¾ªç¯å°±å«åšæ¶ˆæ¯å¾ªç¯,åŒ…æ‹¬ç‚¹å‡»æ–‡ä»¶ä¸‹è½½éƒ½æ˜¯æ¶ˆæ¯å¾ªç¯,å¦‚æœä¸‹è½½å‡½æ•°æ‰§è¡Œ3s,é‚£ä¹ˆæ•´ä¸ªæ¶ˆæ¯å¾ªç¯éƒ½ä¼šè¢«å¡ä½3s,ä¸€ç›´å¡ä½,åé¢çš„æ¶ˆæ¯å°±æ— æ³•å†å¤„ç†äº†, æ¯ä¸ªå¾ªç¯çš„å¼€å§‹é¦–å…ˆæ˜¯å–æ¶ˆæ¯,ç„¶åæ˜¯å¤„ç†æ¶ˆæ¯,ç„¶åç»§ç»­æŠ•é€’æ¶ˆæ¯,æ— é™åˆ¶çš„å»è½®å›, é•¿æ—¶é—´å¡ä½å°±ä¼šæ­»æ‰,æ‰€ä»¥ä¸ºä»€ä¹ˆè¦åŠ çº¿ç¨‹: å½“åˆå‘çš„æ—¶å€™,ä¼šå¦å¤–èµ·ä¸€ä¸ªçº¿ç¨‹å»è·‘3s,è€Œä¸»çº¿ç¨‹æ¶ˆæ¯å¾ªç¯å¹¶ä¸å—å½±å“ é‚£ä¹ˆåœ¨çº¿ç¨‹é‡Œé¢ä½¿ç”¨updatedataçš„æ—¶å€™,ä¸ºä»€ä¹ˆä¼šå´©æºƒå‘¢? å› ä¸ºæ˜¯åœ¨å­çº¿ç¨‹å»è°ƒç”¨çš„,å®ƒä¼šå»éªŒè¯æ˜¯ä¸æ˜¯ä¸€ä¸ªçº¿ç¨‹(æ˜¯ä¸æ˜¯ä¸€è‡´),æ–­è¨€,é˜²æ­¢å¤šçº¿ç¨‹å»æ›´æ”¹æ§ä»¶,æ‰€ä»¥å“¦æˆ‘ä»¬ä½¿ç”¨äº†sendmessage,ä¸ºä»€ä¹ˆå®ƒå¯ä»¥å‘¢? sendmessageçš„åŸåˆ™æ˜¯ ,æˆ‘æŠ•é€’ä¸€ä¸ªæ¶ˆæ¯,æŠ•é€’åˆ°ä¸»çº¿ç¨‹,ä¸»çº¿ç¨‹å»å¤„ç†,æ‰€ä»¥åœ¨çº¿ç¨‹æ ¡éªŒçš„æ—¶å€™ä¼šé€šè¿‡,ç„¶åç»™ä¸€ä¸ªè¿”å›å€¼, ä¸ä¼šå´©æ‰. 2 è‡ªå®šä¹‰æ¶ˆæ¯ : è‡ªå®šä¹‰æ¶ˆæ¯id , æ¯æ¬¡+1 , (è¿™æ˜¯windwosAPI) ,","categories":[{"name":"Project","slug":"Project","permalink":"https://blogs.leechee.top/categories/Project/"}],"tags":[{"name":"è®°å½•","slug":"è®°å½•","permalink":"https://blogs.leechee.top/tags/%E8%AE%B0%E5%BD%95/"},{"name":"é¡¹ç›®","slug":"é¡¹ç›®","permalink":"https://blogs.leechee.top/tags/%E9%A1%B9%E7%9B%AE/"},{"name":"å¿ƒå¾—","slug":"å¿ƒå¾—","permalink":"https://blogs.leechee.top/tags/%E5%BF%83%E5%BE%97/"}]},{"title":"åµŒå…¥å¼åŸºç¡€","slug":"åµŒå…¥å¼åŸºç¡€","date":"2021-02-01T15:21:13.000Z","updated":"2023-01-13T03:27:31.892Z","comments":true,"path":"posts/5c8c37e6/","link":"","permalink":"https://blogs.leechee.top/posts/5c8c37e6/","excerpt":"","text":"[TOC] é¢„è§ˆ: æ“ä½œ ``/etc/init.d/rcS` æ˜¯6ullå¼€å‘æ¿çš„å¼€æœºè„šæœ¬æ–‡ä»¶ echo &quot;7 4 1 7&quot; &gt; /proc/sys/kernel/printk å¼€å¯å†…æ ¸æ‰“å°ä¿¡æ¯ å¼€å‘æ¿æŒ‚è½½: mount -t nfs -o nolock,vers=3 192.168.2.125:/home/book/nfs_rootfs /mnt umount /mnt if busy NATçš„è¯: mount -t nfs -o nolock,vers=3,port=2049,mountport=9999 192.x.x.x:/home/book/nfs_rootfs /mnt mountå‘½ä»¤ç”¨æ¥æŒ‚è½½å„ç§æ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿåè®®åˆ°æŸä¸ªç›®å½•ä¸‹ã€‚ mountæˆåŠŸä¹‹åï¼Œå¼€å‘æ¿åœ¨/mntç›®å½•ä¸‹è¯»å†™æ–‡ä»¶æ—¶ï¼Œå®é™…ä¸Šè®¿é—®çš„å°±æ˜¯Ubuntuä¸­çš„/home/book/nfs_rootfsç›®å½•ï¼Œæ‰€ä»¥å¼€å‘æ¿å’ŒUbuntuä¹‹é—´é€šè¿‡NFSå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å…±äº«æ–‡ä»¶ã€‚ åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œåœ¨Ubuntuä¸­ç¼–è¯‘å¥½ç¨‹åºåæ”¾å…¥/home/book/nfs_rootfsç›®å½•ï¼Œå¼€å‘æ¿mount nfsåå°±å¯ä»¥ç›´æ¥ä½¿ç”¨/mntä¸‹çš„æ–‡ä»¶ã€‚ ç½‘ç»œ 123nmcli r wifi onnmcli dev wifinmcli dev wifi connect &quot;DRLyyds&quot; password &quot;19407010220&quot; ifname wlan0 å®˜æ–¹ 1234567891011121314151617181920212223242526ç§»é™¤GUI: mv /etc/init.d/S07hmi /root rebooté‡æ–°åŠ è½½é©±åŠ¨rmmod 8723bu.komodprobe 8723buç§»é™¤å…¶å®ƒæ§åˆ¶ps -ef | grep &quot;wpa&quot;292 root /usr/sbin/wpa_supplicant -ukill -9 292rm /etc/wpa_supplicant.conf3.æ‰§è¡Œwifié“¾æ¥æ“ä½œifconfig wlan0 upiw dev wlan0 scan |grep SSID//wpa_passphrase HUAWEI zihezihe &gt;&gt; /etc/wpa_supplicant.conf-/etc/wpa_supplicant.confctrl_interface=/var/run/wpa_supplicantctrl_interface_group=0update_config=1network=&#123; ssid=&quot;DRLyyds&quot; psk=&quot;19407010220&quot;&#125;-wpa_supplicant -B -iwlan0 -c /etc/wpa_supplicant.confiw wlan0 linkudhcpc -i wlan0ping -I wlan0 www.baidu.com è®¾ç½®äº¤å‰ç¼–è¯‘å·¥å…·é“¾: vim ~/.bashrc æ°¸ä¹…ç”Ÿæ•ˆ 123export ARCH=armexport CROSS_COMPILE=arm-buildroot-linux-gnueabihf-export PATH=$PATH:/home/book/100ask_imx6ull-sdk/ToolChain/arm-buildroot-linux-gnueabihf_sdk-buildroot/bin ä¸€äº›å‘½ä»¤ udhcpc : è·å–ip ç”¨ç½‘çº¿çš„æ—¶å€™ç”¨ makeä¹‹å, å¯ä»¥ä½¿ç”¨make menuconfigæ¥æŸ¥çœ‹å‘½ä»¤ çŠ¶å†µ ç„¶åmake 100ask_imx6ull_pro_ddr512m_systemV_qt5_defconfig make all ç¼–è¯‘æˆåŠŸåæ–‡ä»¶è¾“å‡ºè·¯å¾„ä¸º output/images 1234567891011121314151617181920212223buildroot2020.02.x â”œâ”€â”€ outputâ€‹ â”œâ”€â”€ images â€‹ â”œâ”€â”€ 100ask_imx6ull-14x14.dtb &lt;--è®¾å¤‡æ ‘æ–‡ä»¶ â€‹ â”œâ”€â”€ rootfs.ext2 &lt;--ext2æ ¼å¼æ ¹æ–‡ä»¶ç³»ç»Ÿâ€‹ â”œâ”€â”€ rootfs.ext4 -&gt; rootfs.ext2 &lt;--ext2æ ¼å¼æ ¹æ–‡ä»¶ç³»ç»Ÿ â€‹ â”œâ”€â”€ rootfs.tar â€‹ â”œâ”€â”€ rootfs.tar.bz2 &lt;--æ‰“åŒ…å¹¶å‹ç¼©çš„æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œç”¨äºNFSROOTå¯åŠ¨â€‹ â”œâ”€â”€ 100ask-imx6ull-pro-512d-systemv-v1.img &lt;--å®Œæ•´çš„ç³»ç»Ÿé•œåƒ(å¯ä»¥ç”¨æ¥çƒ§å†™emmcå’Œsdå¡)â€‹ â”œâ”€â”€ u-boot-dtb.imx &lt;--u-booté•œåƒâ€‹ â””â”€â”€ zImage &lt;--å†…æ ¸é•œåƒ çƒ§å†™è£¸æœºæ–‡ä»¶: imxæ˜¯çƒ§å†™EMMC, imgæ˜¯çƒ§å†™åˆ°sdCard parsec å…¥é—¨ Linuxå¯åŠ¨æµç¨‹ IMX6ULLå¯åŠ¨æµç¨‹ reset å¼€å‘æ¿å¤ä½å¯åŠ¨ -&gt; rom æ¿å­åªè¯»å†…å­˜ -&gt;åŠ è½½UBOOT å»åŠ è½½ ç¬¬ä¸€æ®µbootloaderå¼•å¯¼ç¨‹åº -&gt; ubooté‡Œæœ‰å¯åŠ¨å‚æ•°(ç¯å¢ƒå˜é‡)æ¥å¯åŠ¨kernel -&gt; kernel + dtb è®¾å¤‡æ ‘ -&gt; å¯åŠ¨Rootfs è·Ÿæ–‡ä»¶ç³»ç»Ÿ -&gt; app ä½¿ç”¨mountæŒ‚è½½ mount -t nfs -o nolock,vers=3 192.168.2.125:/home/book/nfs_rootfs /mnt mount -t nfs -o intr,nolock,rsize=1024,wsize=1024 192.168.2.125:/home/book/nfs_rootfs /mnt æŒ‚è½½ubuntuçš„nfsç›®å½•åˆ°å¼€å‘æ¿/mntç›®å½•ä¸‹ï¼ŒæŒ‚è½½æˆåŠŸåä½¿ç”¨df -hå‘½ä»¤æŸ¥çœ‹æ‰€æœ‰æŒ‚è½½ã€‚ ç¼–è¯‘å†…æ ¸é•œåƒ-è®¾å¤‡æ ‘ ç¼–è¯‘å†…æ ¸æ¨¡å—-&gt;nfsæŒ‚è½½-&gt;ä¼ è¾“åˆ°å¼€å‘æ¿ rebootå³å¯ä½¿ç”¨æ–°çš„ zImageé•œåƒ *.dtbè®¾å¤‡æ ‘ /lib/modulesæ¨¡å— ç¼–è¯‘UBOOT make distclean åˆ é™¤ä¹‹å‰ç¼“å­˜ -&gt; make mx6ull_14x14_evk_defconfig -&gt; make Linux shellä¼šå»ç¯å¢ƒå˜é‡è¯»å– å¯ä»¥é€šè¿‡echo SPATH æŸ¥çœ‹ ls: -l(long æ˜¾ç¤ºå®Œæ•´ä¿¡æ¯) -a(æ˜¾ç¤ºéšè—æ–‡ä»¶) -h(åˆ—å‡ºå¤§å°) cp: rï¼šrecursiveï¼Œé€’å½’åœ°ï¼Œå³å¤åˆ¶æ‰€æœ‰æ–‡ä»¶ fï¼šforceï¼Œå¼ºåˆ¶è¦†ç›– dï¼šå¦‚æœæºæ–‡ä»¶ä¸ºé“¾æ¥æ–‡ä»¶ï¼Œä¹Ÿåªæ˜¯æŠŠå®ƒä½œä¸ºé“¾æ¥æ–‡ä»¶å¤åˆ¶è¿‡å»ï¼Œè€Œä¸æ˜¯å¤åˆ¶å®é™…æ–‡ä»¶ rm: rï¼šrecursiveï¼Œé€’å½’åœ°ï¼Œå³åˆ é™¤æ‰€æœ‰æ–‡ä»¶ fï¼šforceï¼Œå¼ºåˆ¶åˆ é™¤ 12345678910111213141516171819chgrpï¼šæ”¹å˜æ–‡ä»¶æ‰€å±ç”¨æˆ·ç»„ -R : è¿›è¡Œé€’å½’çš„æŒç»­æ›´æ”¹ï¼Œä¹Ÿè¿åŒå­ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ã€ç›®å½•éƒ½æ›´æ–°æˆä¸ºè¿™ä¸ªç”¨æˆ·ç»„ä¹‹æ„ã€‚å¸¸å¸¸ç”¨åœ¨æ›´æ”¹ æŸä¸€ç›®å½•å†…æ‰€æœ‰æ–‡ä»¶çš„æƒ…å†µã€‚chownï¼šæ”¹å˜æ–‡ä»¶æ‰€æœ‰è€…chmodï¼šæ”¹å˜æ–‡ä»¶çš„æƒé™ r: 4æˆ–0 â‘¡ w: 2æˆ–0 â‘¢ x: 1æˆ–0 è¿™3ç§æƒé™çš„å–å€¼ç›¸åŠ åï¼Œå°±æ˜¯æƒé™çš„æ•°å­—è¡¨ç¤ºã€‚ ä¾‹å¦‚ï¼šæ–‡ä»¶açš„æƒé™ä¸ºâ€œ-rwxrwx---â€ï¼Œå®ƒçš„æ•°å€¼è¡¨ç¤ºä¸ºï¼š â‘  owner = rwx = 4+2+1 = 7 â‘¡ group = rwx = 4+2+1 = 7 â‘¢ others = --- = 0+0 +0 = 0 ä½¿ç”¨uã€gã€oä¸‰ä¸ªå­—æ¯ä»£è¡¨userã€groupã€others 3ä¸­èº«ä»½ã€‚æ­¤å¤–aä»£è¡¨allï¼Œå³æ‰€æœ‰èº«ä»½ã€‚ èŒƒä¾‹ï¼š chmod u=rwx,go=rx .bashrc ä¹Ÿå¯ä»¥å¢åŠ æˆ–å»é™¤æŸç§æƒé™ï¼Œâ€œ+â€è¡¨ç¤ºæ·»åŠ æƒé™ï¼Œâ€œ-â€è¡¨ç¤ºå»é™¤æƒé™ï¼š chmod a+w .bashrc chmod a-x .bashrc æŸ¥æ‰¾\\æœç´¢å‘½ä»¤ find find ç›®å½•å é€‰é¡¹ æŸ¥æ‰¾æ¡ä»¶ ç”¨æ¥æŸ¥æ‰¾æ–‡ä»¶ ä¾‹: find /home/book/dira/ -name &quot; test1.txt &quot; ! - æŸ¥æ‰¾æœ€è¿‘å‡ å¤©(å‡ ä¸ªå°æ—¶)ä¹‹å†…(ä¹‹å‰)æœ‰å˜åŠ¨çš„æ–‡ä»¶ $ find /home/book -mtime -2 //æŸ¥æ‰¾/homeç›®å½•ä¸‹ä¸¤å¤©å†…æœ‰å˜åŠ¨çš„æ–‡ä»¶ã€‚ grep grepå‘½ä»¤çš„ä½œç”¨æ˜¯æŸ¥æ‰¾æ–‡ä»¶ä¸­ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š grep [é€‰é¡¹] [æŸ¥æ‰¾æ¨¡å¼] [æ–‡ä»¶å] grep -rn &quot;å­—ç¬¦ä¸²&quot; æ–‡ä»¶å r(recursive)ï¼šé€’å½’æŸ¥æ‰¾ n(number)ï¼šæ˜¾ç¤ºç›®æ ‡ä½ç½®çš„è¡Œå· å¯ä»¥åŠ å…¥-wå…¨å­—åŒ¹é…ã€‚ 1234å¯ä»¥åœ¨grepçš„ç»“æœä¸­å†æ¬¡æ‰§è¡Œgrepæœç´¢ï¼Œæ¯”å¦‚æœç´¢åŒ…å«æœ‰ABCçš„å¤´æ–‡ä»¶ï¼Œå¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š$ grep â€œABCâ€ * -nR | grep â€œ\\.hâ€ä¸Šè¿°å‘½ä»¤æŠŠç¬¬1ä¸ªå‘½ä»¤â€œgrep â€œABCâ€ * -nRâ€é€šè¿‡ç®¡é“ä¼ ç»™ç¬¬2ä¸ªå‘½ä»¤ã€‚å³ç¬¬2ä¸ªå‘½ä»¤åœ¨ç¬¬1ä¸ªå‘½ä»¤çš„ç»“æœä¸­æœç´¢ã€‚ vi å­¦ä¹ è§ -&gt; æ—¥å¸¸æŠ€å·§ æŸ¥æ‰¾å‘½ä»¤æˆ–åº”ç”¨ç¨‹åºçš„æ‰€åœ¨ä½ç½® which pwd //å®šä½åˆ°/bin/pwd whereis pwd //å¯å¾—åˆ°å¯æ‰§è¡Œç¨‹åºçš„ä½ç½®å’Œæ‰‹å†Œé¡µçš„ä½ç½® GCC GCC ç¼–è¯‘é€‰é¡¹ å¸¸ç”¨é€‰é¡¹ æè¿° -E é¢„å¤„ç†ï¼Œå¼€å‘è¿‡ç¨‹ä¸­æƒ³å¿«é€Ÿç¡®å®šæŸä¸ªå®å¯ä»¥ä½¿ç”¨â€œ-E -dMâ€ -c æŠŠé¢„å¤„ç†ã€ç¼–è¯‘ã€æ±‡ç¼–éƒ½åšäº†ï¼Œä½†æ˜¯ä¸é“¾æ¥ -o æŒ‡å®šè¾“å‡ºæ–‡ä»¶ -I æŒ‡å®šå¤´æ–‡ä»¶ç›®å½• -L æŒ‡å®šé“¾æ¥æ—¶åº“æ–‡ä»¶ç›®å½• -l æŒ‡å®šé“¾æ¥å“ªä¸€ä¸ªåº“æ–‡ä»¶ å…¶ä»–æœ‰ç”¨çš„é€‰é¡¹: 12345gcc -E main.c // æŸ¥çœ‹é¢„å¤„ç†ç»“æœï¼Œæ¯”å¦‚å¤´æ–‡ä»¶æ˜¯å“ªä¸ªgcc -E -dM main.c &gt; 1.txt // æŠŠæ‰€æœ‰çš„å®å±•å¼€ï¼Œå­˜åœ¨1.txté‡Œgcc -Wp,-MD,abc.dep -c -o main.o main.c // ç”Ÿæˆä¾èµ–æ–‡ä»¶abc.depï¼Œåé¢Makefileä¼šç”¨echo &#x27;main()&#123;&#125;&#x27;| gcc -E -v - // å®ƒä¼šåˆ—å‡ºå¤´æ–‡ä»¶ç›®å½•ã€åº“ç›®å½•(LIBRARY_PATH) åˆ¶ä½œ, ä½¿ç”¨åŠ¨æ€åº“ | é™æ€åº“ 123456789101112131415161718192021åŠ¨æ€åº“:åˆ¶ä½œã€ç¼–è¯‘ï¼šgcc -c -o main.o main.cgcc -c -o sub.o sub.cgcc -shared -o libsub.so sub.o sub2.o sub3.o(å¯ä»¥ä½¿ç”¨å¤šä¸ª.oç”ŸæˆåŠ¨æ€åº“)gcc -o test main.o -lsub -L /libsub.so/æ‰€åœ¨ç›®å½•/è¿è¡Œï¼šâ‘  å…ˆæŠŠlibsub.soæ”¾åˆ°Ubuntuçš„/libç›®å½•ï¼Œç„¶åå°±å¯ä»¥è¿è¡Œtestç¨‹åºã€‚â‘¡ å¦‚æœä¸æƒ³æŠŠlibsub.soæ”¾åˆ°/libï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨æŸä¸ªç›®å½•æ¯”å¦‚/aï¼Œç„¶åå¦‚ä¸‹æ‰§è¡Œï¼šexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/a ./testé™æ€åº“:gcc -c -o main.o main.cgcc -c -o sub.o sub.car crs libsub.a sub.o sub2.o sub3.o(å¯ä»¥ä½¿ç”¨å¤šä¸ª.oç”Ÿæˆé™æ€åº“)gcc -o test main.o libsub.a (å¦‚æœ.aä¸åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œéœ€è¦æŒ‡å®šå®ƒçš„ç»å¯¹æˆ–ç›¸å¯¹è·¯å¾„)è¿è¡Œï¼šä¸éœ€è¦æŠŠé™æ€åº“libsub.aæ”¾åˆ°æ¿å­ä¸Šã€‚æ³¨æ„:æ‰§è¡Œarm-linux-gnueabihf-gcc -c -o sub.o sub.cäº¤å‰ç¼–è¯‘éœ€è¦åœ¨æœ€åé¢åŠ ä¸Š -fPICå‚æ•°ã€‚ GCCç¼–è¯‘è¿‡ç¨‹ ï¼ˆ1ï¼‰é¢„å¤„ç† C/C++æºæ–‡ä»¶ä¸­ï¼Œä»¥â€œ#â€å¼€å¤´çš„å‘½ä»¤è¢«ç§°ä¸ºé¢„å¤„ç†å‘½ä»¤ï¼Œå¦‚åŒ…å«å‘½ä»¤â€œ#includeâ€ã€å®å®šä¹‰å‘½ä»¤â€œ#defineâ€ã€æ¡ä»¶ç¼–è¯‘å‘½ä»¤â€œ#ifâ€ã€â€œ#ifdefâ€ç­‰ã€‚é¢„å¤„ç†å°±æ˜¯å°†è¦åŒ…å«(include)çš„æ–‡ä»¶æ’å…¥åŸæ–‡ä»¶ä¸­ã€å°†å®å®šä¹‰å±•å¼€ã€æ ¹æ®æ¡ä»¶ç¼–è¯‘å‘½ä»¤é€‰æ‹©è¦ä½¿ç”¨çš„ä»£ç ï¼Œæœ€åå°†è¿™äº›ä¸œè¥¿è¾“å‡ºåˆ°ä¸€ä¸ªâ€œ.iâ€æ–‡ä»¶ä¸­ç­‰å¾…è¿›ä¸€æ­¥å¤„ç†ã€‚ ï¼ˆ2ï¼‰ç¼–è¯‘ ç¼–è¯‘å°±æ˜¯æŠŠC/C++ä»£ç (æ¯”å¦‚ä¸Šè¿°çš„â€œ.iâ€æ–‡ä»¶)â€œç¿»è¯‘â€æˆæ±‡ç¼–ä»£ç ï¼Œæ‰€ç”¨åˆ°çš„å·¥å…·ä¸ºcc1(å®ƒçš„åå­—å°±æ˜¯cc1ï¼Œx86æœ‰è‡ªå·±çš„cc1å‘½ä»¤ï¼ŒARMæ¿ä¹Ÿæœ‰è‡ªå·±çš„cc1å‘½ä»¤)ã€‚ ï¼ˆ3ï¼‰æ±‡ç¼– æ±‡ç¼–å°±æ˜¯å°†ç¬¬äºŒæ­¥è¾“å‡ºçš„æ±‡ç¼–ä»£ç ç¿»è¯‘æˆç¬¦åˆä¸€å®šæ ¼å¼çš„æœºå™¨ä»£ç ï¼Œåœ¨Linuxç³»ç»Ÿä¸Šä¸€èˆ¬è¡¨ç°ä¸ºELFç›®æ ‡æ–‡ä»¶(OBJæ–‡ä»¶)ï¼Œç”¨åˆ°çš„å·¥å…·ä¸ºasã€‚x86æœ‰è‡ªå·±çš„aså‘½ä»¤ï¼ŒARMç‰ˆä¹Ÿæœ‰è‡ªå·±çš„aså‘½ä»¤ï¼Œä¹Ÿå¯èƒ½æ˜¯xxxx-asï¼ˆæ¯”å¦‚arm-linux-asï¼‰ã€‚ â€œåæ±‡ç¼–â€æ˜¯æŒ‡å°†æœºå™¨ä»£ç è½¬æ¢ä¸ºæ±‡ç¼–ä»£ç ï¼Œè¿™åœ¨è°ƒè¯•ç¨‹åºæ—¶å¸¸å¸¸ç”¨åˆ°ã€‚ ï¼ˆ4ï¼‰é“¾æ¥ é“¾æ¥å°±æ˜¯å°†ä¸Šæ­¥ç”Ÿæˆçš„OBJæ–‡ä»¶å’Œç³»ç»Ÿåº“çš„OBJæ–‡ä»¶ã€åº“æ–‡ä»¶é“¾æ¥èµ·æ¥ï¼Œæœ€ç»ˆç”Ÿæˆäº†å¯ä»¥åœ¨ç‰¹å®šå¹³å°è¿è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç”¨åˆ°çš„å·¥å…·ä¸ºldæˆ–collect2ã€‚ ç¼–è¯‘è¿‡ç¨‹å¸¸ç”¨é€‰é¡¹: å¸¸ç”¨é€‰é¡¹ æè¿° -E é¢„å¤„ç†ï¼Œå¼€å‘è¿‡ç¨‹ä¸­æƒ³å¿«é€Ÿç¡®å®šæŸä¸ªå®å¯ä»¥ä½¿ç”¨â€œ-E -dMâ€ -c æŠŠé¢„å¤„ç†ã€ç¼–è¯‘ã€æ±‡ç¼–éƒ½åšäº†ï¼Œä½†æ˜¯ä¸é“¾æ¥ -o æŒ‡å®šè¾“å‡ºæ–‡ä»¶ -I æŒ‡å®šå¤´æ–‡ä»¶ç›®å½• -L æŒ‡å®šé“¾æ¥æ—¶åº“æ–‡ä»¶ç›®å½• -l æŒ‡å®šé“¾æ¥å“ªä¸€ä¸ªåº“æ–‡ä»¶ æ€»ä½“é€‰é¡¹ ï¼ˆ1ï¼‰-c é¢„å¤„ç†ã€ç¼–è¯‘å’Œæ±‡ç¼–æºæ–‡ä»¶ï¼Œä½†æ˜¯ä¸ä½œé“¾æ¥ï¼Œç¼–è¯‘å™¨æ ¹æ®æºæ–‡ä»¶ç”ŸæˆOBJæ–‡ä»¶ã€‚ç¼ºçœæƒ…å†µä¸‹ï¼ŒGCCé€šè¿‡ç”¨â€™.oâ€™æ›¿æ¢æºæ–‡ä»¶åçš„åç¼€â€™.câ€™ï¼Œâ€˜.iâ€™ï¼Œ`.sâ€™ç­‰ï¼Œäº§ç”ŸOBJæ–‡ä»¶åã€‚å¯ä»¥ä½¿ç”¨-oé€‰é¡¹é€‰æ‹©å…¶ä»–åå­—ã€‚GCCå¿½ç•¥-cé€‰é¡¹åé¢ä»»ä½•æ— æ³•è¯†åˆ«çš„è¾“å…¥æ–‡ä»¶ã€‚ ï¼ˆ2ï¼‰-S ç¼–è¯‘åå³åœæ­¢ï¼Œä¸è¿›è¡Œæ±‡ç¼–ã€‚å¯¹äºæ¯ä¸ªè¾“å…¥çš„éæ±‡ç¼–è¯­è¨€æ–‡ä»¶ï¼Œè¾“å‡ºç»“æœæ˜¯æ±‡ç¼–è¯­è¨€æ–‡ä»¶ã€‚ç¼ºçœæƒ…å†µä¸‹ï¼ŒGCCé€šè¿‡ç”¨`.sâ€™æ›¿æ¢æºæ–‡ä»¶ååç¼€ â€˜.câ€™ï¼Œ'.iâ€™ç­‰ç­‰ï¼Œäº§ç”Ÿæ±‡ç¼–æ–‡ä»¶åã€‚å¯ä»¥ä½¿ç”¨-oé€‰é¡¹é€‰æ‹©å…¶ä»–åå­—ã€‚GCCå¿½ç•¥ä»»ä½•ä¸éœ€è¦æ±‡ç¼–çš„è¾“å…¥æ–‡ä»¶ã€‚ ï¼ˆ3ï¼‰-E é¢„å¤„ç†åå³åœæ­¢ï¼Œä¸è¿›è¡Œç¼–è¯‘ã€‚é¢„å¤„ç†åçš„ä»£ç é€å¾€æ ‡å‡†è¾“å‡ºã€‚ ï¼ˆ4ï¼‰-o file æŒ‡å®šè¾“å‡ºæ–‡ä»¶ä¸ºfileã€‚æ— è®ºæ˜¯é¢„å¤„ç†ã€ç¼–è¯‘ã€æ±‡ç¼–è¿˜æ˜¯é“¾æ¥ï¼Œè¿™ä¸ªé€‰é¡¹éƒ½å¯ä»¥ä½¿ç”¨ã€‚å¦‚æœæ²¡æœ‰ä½¿ç”¨-o é€‰é¡¹ï¼Œé»˜è®¤çš„è¾“å‡ºç»“æœæ˜¯ï¼šå¯æ‰§è¡Œæ–‡ä»¶ä¸ºa.outï¼›ä¿®æ”¹è¾“å…¥æ–‡ä»¶çš„åç§°æ˜¯source.suffixï¼Œåˆ™å®ƒçš„OBJæ–‡ä»¶æ˜¯source.oï¼Œæ±‡ç¼–æ–‡ä»¶æ˜¯ source.sï¼Œè€Œé¢„å¤„ç†åçš„Cæºä»£ç é€å¾€æ ‡å‡†è¾“å‡ºã€‚ ï¼ˆ5ï¼‰-v æ˜¾ç¤ºåˆ¶ä½œGCCå·¥å…·è‡ªèº«æ—¶çš„é…ç½®å‘½ä»¤ï¼›åŒæ—¶æ˜¾ç¤ºç¼–è¯‘å™¨é©±åŠ¨ç¨‹åºã€é¢„å¤„ç†å™¨ã€ç¼–è¯‘å™¨çš„ç‰ˆæœ¬å·ã€‚ Makefile demo: 1234hello: hello.cgcc -o hello hello.cclean:rm -f hello å®Œå–„Makefile 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253ç¬¬1ä¸ªMakefileï¼Œç®€å•ç²—æš´ï¼Œæ•ˆç‡ä½ï¼štest : main.c sub.c sub.h gcc -o test main.c sub.cç¬¬2ä¸ªMakefileï¼Œæ•ˆç‡é«˜ï¼Œç›¸ä¼¼è§„åˆ™å¤ªå¤šå¤ªå•°å—¦ï¼Œä¸æ”¯æŒæ£€æµ‹å¤´æ–‡ä»¶ï¼štest : main.o sub.o gcc -o test main.o sub.omain.o : main.c gcc -c -o main.o main.csub.o : sub.c gcc -c -o sub.o sub.c clean: rm *.o test -fç¬¬3ä¸ªMakefileï¼Œæ•ˆç‡é«˜ï¼Œç²¾ç‚¼ï¼Œä¸æ”¯æŒæ£€æµ‹å¤´æ–‡ä»¶ï¼štest : main.o sub.o gcc -o test main.o sub.o%.o : %.c //%æ˜¯é€šé…ç¬¦ gcc -c -o $@ $&lt;clean: rm *.o test -fç¬¬4ä¸ªMakefileï¼Œæ•ˆç‡é«˜ï¼Œç²¾ç‚¼ï¼Œæ”¯æŒæ£€æµ‹å¤´æ–‡ä»¶(ä½†æ˜¯éœ€è¦æ‰‹å·¥æ·»åŠ å¤´æ–‡ä»¶è§„åˆ™)ï¼štest : main.o sub.o gcc -o test main.o sub.o%.o : %.c gcc -c -o $@(ä»£è¡¨ç›®æ ‡æ–‡ä»¶) $&lt;(ä»£è¡¨ç¬¬ä¸€ä¸ªä¾èµ–)sub.o : sub.hclean: rm *.o test -fç¬¬5ä¸ªMakefileï¼Œæ•ˆç‡é«˜ï¼Œç²¾ç‚¼ï¼Œæ”¯æŒè‡ªåŠ¨æ£€æµ‹å¤´æ–‡ä»¶ï¼šobjs := main.o sub.otest : $(objs) gcc -o test $^(è¡¨ç¤ºæ‰€æœ‰çš„ä¾èµ–)# éœ€è¦åˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¾èµ–æ–‡ä»¶# .main.o.d .sub.o.ddep_files(ä¾èµ–æ–‡ä»¶) := $(foreach f, $(objs), .$(f).d)dep_files := $(wildcard $(dep_files))# æŠŠä¾èµ–æ–‡ä»¶åŒ…å«è¿›æ¥ifneq ($(dep_files),) (å¦‚æœè¿™ä¸ªå˜é‡ä¸ç­‰äºç©º) include $(dep_files)endif%.o : %.c gcc -Wp,-MD,.$@.d -c -o $@ $&lt;clean: rm *.o test -fdistclean: rm $(dep_files) *.o test -f ----CFLAGS(ç¼–è¯‘å‚æ•°) = -Werr (æŠŠæ‰€æœ‰è­¦å‘Šéƒ½å½“ä½œé”™è¯¯) -I(æŒ‡å®šå¤´æ–‡ä»¶ç›®å½•) . -Iinclude(é»˜è®¤å¤´æ–‡ä»¶ç›®å½•) **å‡æƒ³ç›®æ ‡ : ** .PHONY **å³æ—¶å˜é‡ å»¶æ—¶å˜é‡ : ** export A := xxx å®šä¹‰æ—¶å°±ç¡®å®š B = xxx ä½¿ç”¨æ—¶æ‰ç¡®å®š ?= å»¶æ—¶å˜é‡ åªæœ‰åœ¨ç¬¬ä¸€æ¬¡å®šä¹‰æ‰èµ·æ•ˆ += æ˜¯å³æ—¶è¿˜æ˜¯å»¶æ—¶å–å†³äºå‰é¢çš„å®šä¹‰ å‡½æ•° 1234ç›®æ ‡(target)â€¦: ä¾èµ–(prerequiries)â€¦&lt;tab&gt;å‘½ä»¤(command)å¦‚æœâ€œä¾èµ–æ–‡ä»¶â€æ¯”â€œç›®æ ‡æ–‡ä»¶â€æ›´åŠ æ–°ï¼Œé‚£ä¹ˆæ‰§è¡Œâ€œå‘½ä»¤â€æ¥é‡æ–°ç”Ÿæˆâ€œç›®æ ‡æ–‡ä»¶â€ã€‚å‘½ä»¤è¢«æ‰§è¡Œçš„2ä¸ªæ¡ä»¶ï¼šä¾èµ–æ–‡ä»¶æ¯”ç›®æ ‡æ–‡ä»¶æ–°ï¼Œæˆ–æ˜¯ ç›®æ ‡æ–‡ä»¶è¿˜æ²¡ç”Ÿæˆã€‚ $(foreach var,list,text) å¯¹listä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œå–å‡ºæ¥èµ‹ç»™varï¼Œç„¶åæŠŠvaræ”¹ä¸ºtextæ‰€æè¿°çš„å½¢å¼ã€‚ 123ä¾‹å­ï¼šobjs := a.o b.odep_files := $(foreach f, $(objs), .$(f).d) // æœ€ç»ˆ dep_files := .a.o.d .b.o.d $(wildcard pattern) patternæ‰€åˆ—å‡ºçš„æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼ŒæŠŠå­˜åœ¨çš„æ–‡ä»¶éƒ½åˆ—å‡ºæ¥ã€‚ 12ä¾‹å­ï¼šsrc_files := $( wildcard *.c) // æœ€ç»ˆ src_filesä¸­åˆ—å‡ºäº†å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰.cæ–‡ä»¶ $(filter pattern..., text) $(filter-out pattern..., text) åœ¨textä¸­å–å‡ºç¬¦åˆpattenæ ¼å¼çš„å€¼ (ä¸ç¬¦åˆ) $(patsubst pattern, replacement, $(var)) ä»åˆ—è¡¨ä¸­å–å‡ºæ¯ä¸€ä¸ªå€¼, å¦‚æœç¬¦åˆpattern, åˆ™æ›¿æ¢ä¸ºreplacement gcc -M c.c æ‰“å°å‡ºä¾èµ– gcc -M -MF c.d c.c æŠŠä¾èµ–å†™å…¥æ–‡ä»¶c.d gcc -c -o c.o c.c -MD -MF c.d ç¼–è¯‘c.o, æŠŠä¾èµ–å†™å…¥æ–‡ä»¶c.d é€šç”¨Makefileä½¿ç”¨ ç›®å½•: D:\\imx6ull\\01_all_series_quickstart\\04_åµŒå…¥å¼Linuxåº”ç”¨å¼€å‘åŸºç¡€çŸ¥è¯†\\source\\05_general_Makefile\\Makefile_and_readme å¾…è¡¥å…… æ–‡ä»¶IO å¦‚æœè¦è®¿é—®çœŸå®çš„æ–‡ä»¶(SDå¡ ç­‰ç­‰) éœ€è¦æŒ‚è½½ å¯ä»¥ cat /proc/mounts çœ‹æ˜¯å¦è‡ªåŠ¨æŒ‚è½½ ä½¿ç”¨mount /dev/sda1 /mnt æ¥æ‰‹åŠ¨æŒ‚è½½åˆ°mntç›®å½•ä¸‹ æœ‰äº›æ–‡ä»¶æ˜¯è™šæ‹Ÿçš„,Linuxå†…æ ¸æä¾›è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ,æ ¹æ®è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿé‡Œé¢çš„æ–‡ä»¶å¯ä»¥æŸ¥çœ‹å†…æ ¸çš„ä¸€äº›ä¿¡æ¯/sys å…¶ä»–ä¸ºé©±åŠ¨æ–‡ä»¶, é€šè¿‡å‡½æ•°å»ç›´æ¥æ“ä½œç¡¬ä»¶ åœ¨Linuxå†…æ ¸æœ‰ä¿©ç§é©±åŠ¨,å­—ç¬¦è®¾å¤‡é©±åŠ¨â€™câ€™(ls -al ç¬¬ä¸€ä¸ªå­—æ¯) å—è®¾å¤‡â€™bâ€™ ä¸»è®¾å¤‡å· æ¬¡è®¾å¤‡å· (é€šè¿‡è¿™äº›æ¥ç¡®å®šåˆ°åº•æ˜¯å“ªä¸€ä¸ªé©±åŠ¨ å“ªä¸€ä¸ªç¡¬ä»¶) ä¸æ˜¯é€šç”¨çš„å‡½æ•°ï¼šioctl/mmap ä¿©ä¸ªå¤åˆ¶æ–‡ä»¶çš„demo: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135è¿™ä¸ªæ˜¯ç”¨ write / read æ–¹å¼ 02 #include &lt;sys/types.h&gt;03 #include &lt;sys/stat.h&gt;04 #include &lt;fcntl.h&gt;05 #include &lt;unistd.h&gt;06 #include &lt;stdio.h&gt;0708 /*09 * ./copy 1.txt 2.txt10 * argc = 311 * argv[0] = &quot;./copy&quot;12 * argv[1] = &quot;1.txt&quot;13 * argv[2] = &quot;2.txt&quot;14 */15 int main(int argc, char **argv)16 &#123;17 int fd_old, fd_new;18 char buf[1024];19 int len;2021 /* 1. åˆ¤æ–­å‚æ•° */22 if (argc != 3)23 &#123;24 printf(&quot;Usage: %s &lt;old-file&gt; &lt;new-file&gt;\\n&quot;, argv[0]);25 return -1;26 &#125;2728 /* 2. æ‰“å¼€è€æ–‡ä»¶ */29 fd_old = open(argv[1], O_RDONLY);30 if (fd_old == -1)31 &#123;32 printf(&quot;can not open file %s\\n&quot;, argv[1]);33 return -1;34 &#125;3536 /* 3. åˆ›å»ºæ–°æ–‡ä»¶ */37 fd_new = open(argv[2], O_WRONLY | O_CREAT | O_TRUNC, S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP | S_IROTH | S_IWOTH);38 if (fd_new == -1)39 &#123;40 printf(&quot;can not creat file %s\\n&quot;, argv[2]);41 return -1;42 &#125;4344 /* 4. å¾ªç¯ï¼š è¯»è€æ–‡ä»¶-å†™æ–°æ–‡ä»¶ */45 while ((len = read(fd_old, buf, 1024)) &gt; 0)46 &#123;47 if (write(fd_new, buf, len) != len)48 &#123;49 printf(&quot;can not write %s\\n&quot;, argv[2]);50 return -1;51 &#125;52 &#125;5354 /* 5. å…³é—­æ–‡ä»¶ */55 close(fd_old);56 close(fd_new);5758 return 0;59 &#125;è¿™ä¸ªä½¿ç”¨ mmapæ–¹å¼02 #include &lt;sys/types.h&gt;03 #include &lt;sys/stat.h&gt;04 #include &lt;fcntl.h&gt;05 #include &lt;unistd.h&gt;06 #include &lt;stdio.h&gt;07 #include &lt;sys/mman.h&gt;0809 /*10 * ./copy 1.txt 2.txt11 * argc = 312 * argv[0] = &quot;./copy&quot;13 * argv[1] = &quot;1.txt&quot;14 * argv[2] = &quot;2.txt&quot;15 */16 int main(int argc, char **argv)17 &#123;18 int fd_old, fd_new;19 struct stat stat;20 char *buf;2122 /* 1. åˆ¤æ–­å‚æ•° */23 if (argc != 3)24 &#123;25 printf(&quot;Usage: %s &lt;old-file&gt; &lt;new-file&gt;\\n&quot;, argv[0]);26 return -1;27 &#125;2829 /* 2. æ‰“å¼€è€æ–‡ä»¶ */30 fd_old = open(argv[1], O_RDONLY);31 if (fd_old == -1)32 &#123;33 printf(&quot;can not open file %s\\n&quot;, argv[1]);34 return -1;35 &#125;3637 /* 3. ç¡®å®šè€æ–‡ä»¶çš„å¤§å° */38 if (fstat(fd_old, &amp;stat) == -1)39 &#123;40 printf(&quot;can not get stat of file %s\\n&quot;, argv[1]);41 return -1;42 &#125;4344 /* 4. æ˜ å°„è€æ–‡ä»¶ */45 buf = mmap(NULL, stat.st_size, PROT_READ, MAP_SHARED, fd_old, 0);46 if (buf == MAP_FAILED)47 &#123;48 printf(&quot;can not mmap file %s\\n&quot;, argv[1]);49 return -1;50 &#125;5152 /* 5. åˆ›å»ºæ–°æ–‡ä»¶ */53 fd_new = open(argv[2], O_WRONLY | O_CREAT | O_TRUNC, S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP | S_IROTH | S_IWOTH);54 if (fd_new == -1)55 &#123;56 printf(&quot;can not creat file %s\\n&quot;, argv[2]);57 return -1;58 &#125;5960 /* 6. å†™æ–°æ–‡ä»¶ */61 if (write(fd_new, buf, stat.st_size) != stat.st_size)62 &#123;63 printf(&quot;can not write %s\\n&quot;, argv[2]);64 return -1;65 &#125;6667 /* 5. å…³é—­æ–‡ä»¶ */68 close(fd_old);69 close(fd_new);7071 return 0;72 &#125; ç³»ç»Ÿè°ƒç”¨å‡½æ•°æ€ä¹ˆè¿›å…¥å†…æ ¸? åº”ç”¨ç¨‹åºé€šè¿‡ open/read/write è¿›è€Œå»è®¿é—®è®¾å¤‡ã€æ–‡ä»¶ã€‚ è¿›å…¥åˆ°å†…æ ¸kernel, å¯¹äºæ™®é€šæ–‡ä»¶,ä¼šä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿå»è¯»å–å¯¹åº”çš„ç£ç›˜, å¯¹äºç¡¬ä»¶, ä¼šå»æ‰¾åˆ°å†…æ ¸ä¸­å¯¹åº”çš„é©±åŠ¨ç¨‹åºè°ƒç”¨ç›¸å…³çš„ç¨‹åº è°ƒç”¨è¿‡ç¨‹ è¿™äº›å…³äºæ–‡ä»¶çš„å‡½æ•°ä¸€èˆ¬æ˜¯ç”±glibcæä¾›çš„,ä»¥åŠå…¶ä»–ä¸åŒç‰ˆæœ¬çš„Cåº“(ucibc), openè¿™äº›è¦å»æ‰“å¼€æ–‡ä»¶éœ€è¦ä¾èµ–æ“ä½œç³»ç»Ÿæä¾›çš„åŠŸèƒ½(æ€ä¹ˆè¿›å…¥Linuxå†…æ ¸), å¯ä»¥æŠŠå†…æ ¸å½“ä½œå¦å¤–ä¸€ä¸ªAPP , è¿™ä¸ªappä¸èƒ½å»è°ƒç”¨å¦å¤–ä¸€ä¸ªappé‡Œé¢çš„å‡½æ•° openå‡½æ•°é‡Œé¢ä¼šæ”¾ä¸€æ¡æŒ‡ä»¤, æ¯”å¦‚åœ¨32ä¸ºcpu,ä¼šä½¿ç”¨swiæŒ‡ä»¤, å¯¹äº64ä½cpu, ä½¿ç”¨svcæŒ‡ä»¤, ä¸€æ—¦æ‰§è¡Œè¿™äº›æŒ‡ä»¤, å°±ä¼šè§¦å‘CPUçš„å¼‚å¸¸, ä¼šå¯¼è‡´CPUè·³åˆ°æŸä¸ªåœ°å€é‡Œé¢å»æ‰§è¡Œç³»ç»Ÿé‡Œé¢çš„ä»£ç , è¿™æ—¶å€™æ“ä½œç³»ç»Ÿå°±ä¼šå»æ‰§è¡Œå¯¹åº”çš„sys_open sys_readå‡½æ•°, å¯¹äºread , write å‡½æ•°ä¹Ÿæ˜¯å¦‚æ­¤. é‚£ä¹ˆå®ƒæ€ä¹ˆçŸ¥é“appè§¦å‘è¿™ä¸ªå¼‚å¸¸æ˜¯ä¸ºäº†å»è°ƒç”¨sys_openæˆ–è€…æ˜¯sys_read, glibcåœ¨å®ç°sysè¿™äº›ç³»ç»Ÿè°ƒç”¨çš„æ—¶å€™, ä¼šä½¿ç”¨è¿™äº›å‘½ä»¤(swiç­‰)æ¥è§¦å‘å¼‚å¸¸, å¹¶ä¸”ä¼ å…¥ä¸åŒçš„å‚æ•°ç»™å†…æ ¸, å†…æ ¸æ ¹æ®ä¸åŒçš„å‚æ•°æ¥åˆ†è¾¨æ˜¯æƒ³è°ƒç”¨å“ªä¸ª glibcé‡Œé¢æ€ä¹ˆä¼ é€’å‚æ•°ç»™å†…æ ¸å‘¢? æœ€å¼€å§‹ç”¨çš„old abi äºŒè¿›åˆ¶æ¥å£(è€çš„API), åœ¨æ‰§è¡ŒswiæŒ‡ä»¤çš„æ—¶å€™å¯ä»¥åœ¨è¿™æ¡æŒ‡ä»¤åé¢è·Ÿä¸€ä¸ªæ•°å€¼, å†…æ ¸æ‰§è¡Œè¿™ä¸ªswiçš„å¼‚å¸¸å¤„ç†å‡½æ•°æ—¶ä¼šæŠŠåé¢çš„æ•°å€¼å–å‡ºæ¥, æ ¹æ®é‡Œé¢çš„å€¼çŸ¥é“è¦å»è°ƒç”¨ä»€ä¹ˆå‡½æ•°. åæ¥åˆæœ‰æ”¹è¿›,ä½¿ç”¨EABI, ä¸åœ¨swié‡Œé¢ä¼ å‚æ•°äº†, å®ƒäº‹å…ˆåœ¨ R7 å¯„å­˜å™¨(æ±‡ç¼–) é‡Œé¢å­˜å…¥é‚£äº›å€¼, å½“å‘ç”Ÿå¼‚å¸¸çš„æ—¶å€™,å†…æ ¸ä¼šå»R7å¯„å­˜å™¨å¾—åˆ°è¿™äº›å€¼, è¿›è€Œå¾—åˆ°å»æ‰§è¡Œsysçš„ä»€ä¹ˆå‡½æ•° å¯¹äº64ä½,ä½¿ç”¨svcæŒ‡ä»¤, é€šè¿‡X8å¯„å­˜å™¨ä¼ å…¥, å†…æ ¸é‡Œé¢æœ‰ä¸€ä¸ªç³»ç»Ÿå‡½æ•°è°ƒç”¨æŒ‡é’ˆæ•°ç»„, sys_call_tableå†…æ ¸æŠŠåº“å‡½æ•°ä¼ è¿›æ¥çš„å€¼å¤„ç†ä¹‹å, ç”¨è¿™ä¸ªå€¼ä½œä¸ºä¸‹æ ‡, åœ¨è¿™ä¸ªæ•°ç»„é‡Œé¢å¯¹åº”çš„å‡½æ•°.(é˜…è¯»glibcçš„æºç ,å†…æ ¸æºç ) appè°ƒç”¨openreadå¯¼è‡´å†…æ ¸çš„sys_openreadè¢«è°ƒç”¨,é‚£ä¹ˆå†…æ ¸çš„sys_openreadä¼šåšä»€ä¹ˆäº‹æƒ…å‘¢ Linuxè½¯ä»¶æ¶æ„ åœ¨linuxç³»ç»Ÿè½¯ä»¶æ¶æ„å¯ä»¥åˆ†ä¸º4ä¸ªå±‚æ¬¡ï¼ˆä»ä½åˆ°é«˜åˆ†åˆ«ä¸ºï¼‰ï¼š 1.å¼•å¯¼åŠ è½½ç¨‹åº â€‹ å¼•å¯¼åŠ è½½ç¨‹åºï¼ˆBootloaderï¼‰æ˜¯å›ºåŒ–åœ¨ç¡¬ä»¶Flashä¸­çš„ä¸€æ®µå¼•å¯¼ä»£ç ï¼Œç”¨äºå®Œæˆç¡¬ä»¶çš„ä¸€äº›åŸºæœ¬é…ç½®ï¼Œå¼•å¯¼å†…æ ¸å¯åŠ¨ã€‚ â€‹ åŒæ—¶ï¼ŒBootloaderä¼šåœ¨è‡ªèº«ä¸å†…æ ¸åˆ†åŒºä¹‹é—´å­˜æ”¾ä¸€äº›å¯è®¾ç½®çš„å‚æ•°ï¼ˆBoot parametersï¼‰ï¼Œæ¯”å¦‚IPåœ°å€ï¼Œä¸²å£æ³¢ç‰¹ç‡ï¼Œè¦ä¼ é€’ç»™å†…æ ¸çš„å‘½ä»¤è¡Œå‚æ•°ã€‚ 2.ç³»ç»Ÿå†…æ ¸ â€‹ ç³»ç»Ÿå†…æ ¸ï¼ˆKernelï¼‰æ˜¯æ•´ä¸ªæ“ä½œç³»ç»Ÿçš„æœ€åº•å±‚ï¼Œå®ƒè´Ÿè´£æ•´ä¸ªç¡¬ä»¶çš„é©±åŠ¨ï¼Œä»¥åŠæä¾›å„ç§ç³»ç»Ÿæ‰€éœ€çš„æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒ…æ‹¬é˜²ç«å¢™æœºåˆ¶ã€æ˜¯å¦æ”¯æŒLVMæˆ–Quotaç­‰æ–‡ä»¶ç³»ç»Ÿç­‰ç­‰ï¼Œå¦‚æœå†…æ ¸ä¸è®¤è¯†æŸä¸ªæœ€æ–°çš„ç¡¬ä»¶ï¼Œé‚£ä¹ˆç¡¬ä»¶ä¹Ÿå°±æ— æ³•è¢«é©±åŠ¨ï¼Œä½ ä¹Ÿå°±æ— æ³•ä½¿ç”¨è¯¥ç¡¬ä»¶ã€‚è®¡ç®—æœºçœŸæ­£å·¥ä½œçš„ä¸œè¥¿å…¶å®æ˜¯ç¡¬ä»¶ï¼Œä¾‹å¦‚æ•°å€¼è¿ç®—è¦ä½¿ç”¨åˆ°CPUã€æ•°æ®å‚¨å­˜è¦ä½¿ç”¨åˆ°ç¡¬ç›˜ã€å›¾å½¢æ˜¾ç¤ºä¼šç”¨åˆ°æ˜¾ç¤ºé€‚é…å™¨ã€éŸ³ä¹å‘å£°è¦æœ‰éŸ³æ•ˆèŠ¯ç‰‡ã€è¿æ¥Internet å¯èƒ½éœ€è¦ç½‘ç»œå¡ç­‰ç­‰ã€‚å†…æ ¸å°±æ˜¯æ§åˆ¶è¿™äº›èŠ¯ç‰‡å¦‚ä½•å·¥ä½œã€‚ 3.æ–‡ä»¶ç³»ç»Ÿ â€‹ Linuxæ–‡ä»¶ç³»ç»Ÿï¼ˆFile Systemï¼‰ä¸­çš„æ–‡ä»¶æ˜¯æ•°æ®çš„é›†åˆï¼Œæ–‡ä»¶ç³»ç»Ÿä¸ä»…åŒ…å«ç€æ–‡ä»¶ä¸­çš„æ•°æ®è€Œä¸”è¿˜æœ‰æ–‡ä»¶ç³»ç»Ÿçš„ç»“æ„ï¼Œæ‰€æœ‰Linux ç”¨æˆ·å’Œç¨‹åºçœ‹åˆ°çš„æ–‡ä»¶ã€ç›®å½•ã€è½¯è¿æ¥åŠæ–‡ä»¶ä¿æŠ¤ä¿¡æ¯ç­‰éƒ½å­˜å‚¨åœ¨å…¶ä¸­ã€‚ â€‹ æ–‡ä»¶ç³»ç»Ÿæ˜¯æ“ä½œç³»ç»Ÿç”¨äºæ˜ç¡®å­˜å‚¨è®¾å¤‡ï¼ˆå¸¸è§çš„æ˜¯ç£ç›˜ï¼Œä¹Ÿæœ‰åŸºäºNAND Flashçš„å›ºæ€ç¡¬ç›˜ï¼‰æˆ–åˆ†åŒºä¸Šçš„æ–‡ä»¶çš„æ–¹æ³•å’Œæ•°æ®ç»“æ„ï¼›å³åœ¨å­˜å‚¨è®¾å¤‡ä¸Šç»„ç»‡æ–‡ä»¶çš„æ–¹æ³•ã€‚æ“ä½œç³»ç»Ÿä¸­è´Ÿè´£ç®¡ç†å’Œå­˜å‚¨æ–‡ä»¶ä¿¡æ¯çš„è½¯ä»¶æœºæ„ç§°ä¸ºæ–‡ä»¶ç®¡ç†ç³»ç»Ÿï¼Œç®€ç§°æ–‡ä»¶ç³»ç»Ÿã€‚ 4.ç”¨æˆ·ç¨‹åº â€‹ ç”¨æˆ·åº”ç”¨ç¨‹åºï¼ˆApplicationï¼‰ä¸ºäº†å®ŒæˆæŸé¡¹æˆ–æŸå‡ é¡¹ç‰¹å®šä»»åŠ¡è€Œè¢«å¼€å‘è¿è¡Œäºæ“ä½œç³»ç»Ÿä¹‹ä¸Šçš„è®¡ç®—æœºç¨‹åºã€‚ Linuxå¯åŠ¨è¿‡ç¨‹ æ­£å¸¸å¯åŠ¨è¿‡ç¨‹ä¸­ï¼ŒBootloaderé¦–å…ˆè¿è¡Œï¼Œç„¶åå°†å†…æ ¸å¤åˆ¶åˆ°å†…å­˜ä¸­ï¼ˆæˆ–è€…åœ¨å›ºæ€å­˜å‚¨è®¾å¤‡ä¸Šç›´æ¥è¿è¡Œï¼Œä½†æ˜¯æ•ˆç‡è¾ƒä½ï¼‰ï¼Œå¹¶åœ¨å†…å­˜æŸä¸ªå›ºå®šçš„åœ°å€ï¼ˆåŒ…æ‹¬åœ°å€ä¸å‚æ•°çš„ç»“æ„ï¼‰è®¾ç½®å¥½è¦ä¼ é€’ç»™å†…æ ¸çš„å‚æ•°ï¼Œæœ€åè¿è¡Œå†…æ ¸ã€‚å†…æ ¸å¯åŠ¨åï¼ŒæŒ‚è½½ï¼ˆmountï¼‰æ ¹æ–‡ä»¶ç³»ç»Ÿï¼ˆRoot filesystemï¼‰ï¼Œå¯åŠ¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„åº”ç”¨ç¨‹åºã€‚ ä¸Šç”µ â€”â€”&gt; Bootloader â€”[ä¼ é€’å‚æ•°]â€”&gt; åŠ è½½å†…æ ¸ â€”â€”&gt; å†…æ ¸æŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿ â€”â€”&gt;æ‰§è¡Œåº”ç”¨ç¨‹åº å¦‚ä½•ç†è§£Bootloaderä¸Kernel æ“ä½œç³»ç»Ÿå†…æ ¸æœ¬èº«å°±æ˜¯ä¸€ä¸ªè£¸æœºç¨‹åºï¼Œå’Œæˆ‘ä»¬å­¦çš„ubootå’Œå…¶ä»–è£¸æœºç¨‹åºæ²¡æœ‰æœ¬è´¨çš„åŒºåˆ«ï¼›äº‹å®ä¸Šï¼Œä¸å°‘U-Bootæºç å°±æ˜¯æ ¹æ®ç›¸åº”çš„Linuxå†…æ ¸æºç¨‹åºè¿›è¡Œç®€åŒ–è€Œå½¢æˆçš„ï¼Œå°¤å…¶æ˜¯ä¸€äº›è®¾å¤‡çš„é©±åŠ¨ç¨‹åºã€‚å¦‚æœæˆ‘ä»¬å»ç¢ç£¨U-Bootæºç çš„æ³¨é‡Šï¼Œä¾¿ä¼šè½»æ˜“çš„å‘ç°è¿™ä¸€æƒ…å†µã€‚ åŒºåˆ«å°±æ˜¯æ“ä½œç³»ç»Ÿè¿è¡Œèµ·æ¥åå¯ä»¥åˆ†ä¸ºåº”ç”¨å±‚ï¼ˆç”¨æˆ·æ€ï¼‰å’Œå†…æ ¸å±‚ï¼ˆå†…æ ¸æ€ï¼‰ï¼Œåˆ†å±‚åï¼Œä¸¤å±‚çš„æƒé™ä¸åŒï¼ˆå®ç°çš„åŸç†æ˜¯åŸºäºCPUçš„æ¨¡å¼åˆ‡æ¢ï¼‰ï¼Œå†…å­˜è®¿é—®å’Œè®¾å¤‡æ“ä½œçš„ç®¡ç†ä¸Šæ›´åŠ ç²¾ç»†ï¼ˆå†…æ ¸å¯ä»¥éšä¾¿æ–¹ä½å„ç§ç¡¬ä»¶ï¼Œè€Œåº”ç”¨ç¨‹åºåªèƒ½è¢«é™åˆ¶çš„è®¿é—®ç¡¬ä»¶å’Œå†…å­˜åœ°å€ï¼‰ã€‚ ä»¥ARMå¤„ç†å™¨ä¸ºä¾‹ï¼Œé™¤ç”¨æˆ·æ¨¡å¼å¤–ï¼Œå…¶ä½™6ç§å·¥ä½œæ¨¡å¼éƒ½å±äºç‰¹æƒæ¨¡å¼ï¼š ç”¨æˆ·æ¨¡å¼ï¼ˆUSRï¼‰ï¼šæ­£å¸¸ç¨‹åºæ‰§è¡Œæ¨¡å¼ï¼Œä¸èƒ½ç›´æ¥åˆ‡æ¢åˆ°å…¶ä»–æ¨¡å¼ ç³»ç»Ÿæ¨¡å¼ï¼ˆSYSï¼‰ï¼šè¿è¡Œæ“ä½œç³»ç»Ÿçš„ç‰¹æƒä»»åŠ¡ï¼Œä¸ç”¨æˆ·æ¨¡å¼ç±»ä¼¼ï¼Œä½†å…·æœ‰å¯ä»¥ç›´æ¥åˆ‡æ¢åˆ°å…¶ä»–æ¨¡å¼ç­‰ç‰¹æƒ å¿«ä¸­æ–­æ¨¡å¼ï¼ˆFIQï¼‰ï¼šæ”¯æŒé«˜é€Ÿæ•°æ®ä¼ è¾“åŠé€šé“å¤„ç†ï¼ŒFIQå¼‚å¸¸å“åº”æ—¶è¿›å…¥æ­¤æ¨¡å¼ ä¸­æ–­æ¨¡å¼ï¼ˆIRQï¼‰ï¼šç”¨äºé€šç”¨ä¸­æ–­å¤„ç†ï¼ŒIRQå¼‚å¸¸å“åº”æ—¶è¿›å…¥æ­¤æ¨¡å¼ ç®¡ç†æ¨¡å¼ï¼ˆSVCï¼‰ï¼šæ“ä½œç³»ç»Ÿä¿æŠ¤æ¨¡å¼ï¼Œç³»ç»Ÿå¤ä½å’Œè½¯ä»¶ä¸­æ–­å“åº”æ—¶è¿›å…¥æ­¤æ¨¡å¼ï¼ˆç”±ç³»ç»Ÿè°ƒç”¨æ‰§è¡Œè½¯ä¸­æ–­SWIå‘½ä»¤è§¦å‘ï¼‰ ä¸­æ­¢æ¨¡å¼ï¼ˆABTï¼‰ï¼šç”¨äºæ”¯æŒè™šæ‹Ÿå†…å­˜å’Œ/æˆ–å­˜å‚¨å™¨ä¿æŠ¤ï¼Œåœ¨ARM7TDMIæ²¡æœ‰å¤§ç”¨å¤„ æœªå®šä¹‰æ¨¡å¼ï¼ˆUNDï¼‰ï¼šæ”¯æŒç¡¬ä»¶åå¤„ç†å™¨çš„è½¯ä»¶ä»¿çœŸï¼Œæœªå®šä¹‰æŒ‡ä»¤å¼‚å¸¸å“åº”æ—¶è¿›å…¥æ­¤æ¨¡å¼ Linuxå†…æ ¸æ€æ˜¯ä»ARMçš„SVCå³ç®¡ç†æ¨¡å¼ä¸‹å¯åŠ¨çš„ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ã€å¦‚ï¼šç¡¬ä»¶ä¸­æ–­ã€ç¨‹åºå¼‚å¸¸ï¼ˆè¢«åŠ¨ï¼‰ç­‰æƒ…å†µä¸‹è¿›å…¥ARMçš„å…¶ä»–ç‰¹æƒæ¨¡å¼ï¼Œè¿™æ—¶ä»ç„¶å¯ä»¥è¿›å…¥å†…æ ¸æ€ï¼ˆå› ä¸ºå°±æ˜¯å¯ä»¥æ“ä½œå†…æ ¸äº†ï¼‰ï¼›åŒæ ·ï¼ŒLinuxç”¨æˆ·æ€æ˜¯ä»ARMç”¨æˆ·æ¨¡å¼å¯åŠ¨çš„ï¼Œä½†å½“è¿›å…¥ARMç³»ç»Ÿæ¨¡å¼æ—¶ã€ä»ç„¶å¯ä»¥æ“ä½œLinuxç”¨æˆ·æ€ç¨‹åºï¼ˆè¿›å…¥ç”¨æˆ·æ€ï¼Œå¦‚initè¿›ç¨‹çš„å¯åŠ¨è¿‡ç¨‹ï¼‰ã€‚ å³ï¼šLinuxå†…æ ¸ä»ARMçš„SVCæ¨¡å¼ä¸‹å¯åŠ¨ï¼Œä½†å†…æ ¸æ€ä¸ä»…ä»…æŒ‡ARMçš„SVCæ¨¡å¼ï¼ˆè¿˜åŒ…æ‹¬å¯ä»¥è®¿é—®å†…æ ¸ç©ºé—´çš„æ‰€æœ‰ARMæ¨¡å¼ï¼‰ï¼›Linuxç”¨æˆ·ç¨‹åºä»ARMçš„ç”¨æˆ·æ¨¡å¼å¯åŠ¨ï¼Œä½†ç”¨æˆ·æ€ä¸ä»…ä»…æŒ‡ARMçš„ç”¨æˆ·æ¨¡å¼ã€‚ ç›´è§‚æ¥çœ‹ï¼šubootçš„é•œåƒæ˜¯u-boot.binï¼ŒLinuxç³»ç»Ÿçš„é•œåƒæ˜¯zImageï¼Œè¿™ä¸¤ä¸ªä¸œè¥¿å…¶å®éƒ½æ˜¯è£¸æœºç¨‹åºé•œåƒã€‚ä»ç³»ç»Ÿå¯åŠ¨çš„è§’åº¦æ¥è®²ï¼Œå†…æ ¸å’Œubootéƒ½æ˜¯è£¸æœºç¨‹åºã€‚ æ–‡ä»¶ç³»ç»Ÿ æ¦‚å¿µ Linuxæ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶æ˜¯æ•°æ®çš„é›†åˆï¼Œæ–‡ä»¶ç³»ç»Ÿä¸ä»…åŒ…å«ç€æ–‡ä»¶ä¸­çš„æ•°æ®è€Œä¸”è¿˜æœ‰æ–‡ä»¶ç³»ç»Ÿçš„ç»“æ„ï¼Œæ‰€æœ‰Linux ç”¨æˆ·å’Œç¨‹åºçœ‹åˆ°çš„æ–‡ä»¶ã€ç›®å½•ã€è½¯è¿æ¥åŠæ–‡ä»¶ä¿æŠ¤ä¿¡æ¯ç­‰éƒ½å­˜å‚¨åœ¨å…¶ä¸­ã€‚è¿™ç§æœºåˆ¶æœ‰åˆ©äºç”¨æˆ·å’Œæ“ä½œç³»ç»Ÿçš„äº¤äº’ã€‚ å°½ç®¡å†…æ ¸æ˜¯ Linux çš„æ ¸å¿ƒï¼Œä½†æ–‡ä»¶å´æ˜¯ç”¨æˆ·ä¸æ“ä½œç³»ç»Ÿäº¤äº’æ‰€é‡‡ç”¨çš„ä¸»è¦å·¥å…·ã€‚è¿™å¯¹ Linux æ¥è¯´å°¤å…¶å¦‚æ­¤ï¼Œè¿™æ˜¯å› ä¸ºåœ¨ UNIX ä¼ ç»Ÿä¸­ï¼Œå®ƒä½¿ç”¨æ–‡ä»¶ I/O æœºåˆ¶ç®¡ç†ç¡¬ä»¶è®¾å¤‡å’Œæ•°æ®æ–‡ä»¶ è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿã€æ ¹æ–‡ä»¶ç³»ç»Ÿå’Œæ–‡ä»¶ç³»ç»Ÿ VFSï¼š Linuxæ”¯æŒå¤šç§æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Œå› ä¸ºå®ƒå°†åº•å±‚ä¸åº”ç”¨å±‚åˆ†éš”å¼€ï¼›è€Œæä¾›ç»Ÿä¸€çš„æ¥å£æ”¯æŒåº”ç”¨å±‚å¯¹äºä¸åŒå®ç°çš„æ–‡ä»¶ç³»ç»Ÿçš„è®¿é—®ï¼Œè¿™ä¸ªç»Ÿä¸€çš„æ¥å£ç§°ä¸ºè™šæ‹Ÿæ–‡ä»¶ç³»ç»ŸVFSã€‚ kernelä¸­ä»¥VFSå»æ”¯æŒå„ç§æ–‡ä»¶ç³»ç»Ÿï¼Œå¦‚yaffsï¼Œext3ï¼Œcramfsç­‰ç­‰ã€‚yaffs/yaffs2æ˜¯ä¸“ä¸ºåµŒå…¥å¼ç³»ç»Ÿä½¿ç”¨NANDå‹é—ªå­˜è€Œè®¾è®¡çš„ä¸€ç§æ—¥å¿—å‹æ–‡ä»¶ç³»ç»Ÿã€‚åœ¨å†…æ ¸ä¸­ä»¥VFSæ¥å±è”½å„ç§æ–‡ä»¶ç³»ç»Ÿçš„æ¥å£ä¸åŒï¼Œä»¥VFSå‘kernelæä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ã€‚ æ ¹æ–‡ä»¶ç³»ç»Ÿ æ–‡ä»¶ç³»ç»ŸæŒ‡æ–‡ä»¶å­˜åœ¨çš„ç‰©ç†ç©ºé—´ï¼Œlinuxç³»ç»Ÿä¸­æ¯ä¸ªåˆ†åŒºéƒ½æ˜¯ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œéƒ½æœ‰è‡ªå·±çš„ç›®å½•å±‚æ¬¡ç»“æ„ã€‚ä»¥â€œ/â€ä¸ºé¡¶çº§ç›®å½•çš„æ–‡ä»¶ç³»ç»Ÿç§°ä¸ºæ ¹æ–‡ä»¶ç³»ç»Ÿã€‚ Linuxå¯åŠ¨æ—¶ï¼Œç¬¬ä¸€ä¸ªå¿…é¡»æŒ‚è½½çš„æ˜¯æ ¹æ–‡ä»¶ç³»ç»Ÿï¼›è‹¥ç³»ç»Ÿä¸èƒ½ä»æŒ‡å®šè®¾å¤‡ä¸ŠæŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œåˆ™ç³»ç»Ÿä¼šå‡ºé”™è€Œé€€å‡ºå¯åŠ¨ã€‚ç³»ç»Ÿæ­£å¸¸æŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿä¹‹åå¯ä»¥è‡ªåŠ¨æˆ–æ‰‹åŠ¨æŒ‚è½½å…¶ä»–çš„æ–‡ä»¶ç³»ç»Ÿï¼ˆæ ¹æ–‡ä»¶ç³»ç»Ÿæ˜¯å…¶ä»–æ–‡ä»¶çš„æœ€ç»ˆæŒ‚è½½ç‚¹ï¼‰ã€‚å› æ­¤ï¼Œä¸€ä¸ªç³»ç»Ÿä¸­å¯ä»¥åŒæ—¶å­˜åœ¨ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼š æ ¹æ–‡ä»¶ç³»ç»Ÿå¯ä»¥æ˜¯ä»»ä½•kernelæ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿç±»å‹(ext4,yaffsç­‰)ã€‚ ä½†å®ƒå¿…é¡»åŒ…å«linuxå†…æ ¸å¯åŠ¨æ—¶æ‰€å¿…éœ€çš„æ–‡ä»¶(æ ¹æ–‡ä»¶ç³»ç»Ÿå¿…éœ€å­˜åœ¨çš„ç›®å½• /dev /bin /sbin ç­‰ç­‰)ï¼Œä¸ç„¶ç³»ç»Ÿå¯åŠ¨ä¼šå¤±è´¥ã€‚ æ ¹æ–‡ä»¶ç³»ç»Ÿæ˜¯ä¹‹æ‰€ä»¥æœ‰ä¸ªæ ¹(/)å­—,æ˜¯å› ä¸ºå®ƒæ˜¯linuxç³»ç»Ÿå¯åŠ¨æ—¶æŒ‚è½½(mount,æ‰€è°“æŒ‚è½½ï¼šå°±æ˜¯åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„æ–‡ä»¶å¯¹åº”å…·ä½“çš„å­˜å‚¨ç©ºé—´åˆ†åŒºçš„è¿‡ç¨‹,æŒ‚è½½æ—¶ä¸ä¼šä¿å­˜ä¿¡æ¯,ä¸‹æ¬¡å¯åŠ¨æ—¶å¾—é‡æ–°æŒ‚è½½)çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ,å¯åŠ¨å®Œæˆåå¯ä»¥è‡ªåŠ¨(é…ç½®etc/fstab)æˆ–è€…æ‰‹åŠ¨çš„æ–¹å¼å°†å…¶å®ƒæ–‡ä»¶ç³»ç»Ÿ(åˆ†åŒº)æŒ‚è½½åˆ°æ ¹æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚ å…¶ä»–æ–‡ä»¶ç³»ç»Ÿ ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿç±»å‹æœ‰ä¸åŒçš„ç‰¹ç‚¹ï¼Œå› è€Œæ ¹æ®å­˜å‚¨è®¾å¤‡çš„ç¡¬ä»¶ç‰¹æ€§ã€ç³»ç»Ÿéœ€æ±‚ç­‰æœ‰ä¸åŒçš„åº”ç”¨åœºåˆã€‚åœ¨åµŒå…¥å¼Linuxåº”ç”¨ä¸­ï¼Œä¸»è¦çš„å­˜å‚¨è®¾å¤‡ä¸º RAM(DRAM, SDRAM)å’ŒROM(å¸¸é‡‡ç”¨FLASHå­˜å‚¨å™¨)ï¼Œå¸¸ç”¨çš„åŸºäºå­˜å‚¨è®¾å¤‡çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹åŒ…æ‹¬ï¼šjffs2, yaffs, cramfs, romfs, ramdisk,initramfs, ramfs/tmpfs,ubifsç­‰ã€‚ ubootä¸æ ¹æ–‡ä»¶ç³»ç»Ÿçš„å…³ç³» æ—©æœŸçš„ubootæ²¡æœ‰åˆ†åŒºçš„æ¦‚å¿µï¼ŒubootåªçŸ¥é“åº”è¯¥å°†ä»€ä¹ˆæ•°æ®çƒ§å†™åˆ°å­˜å‚¨ä»‹è´¨çš„ä»€ä¹ˆåŒºé—´ä¸­ã€‚ ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºubootæ¥çœ‹ï¼Œåªæœ‰èµ·å§‹åœ°å€ç»“æŸåœ°å€ç­‰ï¼ŒAï½Båœ°å€æ”¾å†…æ ¸ï¼ŒCï½Dåœ°å€æ”¾æ–‡ä»¶ç³»ç»Ÿï¼Œå³ï¼šè§„å®šå“ªä¸ªåœ°å€åŒºé—´æ”¾å†…æ ¸æˆ–è€…æ–‡ä»¶ç³»ç»Ÿç­‰ï¼‰ è™½ç„¶æ­¤åï¼Œubootä¸­æ¸æ¸ä¹Ÿæœ‰äº†MTDç­‰ç®¡ç†åˆ†åŒºéƒ¨åˆ†çš„åŠŸèƒ½ã€‚å°½ç®¡å¦‚æ­¤ï¼Œä¸å½±å“æˆ‘ä»¬çš„å­¦ä¹ ç†è§£ã€‚ æ€»ç»“ cpué¦–å…ˆæ‰§è¡Œä½äº0åœ°å€çš„ubootï¼Œubootå¯åŠ¨ä»¥ååˆå§‹åŒ–ä¸€äº›èµ„æºï¼Œå‘Šè¯‰å†…æ ¸æœ‰å…³çš„å‚æ•°å¹¶å¼•å¯¼å†…æ ¸ï¼Œå†…æ ¸é€šè¿‡äº‹å…ˆæ·»åŠ å¯¹äºæŸç§æ–‡ä»¶ç³»ç»Ÿç±»å‹çš„æ”¯æŒé©±åŠ¨ï¼ˆç›¸å½“äºä¸€å°æ®µç¨‹åºï¼‰ï¼Œè¯»å–ubootç­‰boot loaderåœ¨æŒ‡å®šçš„åŒºåŸŸçƒ§å†™åˆ¶ä½œå¥½çš„æ–‡ä»¶ç³»ç»Ÿé•œåƒï¼Œå†…æ ¸è§£æå¹¶æŒ‚è½½æˆæ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šï¼Œé€šè¿‡VFSå†æŒ‚è½½ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Œå®Œæˆå¯åŠ¨ä»¥åï¼Œå†å»ç®¡ç†æœ‰å…³çš„èµ„æºï¼ˆåŒ…æ‹¬åº”ç”¨ç¨‹åºï¼‰ åº”ç”¨ç¼–ç¨‹ Framebuffer(ioctl mmap) bpp: æ¯ä¸ªåƒç´ ç”¨å¤šå°‘ä½æ¥è¡¨ç¤ºå®ƒçš„é¢œè‰² é¦–åœ°å€+åç§»åœ°å€=ç¡®å®šå‡ºä½äºå“ªé‡Œ å‡è®¾fb_baseæ˜¯APPæ‰§è¡Œmmapåå¾—åˆ°çš„Framebufferåœ°å€ æ±‚åç§»åœ°å€: y*line_width+x*pixel_width(è¿™å°±æ—¶åç§»åœ°å€) + fb_base = ç»å¯¹åœ°å€ å¯ä»¥ç”¨ä»¥ä¸‹å…¬å¼ç®—å‡º(x,y)åæ ‡å¤„åƒç´ å¯¹åº”çš„Framebufferåœ°å€ï¼š (xï¼Œy)åƒç´ èµ·å§‹åœ°å€=fb_base+(xres*bpp/8)y + xbpp/8 ä¸€è¡Œçš„å®½åº¦: xres * bpp/8 ä¸€ä¸ªåƒç´ å®½åº¦: bpp/8 ioctl ioctlæ˜¯è®¾å¤‡é©±åŠ¨ç¨‹åºä¸­å¯¹è®¾å¤‡çš„I/Oé€šé“è¿›è¡Œç®¡ç†çš„å‡½æ•° ã€‚æ‰€è°“å¯¹I/Oé€šé“è¿›è¡Œç®¡ç†ï¼Œå°±æ˜¯å¯¹è®¾å¤‡çš„ä¸€äº›ç‰¹æ€§è¿›è¡Œæ§åˆ¶ ioctlå‡½æ•°æ˜¯æ–‡ä»¶ç»“æ„ä¸­çš„ä¸€ä¸ªå±æ€§åˆ†é‡ï¼Œå°±æ˜¯è¯´å¦‚æœä½ çš„é©±åŠ¨ç¨‹åºæä¾›äº†å¯¹ioctlçš„æ”¯æŒï¼Œç”¨æˆ·å°±å¯ä»¥åœ¨ç”¨æˆ·ç¨‹åºä¸­ä½¿ç”¨ioctlå‡½æ•°æ¥æ§åˆ¶è®¾å¤‡çš„I/Oé€šé“ã€‚ å¤´æ–‡ä»¶ï¼š#include &lt;sys/ioctl.h&gt; å‡½æ•°åŸå‹ï¼š int ioctl(int fd, unsigned long request, ...); å‡½æ•°è¯´æ˜ï¼š â‘  fd è¡¨ç¤ºæ–‡ä»¶æè¿°ç¬¦ï¼› â‘¡ requestè¡¨ç¤ºä¸é©±åŠ¨ç¨‹åºäº¤äº’çš„å‘½ä»¤ï¼Œç”¨ä¸åŒçš„å‘½ä»¤æ§åˆ¶é©±åŠ¨ç¨‹åºè¾“å‡ºæˆ‘ä»¬éœ€è¦çš„æ•°æ®ï¼› â‘¢ â€¦ è¡¨ç¤ºå¯å˜å‚æ•°argï¼Œæ ¹æ®requestå‘½ä»¤ï¼Œè®¾å¤‡é©±åŠ¨ç¨‹åºè¿”å›è¾“å‡ºçš„æ•°æ®ã€‚ â‘£ è¿”å›å€¼ï¼šæ‰“å¼€æˆåŠŸè¿”å›æ–‡ä»¶æè¿°ç¬¦ï¼Œå¤±è´¥å°†è¿”å›-1ã€‚ ioctlçš„ä½œç”¨éå¸¸å¼ºå¤§ã€çµæ´»ã€‚ä¸åŒçš„é©±åŠ¨ç¨‹åºå†…éƒ¨ä¼šå®ç°ä¸åŒçš„ioctlï¼ŒAPPå¯ä»¥ä½¿ç”¨å„ç§ioctlè·Ÿé©±åŠ¨ç¨‹åºäº¤äº’ï¼šå¯ä»¥ä¼ æ•°æ®ç»™é©±åŠ¨ç¨‹åºï¼Œä¹Ÿå¯ä»¥ä»é©±åŠ¨ç¨‹åºä¸­è¯»å‡ºæ•°æ®ã€‚ mmap 12345678910111213141516#include &lt;sys/mman.h&gt;å‡½æ•°åŸå‹ï¼švoid *mmap(void *addr, size_t length, int prot, int flags,int fd, off_t offset);å‡½æ•°è¯´æ˜ï¼šâ‘  addrè¡¨ç¤ºæŒ‡å®šæ˜ å°„çš„å…§å­˜èµ·å§‹åœ°å€ï¼Œé€šå¸¸è®¾ä¸º NULLè¡¨ç¤ºè®©ç³»ç»Ÿè‡ªåŠ¨é€‰å®šåœ°å€ï¼Œå¹¶åœ¨æˆåŠŸæ˜ å°„åè¿”å›è¯¥åœ°å€ï¼›â‘¡ lengthè¡¨ç¤ºå°†æ–‡ä»¶ä¸­å¤šå¤§çš„å†…å®¹æ˜ å°„åˆ°å†…å­˜ä¸­ï¼›â‘¢ prot è¡¨ç¤ºæ˜ å°„åŒºåŸŸçš„ä¿æŠ¤æ–¹å¼ï¼Œå¯ä»¥ä¸ºä»¥ä¸‹4ç§æ–¹å¼çš„ç»„åˆa. PROT_EXEC æ˜ å°„åŒºåŸŸå¯è¢«æ‰§è¡Œb. PROT_READ æ˜ å°„åŒºåŸŸå¯è¢«è¯»å‡ºc. PROT_WRITE æ˜ å°„åŒºåŸŸå¯è¢«å†™å…¥d. PROT_NONE æ˜ å°„åŒºåŸŸä¸èƒ½å­˜å–â‘£ Flags è¡¨ç¤ºå½±å“æ˜ å°„åŒºåŸŸçš„ä¸åŒç‰¹æ€§ï¼Œå¸¸ç”¨çš„æœ‰ä»¥ä¸‹ä¸¤ç§a. MAP_SHARED è¡¨ç¤ºå¯¹æ˜ å°„åŒºåŸŸå†™å…¥çš„æ•°æ®ä¼šå¤åˆ¶å›æ–‡ä»¶å†…ï¼ŒåŸæ¥çš„æ–‡ä»¶ä¼šæ”¹å˜ã€‚b. MAP_PRIVATE è¡¨ç¤ºå¯¹æ˜ å°„åŒºåŸŸçš„æ“ä½œä¼šäº§ç”Ÿä¸€ä¸ªæ˜ å°„æ–‡ä»¶çš„å¤åˆ¶ï¼Œå¯¹æ­¤åŒºåŸŸçš„ä»»ä½•ä¿®æ”¹éƒ½ä¸ä¼šå†™å›åŸæ¥çš„æ–‡ä»¶å†…å®¹ä¸­ã€‚â‘¤ è¿”å›å€¼ï¼šè‹¥æˆåŠŸæ˜ å°„ï¼Œå°†è¿”å›æŒ‡å‘æ˜ å°„çš„åŒºåŸŸçš„æŒ‡é’ˆï¼Œå¤±è´¥å°†è¿”å›-1ã€‚ æ˜ å°„framebuffer, framebufferæ—¶é©±åŠ¨ç¨‹åºåˆ†é…çš„, åº”ç”¨ç¨‹åºæƒ³è¦å»ä½¿ç”¨å¿…é¡»ä½¿ç”¨mmapæ˜ å°„åˆ°ç”¨æˆ·ç©ºé—´, åº”ç”¨ç¨‹åºå¾—åˆ°LCDçš„å‚æ•°å¹¶ä¸”å¾—åˆ°framebufferçš„åœ°å€ä¹‹åå°±å¯ä»¥åœ¨ä¸Šé¢æ“ä½œäº†. æç‚¹å‡½æ•°demo: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535428 void lcd_put_pixel(int x, int y, unsigned int color(ä¼ å…¥RGB888))29 &#123;30 unsigned char *pen_8 = fb_base+y*line_width+x*pixel_width;31 unsigned short *pen_16;32 unsigned int *pen_32;3334 unsigned int red, green, blue;3536 pen_16 = (unsigned short *)pen_8;37 pen_32 = (unsigned int *)pen_8;3839 switch (var.bits_per_pixel)40 &#123;41 case 8:42 &#123;43 *pen_8 = color;44 break;45 &#125;46 case 16:47 &#123;48 /* 565 */49 red = (color &gt;&gt; 16) &amp; 0xff;50 green = (color &gt;&gt; 8) &amp; 0xff;51 blue = (color &gt;&gt; 0) &amp; 0xff;52 color = ((red &gt;&gt; 3) &lt;&lt; 11) | ((green &gt;&gt; 2) &lt;&lt; 5) | (blue &gt;&gt; 3);//ä¿è¯ç»¿é¢œè‰²é«˜å…­ä½ //ä¿è¯è“é¢œè‰²é«˜äº”ä½53 *pen_16 = color;54 break;55 &#125;56 case 32:57 &#123;58 *pen_32 = color;59 break;60 &#125;61 default:62 &#123;63 printf(&quot;can&#x27;t surport %dbpp\\n&quot;, var.bits_per_pixel);64 break;65 &#125;66 &#125;67 &#125;ç¬¬28è¡Œä¸­ä¼ å…¥çš„colorè¡¨ç¤ºé¢œè‰²ï¼Œå®ƒçš„æ ¼å¼æ°¸è¿œæ˜¯0x00RRGGBBï¼Œå³RGB888ã€‚å½“LCDæ˜¯16bppæ—¶ï¼Œè¦æŠŠcolorå˜é‡ä¸­çš„Rã€Gã€BæŠ½å‡ºæ¥å†åˆå¹¶æˆRGB565æ ¼å¼ã€‚ç¬¬30è¡Œè®¡ç®—(x,y)åæ ‡ä¸Šåƒç´ å¯¹åº”çš„Framebufferåœ°å€ã€‚ç¬¬43è¡Œï¼Œå¯¹äº8bppï¼Œcolorå°±ä¸å†è¡¨ç¤ºRBGä¸‰åŸè‰²äº†ï¼Œè¿™æ¶‰åŠè°ƒè‰²æ¿çš„æ¦‚å¿µï¼Œcoloræ˜¯è°ƒè‰²æ¿çš„å€¼ã€‚ç¬¬49ï½51è¡Œï¼Œå…ˆä»colorå˜é‡ä¸­æŠŠRã€Gã€BæŠ½å‡ºæ¥ã€‚ç¬¬52è¡Œï¼ŒæŠŠredã€greenã€blueè¿™ä¸‰ç§8ä½é¢œè‰²å€¼ï¼Œæ ¹æ®RGB565çš„æ ¼å¼ï¼Œåªä¿ç•™redä¸­çš„é«˜5ä½ã€greenä¸­çš„é«˜6ä½ã€blueä¸­çš„é«˜5ä½ï¼Œç»„åˆæˆä¸€ä¸ªæ–°çš„16ä½é¢œè‰²å€¼ã€‚ç¬¬53è¡Œï¼ŒæŠŠæ–°çš„16ä½é¢œè‰²å€¼å†™å…¥Framebufferã€‚ç¬¬58è¡Œï¼Œå¯¹äº32bppï¼Œé¢œè‰²æ ¼å¼è·Ÿcolorå‚æ•°ä¸€è‡´ï¼Œå¯ä»¥ç›´æ¥å†™å…¥Framebufferã€‚ /* æ¸…å±: å…¨éƒ¨è®¾ä¸ºç™½è‰² */96 memset(fbmem, 0xff, screen_size);9798 /* éšä¾¿è®¾ç½®å‡º100ä¸ªä¸ºçº¢è‰² */99 for (i = 0; i &lt; 100; i++)100 lcd_put_pixel(var.xres/2+i, var.yres/2, 0xFF0000); æ–‡å­—æ˜¾ç¤º å­—ç¬¦ç¼–ç  ASCII å¸¸ç”¨å­—æ¯å°±26ä¸ªï¼ŒåŒºåˆ†å¤§å°å†™ã€åŠ ä¸Šæ ‡ç‚¹ç¬¦å·ä¹Ÿæ²¡è¶…è¿‡127ä¸ªï¼Œæ¯ä¸ªå­—ç¬¦ç”¨ä¸€ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºå°±è¶³å¤Ÿäº†ã€‚ä¸€ä¸ªå­—èŠ‚çš„7ä½å°±å¯ä»¥è¡¨ç¤º128ä¸ªæ•°å€¼ï¼Œåœ¨ASCIIç ä¸­æœ€é«˜ä½æ°¸è¿œæ˜¯0ã€‚ ANSI ASNIæ˜¯ASCIIçš„æ‰©å±•ï¼Œå‘ä¸‹åŒ…å«ASCIIã€‚å¯¹äºASCIIå­—ç¬¦ä»ä»¥ä¸€ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºï¼Œå¯¹äºéASCIIå­—ç¬¦åˆ™ä½¿ç”¨2å­—èŠ‚æ¥è¡¨ç¤ºã€‚ åœ¨ä¸­å›½å¤§é™†åœ°åŒºï¼ŒANSIçš„é»˜è®¤ç¼–ç æ˜¯GB2312ï¼›åœ¨æ¸¯æ¾³å°åœ°åŒºé»˜è®¤ç¼–ç æ˜¯BIG5ã€‚ä»¥æ•°å€¼â€œ0xd0d6â€ä¸ºä¾‹ï¼Œå¯¹äºGB2312ç¼–ç å®ƒè¡¨ç¤ºâ€œä¸­â€ï¼›å¯¹äºBIG5ç¼–ç å®ƒè¡¨ç¤ºâ€œç¬¢â€ã€‚æ‰€ä»¥å¯¹äºANSIç¼–ç çš„TXTæ–‡ä»¶ï¼Œå¦‚æœä½ æ‰“å¼€å®ƒå‘ç°ä¹±ç ï¼Œé‚£ä¹ˆè¿˜å¾—å†æ¬¡ç»†åˆ†å®ƒçš„å…·ä½“ç¼–ç ã€‚ UNICODE åœ¨ANSIæ ‡å‡†ä¸­ï¼Œå¾ˆå¤šç§æ–‡å­—éƒ½æœ‰è‡ªå·±çš„ç¼–ç æ ‡å‡†ï¼Œæ±‰å­—ç®€ä½“å­—æœ‰GB2312ã€ç¹ä½“å­—æœ‰BIG5ï¼Œè¿™éš¾å…åŒä¸€ä¸ªæ•°å€¼å¯¹åº”ä¸åŒå­—ç¬¦ã€‚æ¯”å¦‚æ•°å€¼â€œ0xd0d6â€ï¼Œå¯¹äºGB2312ç¼–ç å®ƒè¡¨ç¤ºâ€œä¸­â€ï¼›å¯¹äºBIG5ç¼–ç å®ƒè¡¨ç¤ºâ€œç¬¢â€ã€‚è¿™é€ æˆäº†ä½¿ç”¨ANSIç¼–ç ä¿å­˜çš„æ–‡ä»¶ï¼Œä¸é€‚åˆè·¨åœ°åŒºäº¤æµã€‚ UNICODEç¼–ç å°±æ˜¯è§£å†³è¿™ç±»é—®é¢˜ï¼šå¯¹äºåœ°çƒä¸Šä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œéƒ½ç»™å®ƒä¸€ä¸ªå”¯ä¸€çš„æ•°å€¼ã€‚ UNICODEä»ç„¶å‘ä¸‹å…¼å®¹ASCIIï¼Œä½†æ˜¯å¯¹äºå…¶ä»–å­—ç¬¦ä¼šæœ‰å¯¹åº”çš„æ•°å€¼ï¼Œæ¯”å¦‚å¯¹äºâ€œä¸­â€ã€â€œç¬¢â€ï¼Œå®ƒä»¬çš„æ•°å€¼åˆ†åˆ«æ˜¯ï¼š0x4e2dã€0x7b22 UNICODEä¸­çš„æ•°å€¼èŒƒå›´æ˜¯0x0000è‡³0x10FFFFï¼Œæœ‰1,114,111å³100å¤šä¸‡ä¸ªæ•°å€¼ï¼Œå¯ä»¥è¡¨ç¤º100å¤šä¸‡ä¸ªå­—ç¬¦ï¼Œè¶³å¤Ÿåœ°çƒäººä½¿ç”¨äº†ã€‚ ASCIIå­—ç¬¦æ˜¾ç¤º ä¸­æ–‡å­—ç¬¦æ˜¾ç¤º å¦‚æœä¸æŒ‡å®šâ€œ-finput-charsetâ€ï¼ŒGCCå°±ä¼šé»˜è®¤Cç¨‹åºçš„ç¼–ç æ–¹å¼ä¸ºUTF-8ï¼Œå³ä½¿ä½ æ˜¯ä»¥ANSIæ ¼å¼ä¿å­˜ï¼Œä¹Ÿä¼šè¢«å½“ä½œUTF-8æ¥å¯¹å¾…ã€‚ å¯¹äºç¼–è¯‘å‡ºæ¥çš„å¯æ‰§è¡Œç¨‹åºï¼Œå¯ä»¥æŒ‡å®šå®ƒé‡Œé¢çš„å­—ç¬¦æ˜¯ä»¥ä»€ä¹ˆæ–¹å¼ç¼–ç ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„é€‰é¡¹ç¼–è¯‘å™¨ï¼š -fexec-charset=GB231 -fexec-charset=UTF-8 å¦‚æœä¸æŒ‡å®šâ€œ-fexec-charsetâ€ï¼ŒGCCå°±ä¼šé»˜è®¤ç¼–è¯‘å‡ºçš„å¯æ‰§è¡Œç¨‹åºä¸­å­—ç¬¦çš„ç¼–ç æ–¹å¼ä¸ºUTF-8ã€‚ å¦‚æœâ€œ-finput-charsetâ€ä¸â€œ-fexec-charsetâ€ä¸ä¸€æ ·ï¼Œç¼–è¯‘å™¨ä¼šè¿›è¡Œæ ¼å¼è½¬æ¢ã€‚ å¾…è¡¥å……â€¦ äº¤å‰ç¼–è¯‘ç¨‹åºï¼šä»¥freetypeä¸ºä¾‹ ä½¿ç”¨buildrootæ¥ç»™ARMæ¿ç¼–è¯‘ç¨‹åºã€ç¼–è¯‘åº“ä¼šå¾ˆç®€å•,è¿™é‡Œfreetypeåœ¨ç¼–è¯‘ å®‰è£…ä¸€äº›å°ç¨‹åºå¾ˆæœ‰ç”¨ åº“ç›¸å…³çŸ¥è¯† ç¼–è¯‘ç¨‹åºæ—¶å»å“ªæ‰¾å¤´æ–‡ä»¶ï¼Ÿ ç³»ç»Ÿç›®å½•ï¼šå°±æ˜¯äº¤å‰ç¼–è¯‘å·¥å…·é“¾é‡Œçš„æŸä¸ªincludeç›®å½•ï¼› ä¹Ÿå¯ä»¥è‡ªå·±æŒ‡å®šï¼šç¼–è¯‘æ—¶ç”¨ â€œ -I dir â€é€‰é¡¹æŒ‡å®šã€‚ é“¾æ¥æ—¶å»å“ªæ‰¾åº“æ–‡ä»¶ï¼Ÿ ç³»ç»Ÿç›®å½•ï¼šå°±æ˜¯äº¤å‰ç¼–è¯‘å·¥å…·é“¾é‡Œçš„æŸä¸ªlibç›®å½•ï¼› ä¹Ÿå¯ä»¥è‡ªå·±æŒ‡å®šï¼šé“¾æ¥æ—¶ç”¨ â€œ -L dir â€é€‰é¡¹æŒ‡å®šã€‚ è¿è¡Œæ—¶å»å“ªæ‰¾åº“æ–‡ä»¶ï¼Ÿ ç³»ç»Ÿç›®å½•ï¼šå°±æ˜¯æ¿å­ä¸Šçš„/libã€/usr/libç›®å½•ï¼› ä¹Ÿå¯ä»¥è‡ªå·±æŒ‡å®šï¼šè¿è¡Œç¨‹åºç”¨ç¯å¢ƒå˜é‡LD_LIBRARY_PATHæŒ‡å®šã€‚ è¿è¡Œæ—¶ä¸éœ€è¦å¤´æ–‡ä»¶ï¼Œæ‰€ä»¥å¤´æ–‡ä»¶ä¸ç”¨æ”¾åˆ°æ¿å­ä¸Š åº“çš„é—®é¢˜ è¿™æ˜¯é“¾æ¥ç¨‹åºæ—¶å‡ºç°çš„é—®é¢˜ ç³»ç»Ÿç›®å½•ï¼šå°±æ˜¯äº¤å‰ç¼–è¯‘å·¥å…·é“¾é‡Œçš„æŸä¸ªlibç›®å½•, ä¹Ÿå¯ä»¥è‡ªå·±æŒ‡å®šï¼šé“¾æ¥æ—¶ç”¨ -L diré€‰é¡¹æŒ‡å®š æ€ä¹ˆç¡®å®šâ€œç³»ç»Ÿç›®å½•â€ï¼Ÿæ‰§è¡Œä¸‹é¢å‘½ä»¤ç¡®å®šç›®å½•ï¼š echo 'main()&#123;&#125;'| arm-buildroot-linux-gnueabihf-gcc -E -v â€“ å®ƒä¼šåˆ—å‡ºå¤´æ–‡ä»¶ç›®å½•ã€åº“ç›®å½•(LIBRARY_PATH)ï¼Œä½ ç¼–è¯‘å‡ºåº“æ–‡ä»¶æ—¶ï¼Œå¯ä»¥æŠŠå®ƒæ”¾å…¥ç³»ç»Ÿåº“ç›®å½•ã€‚ è¿è¡Œé—®é¢˜ ç³»ç»Ÿç›®å½•ï¼šå°±æ˜¯æ¿å­ä¸Šçš„/libã€/usr/libç›®å½• ä¹Ÿå¯ä»¥è‡ªå·±æŒ‡å®šï¼š è¿è¡Œç¨‹åºç”¨ç¯å¢ƒå˜é‡LD_LIBRARY_PATHæŒ‡å®šï¼Œæ‰§è¡Œä»¥ä¸‹çš„å‘½ä»¤ 123export LD_LIBRARY_PATH=/xxx_dir ; ./testæˆ–LD_LIBRARY_PATH=/xxx_dir ./test äº¤å‰ç¼–è¯‘ å¦‚æœäº¤å‰ç¼–è¾‘å·¥å…·é“¾çš„å‰ç¼€æ˜¯arm-buildroot-linux-gnueabihf-ï¼Œæ¯”å¦‚arm-buildroot-linux-gnueabihf-gccï¼Œäº¤å‰ç¼–è¯‘å¼€æºè½¯ä»¶æ—¶ï¼Œå¦‚æœå®ƒé‡Œé¢æœ‰configure 123./configure --host=arm-buildroot-linux-gnueabihf(è¿™é‡Œè‡ªå·±ä¿®æ”¹) --prefix=$PWD/tmpmakemake install å°±å¯ä»¥åœ¨å½“å‰ç›®å½•çš„tmpç›®å½•ä¸‹çœ‹è§bin, lib, includeç­‰ç›®å½•ï¼Œé‡Œé¢å­˜æœ‰å¯æ‰§è¡Œç¨‹åºã€åº“ã€å¤´æ–‡ä»¶ã€‚ ç¨‹åºè¿è¡Œä¸éœ€è¦å¤´æ–‡ä»¶ freetype Freetypeæ˜¯å¼€æºçš„å­—ä½“å¼•æ“åº“ï¼Œå®ƒæä¾›ç»Ÿä¸€çš„æ¥å£æ¥è®¿é—®å¤šç§å­—ä½“æ ¼å¼æ–‡ä»¶ï¼Œä»è€Œå®ç°çŸ¢é‡å­—ä½“æ˜¾ç¤ºã€‚æˆ‘ä»¬åªéœ€è¦ç§»æ¤è¿™ä¸ªå­—ä½“å¼•æ“ï¼Œè°ƒç”¨å¯¹åº”çš„APIæ¥å£ï¼Œæä¾›å­—ä½“æ–‡ä»¶ï¼Œå°±å¯ä»¥è®©freetypeåº“å¸®æˆ‘ä»¬å–å‡ºå…³é”®ç‚¹ã€å®ç°é—­åˆæ›²çº¿ï¼Œå¡«å……é¢œè‰²ï¼Œè¾¾åˆ°æ˜¾ç¤ºçŸ¢é‡å­—ä½“çš„ç›®çš„ã€‚ ä¸€ä¸ªæ–‡å­—çš„æ˜¾ç¤ºè¿‡ç¨‹å¯ä»¥æ¦‚æ‹¬å¦‚ä¸‹ï¼š 123456789â‘  ç»™å®šä¸€ä¸ªå­—ç¬¦å¯ä»¥ç¡®å®šå®ƒçš„ç¼–ç å€¼(ASCIIã€UNICODEã€GB2312)ï¼›â‘¡ è®¾ç½®å­—ä½“å¤§å°ï¼›â‘¢ æ ¹æ®ç¼–ç å€¼ï¼Œä»æ–‡ä»¶å¤´éƒ¨ä¸­é€šè¿‡charmapæ‰¾åˆ°å¯¹åº”çš„å…³é”®ç‚¹(glyph)ï¼Œå®ƒä¼šæ ¹æ®å­—ä½“å¤§å°è°ƒæ•´å…³é”®ç‚¹ï¼›â‘£ æŠŠå…³é”®ç‚¹è½¬æ¢ä¸ºä½å›¾ç‚¹é˜µï¼›â‘¤ åœ¨LCDä¸Šæ˜¾ç¤ºå‡ºæ¥ å¦‚ä½•ä½¿ç”¨freetypeåº“ï¼Œæ€»ç»“å‡ºä¸‹åˆ—æ­¥éª¤ï¼š 1234567891011121314151617â‘  åˆå§‹åŒ–ï¼šFT_InitFreetypeâ‘¡ åŠ è½½(æ‰“å¼€)å­—ä½“Faceï¼šFT_New_Faceâ‘¢ è®¾ç½®å­—ä½“å¤§å°ï¼šFT_Set_Char_Sizes æˆ– FT_Set_Pixel_Sizesâ‘£ é€‰æ‹©charmapï¼šFT_Select_Charmapâ‘¤ æ ¹æ®ç¼–ç å€¼charcodeæ‰¾åˆ°glyph_indexï¼šglyph_index = FT_Get_Char_Indexï¼ˆfaceï¼Œcharcodeï¼‰â‘¥ æ ¹æ®glyph_indexå–å‡ºglyphï¼šFT_Load_Glyphï¼ˆfaceï¼Œglyph_indexï¼‰â‘¦ è½¬ä¸ºä½å›¾ï¼šFT_Render_Glyphâ‘§ ç§»åŠ¨æˆ–æ—‹è½¬:FT_Set_Transformâ‘¨ æœ€åæ˜¾ç¤ºå‡ºæ¥ã€‚ ä¸Šé¢çš„â‘¤â‘¥â‘¦å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå‡½æ•°ä»£æ›¿ï¼šFT_Load_Char(face, charcode, FT_LOAD_RENDER)ï¼Œå®ƒå°±å¯ä»¥å¾—åˆ°ä½å›¾ã€‚ demo: å¦‚æœæƒ³åœ¨ä»£ç ä¸­èƒ½ç›´æ¥ä½¿ç”¨UNICODEå€¼ï¼Œéœ€è¦ä½¿ç”¨wchar_tï¼Œå®½å­—ç¬¦, å å››ä¸ªå­—èŠ‚ æ³¨æ„ï¼šå¦‚æœtest_wchar.cæ˜¯ä»¥ANSI(GB2312)æ ¼å¼ä¿å­˜ï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥ç¼–è¯‘ï¼š gcc -finput-charset=GB2312 -fexec-charset=UTF-8 -o test_wchar test_wchar.c æ˜¾ç¤ºä¸€è¡Œæ–‡å­— ç¬›å¡å°”åæ ‡ç³»: åœ¨LCDçš„åæ ‡ç³»ä¸­ï¼ŒåŸç‚¹åœ¨å±å¹•çš„å·¦ä¸Šè§’ã€‚å¯¹äºç¬›å¡å°”åæ ‡ç³»ï¼ŒåŸç‚¹åœ¨å·¦ä¸‹è§’ã€‚freetypeä½¿ç”¨ç¬›å¡å°”åæ ‡ç³»ï¼Œåœ¨æ˜¾ç¤ºæ—¶éœ€è¦è½¬æ¢ä¸ºLCDåæ ‡ç³»ã€‚ ä»ä¸‹å›¾å¯çŸ¥ï¼ŒXæ–¹å‘åæ ‡å€¼æ˜¯ä¸€æ ·çš„ã€‚ åœ¨Yæ–¹å‘åæ ‡å€¼éœ€è¦æ¢ç®—ï¼Œå‡è®¾LCDçš„é«˜åº¦æ˜¯Vã€‚ åœ¨LCDåæ ‡ç³»ä¸­åæ ‡æ˜¯(x, y)ï¼Œé‚£ä¹ˆå®ƒåœ¨ç¬›å¡å°”åæ ‡ç³»ä¸­çš„åæ ‡å€¼ä¸º(x, V-y)ã€‚ åè¿‡æ¥ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œåœ¨ç¬›å¡å°”åæ ‡ç³»ä¸­åæ ‡æ˜¯(x, y)ï¼Œé‚£ä¹ˆå®ƒåœ¨LCDåæ ‡ç³»ä¸­åæ ‡å€¼ä¸º(x, V-y)ã€‚ å…·ä½“å‡½æ•°è§æ–‡æ¡£393é¡µ. è¾“å…¥ç³»ç»Ÿ å¤–è®¾éƒ½æ˜¯è¾“å…¥è®¾å¤‡,Linuxç³»ç»Ÿä¸ºäº†ç»Ÿä¸€ç®¡ç†è¿™äº›è¾“å…¥è®¾å¤‡ï¼Œå®ç°äº†ä¸€å¥—èƒ½å…¼å®¹æ‰€æœ‰è¾“å…¥è®¾å¤‡çš„æ¡†æ¶ï¼šè¾“å…¥ç³»ç»Ÿã€‚é©±åŠ¨å¼€å‘äººå‘˜åŸºäºè¿™å¥—æ¡†æ¶å¼€å‘å‡ºç¨‹åºï¼Œåº”ç”¨å¼€å‘äººå‘˜å°±å¯ä»¥ä½¿ç”¨ç»Ÿä¸€çš„APIå»ä½¿ç”¨è®¾å¤‡ã€‚ æ¡†æ¶ å‡è®¾ç”¨æˆ·ç¨‹åºç›´æ¥è®¿é—®/dev/input/event0è®¾å¤‡èŠ‚ç‚¹ï¼Œæˆ–è€…ä½¿ç”¨tslibè®¿é—®è®¾å¤‡èŠ‚ç‚¹ï¼Œæ•°æ®çš„æµç¨‹å¦‚ä¸‹ï¼š 1234567891011â‘  APPå‘èµ·è¯»æ“ä½œï¼Œè‹¥æ— æ•°æ®åˆ™ä¼‘çœ ï¼›â‘¡ ç”¨æˆ·æ“ä½œè®¾å¤‡ï¼Œç¡¬ä»¶ä¸Šäº§ç”Ÿä¸­æ–­ï¼›â‘¢ è¾“å…¥ç³»ç»Ÿé©±åŠ¨å±‚å¯¹åº”çš„é©±åŠ¨ç¨‹åºå¤„ç†ä¸­æ–­ï¼š è¯»å–åˆ°æ•°æ®ï¼Œè½¬æ¢ä¸ºæ ‡å‡†çš„è¾“å…¥äº‹ä»¶ï¼Œå‘æ ¸å¿ƒå±‚æ±‡æŠ¥ã€‚ æ‰€è°“è¾“å…¥äº‹ä»¶å°±æ˜¯ä¸€ä¸ªâ€œstruct input_eventâ€ç»“æ„ä½“ã€‚â‘£ æ ¸å¿ƒå±‚å¯ä»¥å†³å®šæŠŠè¾“å…¥äº‹ä»¶è½¬å‘ç»™ä¸Šé¢å“ªä¸ªhandleræ¥å¤„ç†ï¼š ä»handlerçš„åå­—æ¥çœ‹ï¼Œå®ƒå°±æ˜¯ç”¨æ¥å¤„è¾“å…¥æ“ä½œçš„ã€‚æœ‰å¤šç§handlerï¼Œæ¯”å¦‚ï¼ševdev_handler(å¸¸ç”¨)ã€ kbd_handlerã€joydev_handlerç­‰ç­‰ã€‚ æœ€å¸¸ç”¨çš„æ˜¯evdev_handlerï¼šå®ƒåªæ˜¯æŠŠinput_eventç»“æ„ä½“ä¿å­˜åœ¨å†…æ ¸bufferç­‰ï¼ŒAPPæ¥è¯»å–æ—¶å°±åŸåŸæœ¬æœ¬åœ°è¿”å›ã€‚å®ƒæ”¯æŒå¤šä¸ªAPPåŒæ—¶è®¿é—®è¾“å…¥è®¾å¤‡ï¼Œæ¯ä¸ªAPPéƒ½å¯ä»¥è·å¾—åŒä¸€ä»½è¾“å…¥äº‹ä»¶ã€‚ å½“APPæ­£åœ¨ç­‰å¾…æ•°æ®æ—¶ï¼Œevdev_handlerä¼šæŠŠå®ƒå”¤é†’ï¼Œè¿™æ ·APPå°±å¯ä»¥è¿”å›æ•°æ®ã€‚â‘¤ APPå¯¹è¾“å…¥äº‹ä»¶çš„å¤„ç†ï¼š APPè·å¾—æ•°æ®çš„æ–¹æ³•æœ‰2ç§ï¼šç›´æ¥è®¿é—®è®¾å¤‡èŠ‚ç‚¹(æ¯”å¦‚/dev/input/event0,1,2,...)ï¼Œæˆ–è€…é€šè¿‡tslibã€libinputè¿™ç±»åº“æ¥é—´æ¥è®¿é—®è®¾å¤‡èŠ‚ç‚¹ã€‚è¿™äº›åº“ç®€åŒ–äº†å¯¹æ•°æ®çš„å¤„ç†ã€‚ å†…æ ¸ä¸­æ€ä¹ˆè¡¨ç¤ºä¸€ä¸ªè¾“å…¥è®¾å¤‡ï¼Ÿ ä½¿ç”¨input_devç»“æ„ä½“æ¥è¡¨ç¤ºè¾“å…¥è®¾å¤‡ï¼Œå®ƒçš„å†…å®¹å¦‚ä¸‹ï¼š é©±åŠ¨ç¨‹åºä¸ŠæŠ¥çš„æ•°æ®å«ä¹‰ä¸‰é¡¹é‡è¦å†…å®¹ type è¡¨ç¤ºæ•°æ®æ˜¯å“ªä¸€ç±»å‹çš„, æ¯”å¦‚EV_KEY(è¡¨ç¤ºæŒ‰é”®ç±») å½“type=0è¡¨ç¤ºæ˜¯åŒæ­¥äº‹ä»¶ è¡¨ç¤ºç¡¬ä»¶å·²ç»ä¸ŠæŠ¥äº†æ‰€æœ‰æ•°æ® code æŒ‰é”®ç±»äº‹ä»¶é‡Œé¢æ˜¯å“ªä¸€ä¸ªæŒ‰é”®? ç¡¬ä»¶ä¸ŠæŠ¥çš„æ˜¯å“ªä¸ªæŒ‰é”® value å€¼, æ¯”å¦‚0(æ¾å¼€) 1(æŒ‰ä¸‹) 2(é•¿æŒ‰) äº‹ä»¶ä¹‹é—´çš„ç•Œçº¿ APPè¯»å–æ•°æ®æ—¶ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®ï¼Œæ¯”å¦‚ä¸€ä¸ªè§¦æ‘¸å±çš„ä¸€ä¸ªè§¦ç‚¹ä¼šä¸ŠæŠ¥Xã€Yä½ç½®ä¿¡æ¯ï¼Œä¹Ÿå¯èƒ½ä¼šä¸ŠæŠ¥å‹åŠ›å€¼ã€‚ APPæ€ä¹ˆçŸ¥é“å®ƒå·²ç»è¯»åˆ°äº†å®Œæ•´çš„æ•°æ®ï¼Ÿ é©±åŠ¨ç¨‹åºä¸ŠæŠ¥å®Œä¸€ç³»åˆ—çš„æ•°æ®åï¼Œä¼šä¸ŠæŠ¥ä¸€ä¸ªâ€œåŒæ­¥äº‹ä»¶â€ï¼Œè¡¨ç¤ºæ•°æ®ä¸ŠæŠ¥å®Œæ¯•ã€‚APPè¯»åˆ°â€œåŒæ­¥äº‹ä»¶â€æ—¶ï¼Œå°±çŸ¥é“å·²ç»è¯»å®Œäº†å½“å‰çš„æ•°æ®ã€‚ å¾—åˆ°ä¸€ç³»åˆ—çš„è¾“å…¥äº‹ä»¶ï¼Œå°±æ˜¯ä¸€ä¸ªä¸€ä¸ªâ€œstruct input_eventâ€ï¼Œå®ƒå®šä¹‰å¦‚ä¸‹ï¼š æ¯ä¸ªè¾“å…¥äº‹ä»¶input_eventä¸­éƒ½å«æœ‰å‘ç”Ÿæ—¶é—´ï¼štimevalè¡¨ç¤ºçš„æ˜¯â€œè‡ªç³»ç»Ÿå¯åŠ¨ä»¥æ¥è¿‡äº†å¤šå°‘æ—¶é—´â€ï¼Œå®ƒæ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œå«æœ‰â€œtv_secã€tv_usecâ€ä¸¤é¡¹(å³ç§’ã€å¾®ç§’)ã€‚ è°ƒè¯•æŠ€å·§ å…¥è®¾å¤‡çš„è®¾å¤‡èŠ‚ç‚¹åä¸º/dev/input/eventX(ä¹Ÿå¯èƒ½æ˜¯/dev/eventXï¼ŒXè¡¨ç¤º0ã€1ã€2ç­‰æ•°å­—)ã€‚æŸ¥çœ‹è®¾å¤‡èŠ‚ç‚¹ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š ls /dev/input/* -l æˆ– ls /dev/event* -l æ€ä¹ˆçŸ¥é“è¿™äº›è®¾å¤‡èŠ‚ç‚¹å¯¹åº”ä»€ä¹ˆç¡¬ä»¶å‘¢ï¼Ÿå¯ä»¥åœ¨æ¿å­ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š cat /proc/bus/input/devices è¿™æ¡æŒ‡ä»¤çš„å«ä¹‰å°±æ˜¯è·å–ä¸eventå¯¹åº”çš„ç›¸å…³è®¾å¤‡ä¿¡æ¯ï¼Œå¯ä»¥çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„ç»“æœï¼š è¿™é‡Œçš„Iã€Nã€Pã€Sã€Uã€Hã€Bå¯¹åº”çš„æ¯ä¸€è¡Œæ˜¯ä»€ä¹ˆå«ä¹‰: 123456789101112I:id of the device(è®¾å¤‡ID) è¯¥å‚æ•°ç”±ç»“æ„ä½“struct input_idæ¥è¿›è¡Œæè¿°N:name of the device è®¾å¤‡åç§°P:physical path to the device in the system hierarchy ç³»ç»Ÿå±‚æ¬¡ç»“æ„ä¸­è®¾å¤‡çš„ç‰©ç†è·¯å¾„ã€‚S:sysfs path ä½äºsysæ–‡ä»¶ç³»ç»Ÿçš„è·¯å¾„U:unique identification code for the device(if device has it) è®¾å¤‡çš„å”¯ä¸€æ ‡è¯†ç H:list of input handles associated with the device. ä¸è®¾å¤‡å…³è”çš„è¾“å…¥å¥æŸ„åˆ—è¡¨ã€‚B:bitmaps(ä½å›¾) PROP:device properties and quirks(è®¾å¤‡å±æ€§) EV:types of events supported by the device(è®¾å¤‡æ”¯æŒçš„äº‹ä»¶ç±»å‹) KEY:keys/buttons this device has(æ­¤è®¾å¤‡å…·æœ‰çš„é”®/æŒ‰é’®) MSC:miscellaneous events supported by the device(è®¾å¤‡æ”¯æŒçš„å…¶ä»–äº‹ä»¶) LED:leds present on the device(è®¾å¤‡ä¸Šçš„æŒ‡ç¤ºç¯) æ¯”å¦‚ä¸Šå›¾ä¸­â€œB: EV=bâ€ç”¨æ¥è¡¨ç¤ºè¯¥è®¾å¤‡æ”¯æŒå“ªç±»è¾“å…¥äº‹ä»¶ã€‚bçš„äºŒè¿›åˆ¶æ˜¯1011ï¼Œbit0ã€1ã€3ä¸º1ï¼Œè¡¨ç¤ºè¯¥è®¾å¤‡æ”¯æŒ0ã€1ã€3è¿™ä¸‰ç±»äº‹ä»¶ï¼Œå³EV_SYNã€EV_KEYã€EV_ABSã€‚ å†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œâ€œB: ABS=2658000 3â€å¦‚ä½•ç†è§£ï¼Ÿ å®ƒè¡¨ç¤ºè¯¥è®¾å¤‡æ”¯æŒEV_ABSè¿™ä¸€ç±»äº‹ä»¶ä¸­çš„å“ªä¸€äº›äº‹ä»¶ã€‚è¿™æ˜¯2ä¸ª32ä½çš„æ•°å­—ï¼š0x2658000ã€0x3ï¼Œé«˜ä½åœ¨å‰ä½ä½åœ¨åï¼Œç»„æˆä¸€ä¸ª64ä½çš„æ•°å­—ï¼šâ€œ0x2658000,00000003â€ï¼Œæ•°å€¼ä¸º1çš„ä½æœ‰ï¼š0ã€1ã€47ã€48ã€50ã€53ã€54ï¼Œå³ï¼š0ã€1ã€0x2fã€0x30ã€0x32ã€0x35ã€0x36,å¯¹åº”ä¸€äº›å®. å‘½ä»¤è¯»å– è°ƒè¯•è¾“å…¥ç³»ç»Ÿæ—¶ï¼Œç›´æ¥æ‰§è¡Œç±»ä¼¼ä¸‹é¢çš„å‘½ä»¤ï¼Œç„¶åæ“ä½œå¯¹åº”çš„è¾“å…¥è®¾å¤‡å³å¯è¯»å‡ºæ•°æ®ï¼š hexdump /dev/input/event0 ä¸Šå›¾ä¸­çš„typeä¸º3ï¼Œå¯¹åº”EV_ABSï¼›codeä¸º0x35å¯¹åº”ABS_MT_POSITION_Xï¼›codeä¸º0x36å¯¹åº”ABS_MT_POSITION_Yã€‚ ä¸Šå›¾ä¸­è¿˜å‘ç°æœ‰2ä¸ªåŒæ­¥äº‹ä»¶ï¼šå®ƒçš„typeã€codeã€valueéƒ½ä¸º0ã€‚è¡¨ç¤ºç”µå®¹å±ä¸ŠæŠ¥äº†2æ¬¡å®Œæ•´çš„æ•°æ®ã€‚ ä¸ç”¨åº“å¼€å‘åº”ç”¨ è¾“å…¥ç³»ç»Ÿæ”¯æŒå®Œæ•´çš„APIæ“ä½œ : æ”¯æŒè¿™äº›æœºåˆ¶ï¼šé˜»å¡ã€éé˜»å¡ã€POLL/SELECTã€å¼‚æ­¥é€šçŸ¥ã€‚ APPè®¿é—®ç¡¬ä»¶çš„å‡ ç§æ–¹å¼ 123456789â‘  æ—¶ä¸æ—¶è¿›æˆ¿é—´çœ‹ä¸€ä¸‹ï¼šæŸ¥è¯¢æ–¹å¼ç®€å•ï¼Œä½†æ˜¯ç´¯â‘¡ è¿›å»æˆ¿é—´é™ªå°å­©ä¸€èµ·ç¡è§‰ï¼Œå°å­©é†’äº†ä¼šåµé†’å¥¹ï¼šä¼‘çœ -å”¤é†’ä¸ç´¯ï¼Œä½†æ˜¯å¦ˆå¦ˆå¹²ä¸äº†æ´»äº†â‘¢ å¦ˆå¦ˆè¦å¹²å¾ˆå¤šæ´»ï¼Œä½†æ˜¯å¯ä»¥é™ªå°å­©ç¡ä¸€ä¼šï¼Œå®šä¸ªé—¹é’Ÿï¼špollæ–¹å¼è¦æµªè´¹ç‚¹æ—¶é—´ï¼Œä½†æ˜¯å¯ä»¥ç»§ç»­å¹²æ´»ã€‚å¦ˆå¦ˆè¦ä¹ˆæ˜¯è¢«å°å­©åµé†’ï¼Œè¦ä¹ˆæ˜¯è¢«é—¹é’Ÿåµé†’ã€‚â‘£ å¦ˆå¦ˆåœ¨å®¢å…å¹²æ´»ï¼Œå°å­©é†’äº†ä»–ä¼šè‡ªå·±èµ°å‡ºæˆ¿é—¨å‘Šè¯‰å¦ˆå¦ˆï¼šå¼‚æ­¥é€šçŸ¥å¦ˆå¦ˆã€å°å­©äº’ä¸è€½è¯¯ã€‚ é€šè¿‡ioctlè·å–è®¾å¤‡ä¿¡æ¯ï¼Œioctlçš„å‚æ•°å¦‚ä¸‹ï¼š int ioctl(int fd, unsigned long request, ...); æŸ¥è¯¢æ–¹å¼ APPè°ƒç”¨openå‡½æ•°æ—¶ï¼Œä¼ å…¥â€œO_NONBLOCKâ€è¡¨ç¤ºâ€œéé˜»å¡â€ã€‚ APPè°ƒç”¨readå‡½æ•°è¯»å–æ•°æ®æ—¶ï¼Œå¦‚æœé©±åŠ¨ç¨‹åºä¸­æœ‰æ•°æ®ï¼Œé‚£ä¹ˆAPPçš„readå‡½æ•°ä¼šè¿”å›æ•°æ®ï¼Œå¦åˆ™ä¹Ÿä¼šç«‹åˆ»è¿”å›é”™è¯¯ã€‚ ä¼‘çœ -å”¤é†’æ–¹å¼ APPè°ƒç”¨openå‡½æ•°æ—¶ï¼Œä¸è¦ä¼ å…¥â€œO_NONBLOCKâ€ã€‚ APPè°ƒç”¨readå‡½æ•°è¯»å–æ•°æ®æ—¶ï¼Œå¦‚æœé©±åŠ¨ç¨‹åºä¸­æœ‰æ•°æ®ï¼Œé‚£ä¹ˆAPPçš„readå‡½æ•°ä¼šè¿”å›æ•°æ®ï¼›å¦åˆ™APPå°±ä¼šåœ¨å†…æ ¸æ€ä¼‘çœ ï¼Œå½“æœ‰æ•°æ®æ—¶é©±åŠ¨ç¨‹åºä¼šæŠŠAPPå”¤é†’ï¼Œreadå‡½æ•°æ¢å¤æ‰§è¡Œå¹¶è¿”å›æ•°æ®ç»™APPã€‚ POLL/SELECTæ–¹å¼ POLLæœºåˆ¶ã€SELECTæœºåˆ¶æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œåªæ˜¯APPæ¥å£å‡½æ•°ä¸ä¸€æ ·ã€‚åœ¨è°ƒç”¨pollã€selectå‡½æ•°æ—¶å¯ä»¥ä¼ å…¥â€œè¶…æ—¶æ—¶é—´â€ã€‚åœ¨è¿™æ®µæ—¶é—´å†…ï¼Œæ¡ä»¶åˆé€‚æ—¶(æ¯”å¦‚æœ‰æ•°æ®å¯è¯»ã€æœ‰ç©ºé—´å¯å†™)å°±ä¼šç«‹åˆ»è¿”å›ï¼Œå¦åˆ™ç­‰åˆ°â€œè¶…æ—¶æ—¶é—´â€ç»“æŸæ—¶è¿”å›é”™è¯¯ã€‚ APPå…ˆè°ƒç”¨openå‡½æ•°æ—¶ã€‚APPä¸æ˜¯ç›´æ¥è°ƒç”¨readå‡½æ•°ï¼Œè€Œæ˜¯å…ˆè°ƒç”¨pollæˆ–selectå‡½æ•°ï¼Œè¿™2ä¸ªå‡½æ•°ä¸­å¯ä»¥ä¼ å…¥â€œè¶…æ—¶æ—¶é—´â€ã€‚å®ƒä»¬çš„ä½œç”¨æ˜¯ï¼šå¦‚æœé©±åŠ¨ç¨‹åºä¸­æœ‰æ•°æ®ï¼Œåˆ™ç«‹åˆ»è¿”å›ï¼›å¦åˆ™å°±ä¼‘çœ ã€‚åœ¨ä¼‘çœ æœŸé—´ï¼Œå¦‚æœæœ‰äººæ“ä½œäº†ç¡¬ä»¶ï¼Œé©±åŠ¨ç¨‹åºè·å¾—æ•°æ®åå°±ä¼šæŠŠAPPå”¤é†’ï¼Œå¯¼è‡´pollæˆ–selectç«‹åˆ»è¿”å›ï¼›å¦‚æœåœ¨â€œè¶…æ—¶æ—¶é—´â€å†…æ— äººæ“ä½œç¡¬ä»¶ï¼Œåˆ™æ—¶é—´åˆ°åpollæˆ–selectå‡½æ•°ä¹Ÿä¼šè¿”å›ã€‚ poll/selectå‡½æ•°å¯ä»¥ç›‘æµ‹å¤šä¸ªæ–‡ä»¶ï¼Œå¯ä»¥ç›‘æµ‹å¤šç§äº‹ä»¶ï¼š äº‹ä»¶ç±»å‹ è¯´æ˜ POLLIN æœ‰æ•°æ®å¯è¯» POLLRDNORM ç­‰åŒäºPOLLIN POLLRDBAND Priority band data can be readï¼Œæœ‰ä¼˜å…ˆçº§è¾ƒè¾ƒé«˜çš„â€œband dataâ€å¯è¯» Linuxç³»ç»Ÿä¸­å¾ˆå°‘ä½¿ç”¨è¿™ä¸ªäº‹ä»¶ POLLPRI é«˜ä¼˜å…ˆçº§æ•°æ®å¯è¯» POLLOUT å¯ä»¥å†™æ•°æ® POLLWRNORM ç­‰åŒäºPOLLOUT POLLWRBAND Priority data may be written POLLERR å‘ç”Ÿäº†é”™è¯¯ POLLHUP æŒ‚èµ· POLLNVAL æ— æ•ˆçš„è¯·æ±‚ï¼Œä¸€èˆ¬æ˜¯fdæœªopen åœ¨è°ƒç”¨pollå‡½æ•°æ—¶ï¼Œè¦æŒ‡æ˜ï¼š â‘  ä½ è¦ç›‘æµ‹å“ªä¸€ä¸ªæ–‡ä»¶ï¼šå“ªä¸€ä¸ªfd â‘¡ ä½ æƒ³ç›‘æµ‹è¿™ä¸ªæ–‡ä»¶çš„å“ªç§äº‹ä»¶ï¼šæ˜¯POLLINã€è¿˜æ˜¯POLLOUT æœ€åï¼Œåœ¨pollå‡½æ•°è¿”å›æ—¶ï¼Œè¦åˆ¤æ–­çŠ¶æ€ã€‚ 1ä»£ç è¡¥å…… å¼‚æ­¥é€šçŸ¥æ–¹å¼ æ‰€è°“å¼‚æ­¥é€šçŸ¥ï¼Œå°±æ˜¯APPå¯ä»¥å¿™è‡ªå·±çš„äº‹ï¼Œå½“é©±åŠ¨ç¨‹åºç”¨æ•°æ®æ—¶å®ƒä¼šä¸»åŠ¨ç»™APPå‘ä¿¡å·ï¼Œè¿™ä¼šå¯¼è‡´APPæ‰§è¡Œä¿¡å·å¤„ç†å‡½æ•°ã€‚ 1234567â‘  è°å‘ï¼šé©±åŠ¨ç¨‹åºå‘â‘¡ å‘ä»€ä¹ˆï¼šä¿¡å·â‘¢ å‘ä»€ä¹ˆä¿¡å·ï¼šSIGIOâ‘£ æ€ä¹ˆå‘ï¼šå†…æ ¸é‡Œæä¾›æœ‰å‡½æ•°â‘¤ å‘ç»™è°ï¼šAPPï¼ŒAPPè¦æŠŠè‡ªå·±å‘Šè¯‰é©±åŠ¨â‘¥ APPæ”¶åˆ°ååšä»€ä¹ˆï¼šæ‰§è¡Œä¿¡å·å¤„ç†å‡½æ•°â‘¦ ä¿¡å·å¤„ç†å‡½æ•°å’Œä¿¡å·ï¼Œä¹‹é—´æ€ä¹ˆæŒ‚é’©ï¼šAPPæ³¨å†Œä¿¡å·å¤„ç†å‡½æ•° é™¤äº†æ³¨å†ŒSIGIOçš„å¤„ç†å‡½æ•°ï¼ŒAPPè¿˜è¦åšä»€ä¹ˆäº‹ï¼Ÿæƒ³æƒ³è¿™å‡ ä¸ªé—®é¢˜ï¼š â‘  å†…æ ¸é‡Œæœ‰é‚£ä¹ˆå¤šé©±åŠ¨ï¼Œä½ æƒ³è®©å“ªä¸€ä¸ªé©±åŠ¨ç»™ä½ å‘SIGIOä¿¡å·ï¼Ÿ APPè¦æ‰“å¼€é©±åŠ¨ç¨‹åºçš„è®¾å¤‡èŠ‚ç‚¹ã€‚ â‘¡ é©±åŠ¨ç¨‹åºæ€ä¹ˆçŸ¥é“è¦å‘ä¿¡å·ç»™ä½ è€Œä¸æ˜¯åˆ«äººï¼Ÿ APPè¦æŠŠè‡ªå·±çš„è¿›ç¨‹IDå‘Šè¯‰é©±åŠ¨ç¨‹åºã€‚ â‘¢ APPæœ‰æ—¶å€™æƒ³æ”¶åˆ°ä¿¡å·ï¼Œæœ‰æ—¶å€™åˆä¸æƒ³æ”¶åˆ°ä¿¡å·ï¼š åº”è¯¥å¯ä»¥æŠŠAPPçš„æ„æ„¿å‘Šè¯‰é©±åŠ¨ï¼šè®¾ç½®Flagé‡Œé¢çš„FASYNCä½ä¸º1ï¼Œä½¿èƒ½â€œå¼‚æ­¥é€šçŸ¥â€ã€‚ tslib tslibæ˜¯ä¸€ä¸ªè§¦æ‘¸å±çš„å¼€æºåº“ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥è®¿é—®è§¦æ‘¸å±è®¾å¤‡ï¼Œå¯ä»¥ç»™è¾“å…¥è®¾å¤‡æ·»åŠ å„ç§â€œfilterâ€(è¿‡æ»¤å™¨ï¼Œå°±æ˜¯å„ç§å¤„ç†)ï¼Œåœ°å€æ˜¯ï¼šhttp://www.tslib.org/ã€‚ ç¼–è¯‘tslibåï¼Œå¯ä»¥å¾—åˆ°libtsåº“ï¼Œè¿˜å¯ä»¥å¾—åˆ°å„ç§å·¥å…·ï¼šè¾ƒå‡†å·¥å…·ã€æµ‹è¯•å·¥å…·ã€‚ å…·ä½“å¾…è¡¥å……. ç½‘ç»œé€šä¿¡ æ•°æ®ä¼ è¾“ï¼Œéƒ½æœ‰ä¸‰ä¸ªè¦ç´  ï¼šæºã€ç›®çš„ã€é•¿åº¦ã€‚ å¾…è¡¥å…… å¤šçº¿ç¨‹ å¾…è¡¥å…… ä¸²å£ UARTï¼šé€šç”¨å¼‚æ­¥æ”¶å‘ä¼ è¾“å™¨ï¼ˆUniversal Asynchronous Receiver/Transmitter)ï¼Œç®€ç§°ä¸²å£ å‚æ•° æ³¢ç‰¹ç‡ï¼šä¸€èˆ¬é€‰æ³¢ç‰¹ç‡éƒ½ä¼šæœ‰9600,19200,115200ç­‰é€‰é¡¹ã€‚å…¶å®æ„æ€å°±æ˜¯æ¯ç§’ä¼ è¾“è¿™ä¹ˆå¤šä¸ªæ¯”ç‰¹ä½æ•°(bit)ã€‚ èµ·å§‹ä½:å…ˆå‘å‡ºä¸€ä¸ªé€»è¾‘â€0â€çš„ä¿¡å·ï¼Œè¡¨ç¤ºä¼ è¾“æ•°æ®çš„å¼€å§‹ã€‚ æ•°æ®ä½ï¼šå¯ä»¥æ˜¯5~8ä½é€»è¾‘â€0â€æˆ–â€1â€ã€‚å¦‚ASCIIç ï¼ˆ7ä½ï¼‰ï¼Œæ‰©å±•BCDç ï¼ˆ8ä½ï¼‰ã€‚å°ç«¯ä¼ è¾“ã€‚ æ ¡éªŒä½ï¼šæ•°æ®ä½åŠ ä¸Šè¿™ä¸€ä½åï¼Œä½¿å¾—â€œ1â€çš„ä½æ•°åº”ä¸ºå¶æ•°(å¶æ ¡éªŒ)æˆ–å¥‡æ•°(å¥‡æ ¡éªŒ)ï¼Œä»¥æ­¤æ¥æ ¡éªŒæ•°æ®ä¼ é€çš„æ­£ç¡®æ€§ã€‚ åœæ­¢ä½ï¼šå®ƒæ˜¯ä¸€ä¸ªå­—ç¬¦æ•°æ®çš„ç»“æŸæ ‡å¿—ã€‚ å¦‚ä½•å‘é€æ•°æ® è¦å‘é€æ•°æ®æ—¶ï¼ŒCPUæ§åˆ¶(UARTå•å…ƒ)å†…å­˜è¦å‘é€çš„æ•°æ®é€šè¿‡FIFOä¼ ç»™UARTé‡Œé¢çš„ç§»ä½å™¨(è¯¸ä½å‘é€)ï¼Œä¾æ¬¡å°†æ•°æ®å‘é€å‡ºå»ï¼Œåœ¨å‘é€å®Œæˆåäº§ç”Ÿä¸­æ–­æé†’CPUä¼ è¾“å®Œæˆã€‚ æ¥æ”¶æ•°æ®æ—¶ï¼Œè·å–æ¥æ”¶å¼•è„šçš„ç”µå¹³ï¼Œé€ä½æ”¾è¿›æ¥æ”¶ç§»ä½å™¨ï¼Œå†æ”¾å…¥FIFOï¼Œç¨‹åºå†ä»FIFOä¸­æŠŠæ•°æ®å–å‡ºæ¥å†™å…¥å†…å­˜ã€‚åœ¨æ¥æ”¶å®Œæˆåäº§ç”Ÿä¸­æ–­æé†’CPUä¼ è¾“å®Œæˆã€‚ TTYä½“ç³»ä¸­è®¾å¤‡èŠ‚ç‚¹çš„å·®åˆ« è®¾å¤‡èŠ‚ç‚¹ å«ä¹‰ /dev/ttyS0ã€/dev/ttySAC0 ä¸²å£ /dev/tty1ã€/dev/tty2ã€/dev/tty3ã€â€¦â€¦ è™šæ‹Ÿç»ˆç«¯è®¾å¤‡èŠ‚ç‚¹ /dev/tty0 å‰å°ç»ˆç«¯ /dev/tty ç¨‹åºè‡ªå·±çš„ç»ˆç«¯ï¼Œå¯èƒ½æ˜¯ä¸²å£ã€ä¹Ÿå¯èƒ½æ˜¯è™šæ‹Ÿç»ˆç«¯ /dev/console æ§åˆ¶å°ï¼Œåˆå†…æ ¸çš„cmdlineå‚æ•°ç¡®å®š TTY /Terminal /Console /UART ä¸‹å›¾ä¸­ä¸¤æ¡çº¢çº¿ä¹‹å†…çš„ä»£ç è¢«ç§°ä¸ºTTYå­ç³»ç»Ÿã€‚å®ƒæ—¢æ”¯æŒUARTï¼Œä¹Ÿæ”¯æŒé”®ç›˜ã€æ˜¾ç¤ºå™¨ï¼Œè¿˜æ”¯æŒæ›´å¤æ‚çš„åŠŸèƒ½(æ¯”å¦‚ä¼ªç»ˆç«¯) ctrl + alt +f4(x) åˆ‡æ¢ å…³äº /dev/ttyN é€šè¿‡å†…æ ¸çš„cmdlineæ¥æŒ‡å®šï¼Œæ¯”å¦‚: console=ttyS0 console=tty æ›´å¤š: TTYé©±åŠ¨æ¡†æ¶ TTYè¿™ä¸€å±‚å¸®ä½ å±è”½äº†ä¸åŒè¾“å…¥è¾“å‡ºè®¾å¤‡çš„å·®åˆ«,ä¸²å£ é”®ç›˜ç­‰çš„é©±åŠ¨ç¨‹åºè‚¯å®šä¼šå‘ä¸Šæ³¨å†ŒæŸä¸ªç»“æ„ä½“, å†TTYè¿™å±‚ä½¿ç”¨åŒä¸€ä¸ªæ¥å£è®¿é—®ä¸åŒçš„è®¾å¤‡ è™šæ‹Ÿç»ˆç«¯: å¯¹äºåŒä¸€å¥—é”®ç›˜å’Œæ˜¾ç¤ºå™¨, å®ƒå¯ä»¥å¯¹åº”ä¸åŒçš„ä¸ªè™šæ‹Ÿç»ˆç«¯, å¯¹äºè™šæ‹Ÿç»ˆç«¯åˆæŠ½è±¡å‡ºäº†ä¸€å±‚ virtual terminal(ä¸²å£æ²¡æœ‰è¿™ä¸ª) , æœ‰å¾ˆå¤šä¸ªè™šæ‹Ÿç»ˆç«¯, é©±åŠ¨ç¨‹åºå¾—åˆ°é”®ç›˜ä¿¡æ¯æ—¶ä¼šå‘é€ç»™å‰æ’çš„è™šæ‹Ÿç»ˆç«¯, åº”ç”¨ç¨‹åºè¦æ˜¾ç¤ºçš„æ•°æ®ä¹Ÿä¼šå­˜å…¥æŸä¸€ä¸ªbuffer, è¦æ˜¾ç¤ºæ—¶å†ä»bufferä¸­å–å‡ºæ¥, è¡Œè§„ç¨‹ ä¹Ÿå«åšå›æ˜¾ echo, æ¯”è¾ƒæœ‰æ„æ€ : è¯´çš„æ˜¯åœ¨é”®ç›˜ä¸Šè¾“å…¥ä¸€ä¸ªå­—ç¬¦æ‰€å‘ç”Ÿçš„äº‹æƒ…. åˆ é™¤çš„è¯,åˆ é™¤å‘½ä»¤(å°±æ˜¯å­—èŠ‚å¯¹åº”çš„ç¼–ç ) å‘é€åˆ°å,é©±åŠ¨ä¸ŠæŠ¥è¡Œè§„æˆ, å®ƒæŠŠbufä¸­çš„lsaåˆ é™¤æ‰a,ç„¶åå°†åˆ é™¤å‘½ä»¤å†å‘é€å›å», æ‰€è°“åˆ é™¤aåªæ˜¯æ˜¾ç¤ºæ•ˆæœ, ä¸²å£å·¥å…·è¿˜æ˜¯æ¥æ”¶åˆ°äº†4ä¸ªå­—èŠ‚çš„æ•°æ®: l s a é€€æ ¼é”® å›è½¦é”®: ä¸€æ ·çš„,â€¦, å°†bufä¸­çš„æ•°æ®ä¸Šä¼ ç»™APP(shell), æŠŠç»“æœå†å‘ç»™è¡Œè§„æˆ,å†å‘ç»™ä¸²å£é©±åŠ¨,ç„¶åPCæ˜¾ç¤º. Linuxä¸²å£åº”ç”¨ç¼–ç¨‹ ä¸²å£æ€ä¹ˆæ’ è¿™ä¸ªä½ç½®æ˜¯ä¸²å£,é  ä¸²å£API åœ¨Linuxç³»ç»Ÿä¸­ï¼Œæ“ä½œè®¾å¤‡çš„ç»Ÿä¸€æ¥å£å°±æ˜¯ï¼šopen/ioctl/read/writeã€‚å¯¹äºUARTï¼Œåˆåœ¨ioctlä¹‹ä¸Šå°è£…äº†å¾ˆå¤šå‡½æ•°ï¼Œä¸»è¦æ˜¯ç”¨æ¥è®¾ç½®è¡Œè§„ç¨‹ã€‚ æ‰€ä»¥å¯¹äºUARTï¼Œç¼–ç¨‹çš„å¥—è·¯å°±æ˜¯ï¼š open -&gt; è®¾ç½®è¡Œè§„ç¨‹ï¼Œæ¯”å¦‚æ³¢ç‰¹ç‡ã€æ•°æ®ä½ã€åœæ­¢ä½ã€æ£€éªŒä½ã€RAWæ¨¡å¼ã€ä¸€æœ‰æ•°æ®å°±è¿”å› -&gt; read/write æ€ä¹ˆè®¾ç½®è¡Œè§„ç¨‹ï¼Ÿè¡Œè§„ç¨‹çš„å‚æ•°ç”¨ç»“æ„ä½“termiosæ¥è¡¨ç¤º,æŠŠè¿™ä¸ªç»“æ„ä½“æ„é€ å¥½ä¹‹åå†å‘ç»™é©±åŠ¨ç¨‹åº. è¿™äº›å‡½æ•°åœ¨åç§°ä¸Šæœ‰ä¸€äº›æƒ¯ä¾‹ï¼š `` tcï¼šterminal contorl cf: control flflag` å‡½æ•°å ä½œç”¨ tcgetattr get terminal attributesï¼Œè·å¾—ç»ˆç«¯çš„å±æ€§(è·å¾—é©±åŠ¨ç¨‹åºå‚æ•°) tcsetattr set terminal attributesï¼Œä¿®æ”¹ç»ˆç«¯å‚æ•° tcflflush æ¸…ç©ºç»ˆç«¯æœªå®Œæˆçš„è¾“å…¥/è¾“å‡ºè¯·æ±‚åŠæ•°æ® cfsetispeed sets the input baud rateï¼Œè®¾ç½®è¾“å…¥æ³¢ç‰¹ç‡ cfsetospeed sets the output baud rateï¼Œè®¾ç½®è¾“å‡ºæ³¢ç‰¹ç‡ cfsetspeed åŒæ—¶è®¾ç½®è¾“å…¥ã€è¾“å‡ºæ³¢ç‰¹ç‡ éœ€è¦è®¾ç½®å¥½termiosä¸­çš„å‚æ•°. å®ä¾‹(å›ç¯) 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include &lt;sys/types.h&gt;#include &lt;errno.h&gt;#include &lt;sys/stat.h&gt;#include &lt;fcntl.h&gt;#include &lt;unistd.h&gt;#include &lt;termios.h&gt;#include &lt;stdlib.h&gt;/* set_opt(fd,115200,8,&#x27;N&#x27;,1) */int set_opt(int fd,int nSpeed, int nBits, char nEvent, int nStop)&#123; struct termios newtio,oldtio; if ( tcgetattr( fd,&amp;oldtio) != 0) &#123; //è·å¾—é©±åŠ¨ç¨‹åºä¸­é»˜è®¤çš„å‚æ•° perror(&quot;SetupSerial 1&quot;); return -1; &#125; //æ¸…é™¤ ä½¿ç”¨åŸå§‹æ¨¡å¼ bzero( &amp;newtio, sizeof( newtio ) ); newtio.c_cflag |= CLOCAL | CREAD; newtio.c_cflag &amp;= ~CSIZE; newtio.c_lflag &amp;= ~(ICANON | ECHO | ECHOE | ISIG); /*Input*/ newtio.c_oflag &amp;= ~OPOST; /*Output*/ switch( nBits ) &#123; case 7: newtio.c_cflag |= CS7; break; case 8: newtio.c_cflag |= CS8; break; &#125; switch( nEvent ) &#123; case &#x27;O&#x27;: newtio.c_cflag |= PARENB; newtio.c_cflag |= PARODD; newtio.c_iflag |= (INPCK | ISTRIP); break; case &#x27;E&#x27;: newtio.c_iflag |= (INPCK | ISTRIP); newtio.c_cflag |= PARENB; newtio.c_cflag &amp;= ~PARODD; break; case &#x27;N&#x27;: newtio.c_cflag &amp;= ~PARENB; break; &#125; switch( nSpeed ) &#123; case 2400: cfsetispeed(&amp;newtio, B2400); cfsetospeed(&amp;newtio, B2400); break; case 4800: cfsetispeed(&amp;newtio, B4800); cfsetospeed(&amp;newtio, B4800); break; case 9600: cfsetispeed(&amp;newtio, B9600); cfsetospeed(&amp;newtio, B9600); break; case 115200: cfsetispeed(&amp;newtio, B115200); cfsetospeed(&amp;newtio, B115200); break; default: cfsetispeed(&amp;newtio, B9600); cfsetospeed(&amp;newtio, B9600); break; &#125; if( nStop == 1 ) newtio.c_cflag &amp;= ~CSTOPB; else if ( nStop == 2 ) newtio.c_cflag |= CSTOPB; newtio.c_cc[VMIN] = 1; /* è¯»æ•°æ®æ—¶çš„æœ€å°å­—èŠ‚æ•°: æ²¡è¯»åˆ°è¿™äº›æ•°æ®æˆ‘å°±ä¸è¿”å›! */ newtio.c_cc[VTIME] = 0; /* ç­‰å¾…ç¬¬1ä¸ªæ•°æ®çš„æ—¶é—´: * æ¯”å¦‚VMINè®¾ä¸º10è¡¨ç¤ºè‡³å°‘è¯»åˆ°10ä¸ªæ•°æ®æ‰è¿”å›, * ä½†æ˜¯æ²¡æœ‰æ•°æ®æ€»ä¸èƒ½ä¸€ç›´ç­‰å§? å¯ä»¥è®¾ç½®VTIME(å•ä½æ˜¯10ç§’) * å‡è®¾VTIME=1ï¼Œè¡¨ç¤º: * 10ç§’å†…ä¸€ä¸ªæ•°æ®éƒ½æ²¡æœ‰çš„è¯å°±è¿”å› * å¦‚æœ10ç§’å†…è‡³å°‘è¯»åˆ°äº†1ä¸ªå­—èŠ‚ï¼Œé‚£å°±ç»§ç»­ç­‰å¾…ï¼Œå®Œå…¨è¯»åˆ°VMINä¸ªæ•°æ®å†è¿”å› */ tcflush(fd,TCIFLUSH); if((tcsetattr(fd,TCSANOW,&amp;newtio))!=0) &#123; perror(&quot;com set error&quot;); return -1; &#125; //printf(&quot;set done!\\n&quot;); return 0;&#125;int open_port(char *com)&#123; int fd; //fd = open(com, O_RDWR|O_NOCTTY|O_NDELAY); fd = open(com, O_RDWR|O_NOCTTY);//æ‰“å¼€æŸä¸ªè®¾å¤‡èŠ‚ç‚¹ O_NOCTTY:ç¨‹åºæ‰“å¼€ä¸²å£ä¹‹åä¸è¦æŠŠè¿™ä¸ªä¸²å£ç”¨ä½œæ§åˆ¶ç»ˆç«¯(serialè¿æ¥å°±æ˜¯æ§åˆ¶ç»ˆç«¯,è¾“å…¥å­—ç¬¦è½¬æ¢æˆæŸäº›ä¿¡å·å»æ§åˆ¶) if (-1 == fd)&#123; return(-1); &#125; //fcntl(fd,F_SETEL, FNDELAY); è¯»æ•°æ®æ—¶ä¸ç­‰å¾…, æ²¡æœ‰æ•°æ®å°±è¿”å›0 if(fcntl(fd, F_SETFL, 0)&lt;0) /* è®¾ç½®ä¸²å£ä¸ºé˜»å¡çŠ¶æ€*/ //è¯»å†™æ•°æ®ä¸æˆåŠŸå°±ä¼šä¼‘çœ  &#123; printf(&quot;fcntl failed!\\n&quot;); return -1; &#125; return fd;&#125;/* * ./serial_send_recv &lt;dev&gt;(è®¾å¤‡èŠ‚ç‚¹) */int main(int argc, char **argv)&#123; int fd; int iRet; char c; /* 1. open *///æ‰“å¼€ /* 2. setup * 115200,8N1 * RAW mode * return data immediately *///è®¾ç½® /* 3. write and read */ if (argc != 2) &#123; printf(&quot;Usage: \\n&quot;); printf(&quot;%s &lt;/dev/ttySAC1 or other&gt;\\n&quot;, argv[0]); return -1; &#125; fd = open_port(argv[1]); if (fd &lt; 0) &#123; printf(&quot;open %s err!\\n&quot;, argv[1]); return -1; &#125; iRet = set_opt(fd, 115200, 8, &#x27;N&#x27;, 1);//è®¾ç½®å‚æ•°æ³¢ç‰¹ç‡11520 æ•°æ®ä½8 ä¸ç”¨æ ¡éªŒä½ åœæ­¢ä½1 if (iRet) &#123; printf(&quot;set port err!\\n&quot;); return -1; &#125; printf(&quot;Enter a char: &quot;); while (1) &#123; scanf(&quot;%c&quot;, &amp;c); iRet = write(fd, &amp;c, 1); iRet = read(fd, &amp;c, 1); if (iRet == 1) printf(&quot;get: %02x %c\\n&quot;, c, c); else printf(&quot;can not get data\\n&quot;); &#125; return 0;&#125; è¯»æ•°æ®æ—¶çš„æœ€å°å­—èŠ‚æ•°è®¾ç½®ä¸º0: ä¸ºä»€ä¹ˆç¬¬ä¸€éæ‰“å°ä¿©éé”™è¯¯å‘¢? è¾“å…¥a, å°†aä¿å­˜åœ¨è¡Œè§„ç¨‹, å›è½¦é”®ç»§ç»­å‘é€è‡³è¡Œè§„ç¨‹, æ‰ä¼šå»å”¤é†’åº”ç”¨ç¨‹åº, scanfè¢«å”¤é†’å¾—åˆ°äº†a, æŠŠaå‘ç»™å¦ä¸€ä¸ªä¸²å£, ä¸²å£1å¼€å§‹æ¥æ”¶(ä¸€ä½ä¸€ä½), æ‰€ä»¥writeå‘é€äº†,ä½†æ˜¯readæ²¡æœ‰æ¥å—, è¿”å›0, ç¬¬äºŒä¸ªå­—ç¬¦æ—¶enter, åˆæ²¡æœ‰è¯»åˆ°æ•°æ®, è¾“å…¥å­—ç¬¦b, readè¯»åˆ°a(è¡Œè§„ç¨‹é‡Œç¬¬ä¸€ä¸ªæ•°æ®) ä¸»è¦é—®é¢˜æ˜¯writeç¡®å®å¯ä»¥å‘é€å‡ºå», ä½†æ˜¯ä¸²å£æ²¡æœ‰å¾—åˆ°æ•°æ®å‘¢(æ²¡æœ‰ä¸ŠæŠ¥ç»™é©±åŠ¨ç¨‹åº), readè¿”å›0, æ‰€ä»¥è¦è®¾ç½®è¯»åˆ°æœ€å°å­—èŠ‚ä¸º1, æ²¡æœ‰æ•°æ®çš„è¯æ°¸è¿œç­‰å¾…(ç­‰å¾…æ—¶é—´è®¾ç½®) I2C I2Cæ¡†æ¶ ä¸€ä¸ªèŠ¯ç‰‡é‡Œé¢æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªI2Cæ§åˆ¶å™¨, ä¸€ä¸ªI2Cæ§åˆ¶å™¨ä¸Šé¢å¯ä»¥æŒ‚è½½ä¸€ä¸ªæˆ–è€…å¤šä¸ªI2Cè®¾å¤‡, è®¿é—®è¿™äº›è®¾å¤‡éœ€è¦å»å¯»å€, æ‰€ä»¥ä½¿ç”¨I2Cæ€»çº¿æ¥æ“ä½œè®¾å¤‡æ—¶, é¦–å…ˆå¾—çŸ¥é“è®¾å¤‡çš„è®¾å¤‡åœ°å€, çŸ¥é“åå°±å¯ä»¥è·Ÿä»–æ”¶å‘æ•°æ®äº†. I2Cæ€»çº¿åªéœ€è¦2æ¡çº¿ï¼šæ—¶é’Ÿçº¿SCLã€æ•°æ®çº¿SDA. åœ¨I2Cæ€»çº¿çš„SCLã€SDAçº¿ä¸Šï¼Œéƒ½æœ‰ä¸Šæ‹‰ç”µé˜» APP(open/read/write) è®¾å¤‡é©±åŠ¨ç¨‹åº(ä¾‹å¦‚EEPROMå­˜å‚¨è®¾å¤‡ TSè§¦æ‘¸å±è®¾å¤‡) æ§åˆ¶é©±åŠ¨ç¨‹åº åè®® æ§èŠ¯ç‰‡å¼•å‡ºä¸¤æ¡çº¿SCL(SCK),SDAçº¿ï¼Œåœ¨ä¸€æ¡I2Cæ€»çº¿ä¸Šå¯ä»¥æ¥å¾ˆå¤šI2Cè®¾å¤‡ï¼Œæˆ‘ä»¬è¿˜ä¼šæ”¾ä¸€ä¸ªä¸Šæ‹‰ç”µé˜» 123456ç®€å•çš„ä¾‹å­ï¼Œæ¥è§£é‡Šä¸€ä¸‹IICçš„ä¼ è¾“åè®®ï¼š è€å¸ˆè¯´å¼€å§‹äº†ï¼Œè¡¨ç¤ºå¼€å§‹ä¿¡å·(start) è€å¸ˆæé†’æŸä¸ªå­¦ç”Ÿè¦å‘çƒï¼Œè¡¨ç¤ºå‘é€åœ°å€å’Œæ–¹å‘(address/read/write) è€å¸ˆå‘çƒ/æ¥çƒï¼Œè¡¨ç¤ºæ•°æ®çš„ä¼ è¾“ æ”¶åˆ°çƒè¦å›åº”ï¼šå›åº”ä¿¡å·(ACK) è€å¸ˆè¯´ç»“æŸï¼Œè¡¨ç¤ºIICä¼ è¾“ç»“æŸ(P) å†™æ“ä½œ ä¸»èŠ¯ç‰‡è¦å‘å‡ºä¸€ä¸ªstartä¿¡å· ç„¶åå‘å‡ºä¸€ä¸ªè®¾å¤‡åœ°å€(ç”¨æ¥ç¡®å®šæ˜¯å¾€å“ªä¸€ä¸ªèŠ¯ç‰‡å†™æ•°æ®)ï¼Œæ–¹å‘(è¯»/å†™ï¼Œ0è¡¨ç¤ºå†™ï¼Œ1è¡¨ç¤ºè¯») ä»è®¾å¤‡å›åº”(ç”¨æ¥ç¡®å®šè¿™ä¸ªè®¾å¤‡æ˜¯å¦å­˜åœ¨)ï¼Œç„¶åå°±å¯ä»¥ä¼ è¾“æ•°æ® ä¸»è®¾å¤‡å‘é€ä¸€ä¸ªå­—èŠ‚æ•°æ®ç»™ä»è®¾å¤‡ï¼Œå¹¶ç­‰å¾…å›åº” æ¯ä¼ è¾“ä¸€å­—èŠ‚æ•°æ®ï¼Œæ¥æ”¶æ–¹è¦æœ‰ä¸€ä¸ªå›åº”ä¿¡å·ï¼ˆç¡®å®šæ•°æ®æ˜¯å¦æ¥å—å®Œæˆ)ï¼Œç„¶åå†ä¼ è¾“ä¸‹ä¸€ä¸ªæ•°æ®ã€‚ æ•°æ®å‘é€å®Œä¹‹åï¼Œä¸»èŠ¯ç‰‡å°±ä¼šå‘é€ä¸€ä¸ªåœæ­¢ä¿¡å·ã€‚ ä¸‹å›¾ï¼šç™½è‰²èƒŒæ™¯è¡¨ç¤º&quot;ä¸»â†’ä»&quot;ï¼Œç°è‰²èƒŒæ™¯è¡¨ç¤º&quot;ä»â†’ä¸»&quot; è¯»æ“ä½œ ä¸»èŠ¯ç‰‡è¦å‘å‡ºä¸€ä¸ªstartä¿¡å· ç„¶åå‘å‡ºä¸€ä¸ªè®¾å¤‡åœ°å€(ç”¨æ¥ç¡®å®šæ˜¯å¾€å“ªä¸€ä¸ªèŠ¯ç‰‡å†™æ•°æ®)ï¼Œæ–¹å‘(è¯»/å†™ï¼Œ0è¡¨ç¤ºå†™ï¼Œ1è¡¨ç¤ºè¯») ä»è®¾å¤‡å›åº”(ç”¨æ¥ç¡®å®šè¿™ä¸ªè®¾å¤‡æ˜¯å¦å­˜åœ¨)ï¼Œç„¶åå°±å¯ä»¥ä¼ è¾“æ•°æ® ä»è®¾å¤‡å‘é€ä¸€ä¸ªå­—èŠ‚æ•°æ®ç»™ä¸»è®¾å¤‡ï¼Œå¹¶ç­‰å¾…å›åº” æ¯ä¼ è¾“ä¸€å­—èŠ‚æ•°æ®ï¼Œæ¥æ”¶æ–¹è¦æœ‰ä¸€ä¸ªå›åº”ä¿¡å·ï¼ˆç¡®å®šæ•°æ®æ˜¯å¦æ¥å—å®Œæˆ)ï¼Œç„¶åå†ä¼ è¾“ä¸‹ä¸€ä¸ªæ•°æ®ã€‚ æ•°æ®å‘é€å®Œä¹‹åï¼Œä¸»èŠ¯ç‰‡å°±ä¼šå‘é€ä¸€ä¸ªåœæ­¢ä¿¡å·ã€‚ ä¸‹å›¾ï¼šç™½è‰²èƒŒæ™¯è¡¨ç¤º&quot;ä¸»â†’ä»&quot;ï¼Œç°è‰²èƒŒæ™¯è¡¨ç¤º&quot;ä»â†’ä¸»&quot; ä¿¡å· I2Cåè®®ä¸­æ•°æ®ä¼ è¾“çš„å•ä½æ˜¯å­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯8ä½ã€‚ä½†æ˜¯è¦ç”¨åˆ°9ä¸ªæ—¶é’Ÿï¼šå‰é¢8ä¸ªæ—¶é’Ÿç”¨æ¥ä¼ è¾“8æ•°æ®ï¼Œç¬¬9ä¸ªæ—¶é’Ÿç”¨æ¥ä¼ è¾“å›åº”ä¿¡å·ã€‚ä¼ è¾“æ—¶ï¼Œå…ˆä¼ è¾“æœ€é«˜ä½(MSB)ã€‚ å¼€å§‹ä¿¡å·ï¼ˆSï¼‰ï¼šSCLä¸ºé«˜ç”µå¹³æ—¶ï¼ŒSDAå±±é«˜ç”µå¹³å‘ä½ç”µå¹³è·³å˜ï¼Œå¼€å§‹ä¼ é€æ•°æ®ã€‚ ç»“æŸä¿¡å·ï¼ˆPï¼‰ï¼šSCLä¸ºé«˜ç”µå¹³æ—¶ï¼ŒSDAç”±ä½ç”µå¹³å‘é«˜ç”µå¹³è·³å˜ï¼Œç»“æŸä¼ é€æ•°æ®ã€‚ å“åº”ä¿¡å·(ACK)ï¼šæ¥æ”¶å™¨åœ¨æ¥æ”¶åˆ°8ä½æ•°æ®åï¼Œåœ¨ç¬¬9ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œæ‹‰ä½SDA SDAä¸Šä¼ è¾“çš„æ•°æ®å¿…é¡»åœ¨SCLä¸ºé«˜ç”µå¹³æœŸé—´ä¿æŒç¨³å®šï¼ŒSDAä¸Šçš„æ•°æ®åªèƒ½åœ¨SCLä¸ºä½ç”µå¹³æœŸé—´å˜åŒ– ç»†èŠ‚ å¦‚ä½•åœ¨SDAä¸Šå®ç°åŒå‘ä¼ è¾“ï¼Ÿ ä¸»èŠ¯ç‰‡é€šè¿‡ä¸€æ ¹SDAçº¿æ—¢å¯ä»¥æŠŠæ•°æ®å‘ç»™ä»è®¾å¤‡ï¼Œä¹Ÿå¯ä»¥ä»SDAä¸Šè¯»å–æ•°æ®ï¼Œè¿æ¥SDAçº¿çš„å¼•è„šé‡Œé¢å¿…ç„¶æœ‰ä¸¤ä¸ªå¼•è„šï¼ˆå‘é€å¼• è„š/æ¥å—å¼•è„šï¼‰ã€‚ ä¸»ã€ä»è®¾å¤‡éƒ½å¯ä»¥é€šè¿‡SDAå‘é€æ•°æ®ï¼Œè‚¯å®šä¸èƒ½åŒæ—¶å‘é€æ•°æ®ï¼Œæ€ä¹ˆé”™å¼€æ—¶é—´ï¼Ÿ åœ¨9ä¸ªæ—¶é’Ÿé‡Œï¼Œ å‰8ä¸ªæ—¶é’Ÿç”±ä¸»è®¾å¤‡å‘é€æ•°æ®çš„è¯ï¼Œç¬¬9ä¸ªæ—¶é’Ÿå°±ç”±ä»è®¾å¤‡å‘é€æ•°æ®ï¼› å‰8ä¸ªæ—¶é’Ÿç”±ä»è®¾å¤‡å‘é€æ•°æ®çš„è¯ï¼Œç¬¬9ä¸ªæ—¶é’Ÿå°±ç”±ä¸»è®¾å¤‡å‘é€æ•°æ®ã€‚ åŒæ–¹è®¾å¤‡ä¸­ï¼ŒæŸä¸ªè®¾å¤‡å‘é€æ•°æ®æ—¶ï¼Œå¦ä¸€æ–¹æ€æ ·æ‰èƒ½ä¸å½±å“SDAä¸Šçš„æ•°æ®ï¼Ÿ è®¾å¤‡çš„SDAä¸­æœ‰ä¸€ä¸ªä¸‰æç®¡ï¼Œä½¿ç”¨å¼€æ/å¼€æ¼ç”µè·¯(ä¸‰æç®¡æ˜¯å¼€æï¼ŒCMOSç®¡æ˜¯å¼€æ¼ï¼Œä½œç”¨ä¸€æ ·)ï¼Œå¦‚ä¸‹å›¾ï¼š 123å½“æŸä¸€ä¸ªèŠ¯ç‰‡ä¸æƒ³å½±å“SDAçº¿æ—¶ï¼Œé‚£å°±ä¸é©±åŠ¨è¿™ä¸ªä¸‰æç®¡æƒ³è®©SDAè¾“å‡ºé«˜ç”µå¹³ï¼ŒåŒæ–¹éƒ½ä¸é©±åŠ¨ä¸‰æç®¡(SDAé€šè¿‡ä¸Šæ‹‰ç”µé˜»å˜ä¸ºé«˜ç”µå¹³)æƒ³è®©SDAè¾“å‡ºä½ç”µå¹³ï¼Œå°±é©±åŠ¨ä¸‰æç®¡ ä¸¾ä¾‹(åŒå‘ä¼ è¾“) ä¸»è®¾å¤‡å‘é€ï¼ˆ8bitï¼‰ç»™ä»è®¾å¤‡ å‰8ä¸ªclk ä»è®¾å¤‡ä¸è¦å½±å“SDAï¼Œä»è®¾å¤‡ä¸é©±åŠ¨ä¸‰æç®¡ ä¸»è®¾å¤‡å†³å®šæ•°æ®ï¼Œä¸»è®¾å¤‡è¦å‘é€1æ—¶ä¸é©±åŠ¨ä¸‰æç®¡ï¼Œè¦å‘é€0æ—¶é©±åŠ¨ä¸‰æç®¡ ç¬¬9ä¸ªclkï¼Œç”±ä»è®¾å¤‡å†³å®šæ•°æ® ä¸»è®¾å¤‡ä¸é©±åŠ¨ä¸‰æç®¡ ä»è®¾å¤‡å†³å®šæ•°æ®ï¼Œè¦å‘å‡ºå›åº”ä¿¡å·çš„è¯ï¼Œå°±é©±åŠ¨ä¸‰æç®¡è®©SDAå˜ä¸º0 ä»è¿™é‡Œä¹Ÿå¯ä»¥çŸ¥é“ACKä¿¡å·æ˜¯ä½ç”µå¹³ ä»ä¸Šé¢çš„ä¾‹å­ï¼Œå°±å¯ä»¥çŸ¥é“æ€æ ·åœ¨ä¸€æ¡çº¿ä¸Šå®ç°åŒå‘ä¼ è¾“ï¼Œè¿™å°±æ˜¯SDAä¸Šè¦ä½¿ç”¨ä¸Šæ‹‰ç”µé˜»çš„åŸå› ã€‚ ä¸ºä½•SCLä¹Ÿè¦ä½¿ç”¨ä¸Šæ‹‰ç”µé˜»ï¼Ÿ åœ¨ç¬¬9ä¸ªæ—¶é’Ÿä¹‹åï¼Œå¦‚æœæœ‰æŸä¸€æ–¹éœ€è¦æ›´å¤šçš„æ—¶é—´æ¥å¤„ç†æ•°æ®ï¼Œå®ƒå¯ä»¥ä¸€ç›´é©±åŠ¨ä¸‰æç®¡æŠŠSCLæ‹‰ä½ã€‚ å½“SCLä¸ºä½ç”µå¹³æ—¶å€™ï¼Œå¤§å®¶éƒ½ä¸åº”è¯¥ä½¿ç”¨IICæ€»çº¿ï¼Œåªæœ‰å½“SCLä»ä½ç”µå¹³å˜ä¸ºé«˜ç”µå¹³çš„æ—¶å€™ï¼ŒIICæ€»çº¿æ‰èƒ½è¢«ä½¿ç”¨ã€‚ å½“å®ƒå°±ç»ªåï¼Œå°±å¯ä»¥ä¸å†é©±åŠ¨ä¸‰æç®¡ï¼Œè¿™æ˜¯ä¸Šæ‹‰ç”µé˜»æŠŠSCLå˜ä¸ºé«˜ç”µå¹³ï¼Œå…¶ä»–è®¾å¤‡å°±å¯ä»¥ç»§ç»­ä½¿ç”¨I2Cæ€»çº¿äº†ã€‚ å¯¹äºIICåè®®å®ƒåªèƒ½è§„å®šæ€ä¹ˆä¼ è¾“æ•°æ®ï¼Œæ•°æ®æ˜¯ä»€ä¹ˆå«ä¹‰ç”±ä»è®¾å¤‡å†³å®šã€‚ SMBusåè®® SMBus: System Management Busï¼Œç³»ç»Ÿç®¡ç†æ€»çº¿ã€‚ 1234SMBusæœ€åˆçš„ç›®çš„æ˜¯ä¸ºæ™ºèƒ½ç”µæ± ã€å……ç”µç”µæ± ã€å…¶ä»–å¾®æ§åˆ¶å™¨ä¹‹é—´çš„é€šä¿¡é“¾è·¯è€Œå®šä¹‰çš„ã€‚SMBusä¹Ÿè¢«ç”¨æ¥è¿æ¥å„ç§è®¾å¤‡ï¼ŒåŒ…æ‹¬ç”µæºç›¸å…³è®¾å¤‡ï¼Œç³»ç»Ÿä¼ æ„Ÿå™¨ï¼ŒEEPROMé€šè®¯è®¾å¤‡ç­‰ç­‰ã€‚SMBus ä¸ºç³»ç»Ÿå’Œç”µæºç®¡ç†è¿™æ ·çš„ä»»åŠ¡æä¾›äº†ä¸€æ¡æ§åˆ¶æ€»çº¿ï¼Œä½¿ç”¨ SMBus çš„ç³»ç»Ÿï¼Œè®¾å¤‡ä¹‹é—´å‘é€å’Œæ¥æ”¶æ¶ˆæ¯éƒ½æ˜¯é€šè¿‡ SMBusï¼Œè€Œä¸æ˜¯ä½¿ç”¨å•ç‹¬çš„æ§åˆ¶çº¿ï¼Œè¿™æ ·å¯ä»¥èŠ‚çœè®¾å¤‡çš„ç®¡è„šæ•°ã€‚SMBusæ˜¯åŸºäºI2Cåè®®çš„ï¼ŒSMBusè¦æ±‚æ›´ä¸¥æ ¼ï¼ŒSMBusæ˜¯I2Cåè®®çš„å­é›†ã€‚ è·Ÿä¸€èˆ¬çš„I2Cåè®®çš„å·®åˆ« ï‚Ÿ VDDçš„æé™å€¼ä¸ä¸€æ · I2Cåè®®ï¼šèŒƒå›´å¾ˆå¹¿ï¼Œç”šè‡³è®¨è®ºäº†é«˜è¾¾12Vçš„æƒ…å†µ SMBusï¼š1.8V~5V ï‚Ÿ æœ€å°æ—¶é’Ÿé¢‘ç‡ã€æœ€å¤§çš„Clock Stretching Clock Stretchingå«ä¹‰ï¼šæŸä¸ªè®¾å¤‡éœ€è¦æ›´å¤šæ—¶é—´è¿›è¡Œå†…éƒ¨çš„å¤„ç†æ—¶ï¼Œå®ƒå¯ä»¥æŠŠSCLæ‹‰ä½å ä½I2Cæ€»çº¿ I2Cåè®®ï¼šæ—¶é’Ÿé¢‘ç‡æœ€å°å€¼æ— é™åˆ¶ï¼ŒClock Stretchingæ—¶é•¿ä¹Ÿæ²¡æœ‰é™åˆ¶ SMBusï¼šæ—¶é’Ÿé¢‘ç‡æœ€å°å€¼æ˜¯10KHzï¼ŒClock Stretchingçš„æœ€å¤§æ—¶é—´å€¼ä¹Ÿæœ‰é™åˆ¶ ï‚Ÿ åœ°å€å›åº”(Address Acknowledge) ä¸€ä¸ªI2Cè®¾å¤‡æ¥æ”¶åˆ°å®ƒçš„è®¾å¤‡åœ°å€åï¼Œæ˜¯å¦å¿…é¡»å‘å‡ºå›åº”ä¿¡å·ï¼Ÿ I2Cåè®®ï¼šæ²¡æœ‰å¼ºåˆ¶è¦æ±‚å¿…é¡»å‘å‡ºå›åº”ä¿¡å· SMBusï¼šå¼ºåˆ¶è¦æ±‚å¿…é¡»å‘å‡ºå›åº”ä¿¡å·ï¼Œè¿™æ ·å¯¹æ–¹æ‰çŸ¥é“è¯¥è®¾å¤‡çš„çŠ¶æ€ï¼šbusyï¼Œfailedï¼Œæˆ–æ˜¯è¢«ç§»é™¤äº† ï‚Ÿ REPEATED START Condition(é‡å¤å‘å‡ºSä¿¡å·) æ¯”å¦‚è¯»EEPROMæ—¶ï¼Œæ¶‰åŠ2ä¸ªæ“ä½œï¼š æŠŠå­˜å‚¨åœ°å€å‘ç»™è®¾å¤‡ and è¯»æ•°æ® åœ¨å†™ã€è¯»ä¹‹é—´ï¼Œå¯ä»¥ä¸å‘å‡ºPä¿¡å·ï¼Œè€Œæ˜¯ç›´æ¥å‘å‡ºSä¿¡å·ï¼šè¿™ä¸ªSä¿¡å·å°±æ˜¯REPEATED START ï‚Ÿ SMBusåè®®æ˜ç¡®äº†æ•°æ®çš„ä¼ è¾“æ ¼å¼ I2Cåè®®ï¼šå®ƒåªå®šä¹‰äº†æ€ä¹ˆä¼ è¾“æ•°æ®ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å®šä¹‰æ•°æ®çš„æ ¼å¼ï¼Œè¿™å®Œå…¨ç”±è®¾å¤‡æ¥å®šä¹‰ SMBusï¼šå®šä¹‰äº†å‡ ç§æ•°æ®æ ¼å¼(ä¸‹é¢åˆ†æ) I2C Block Write å’Œ I2C SMBus Block Write çš„åŒºåˆ«L: ä¼ è¾“è¿‡ç¨‹ä¼šä¸ä¼šä¼ è¾“Byte Countå€¼ I2Cç³»ç»Ÿé‡è¦ç»“æ„ä½“ ä½¿ç”¨ä¸€å¥è¯æ¦‚æ‹¬I2Cä¼ è¾“ï¼šAPPé€šè¿‡I2C Controllerä¸I2C Deviceä¼ è¾“æ•°æ®ã€‚ åœ¨Linuxä¸­ï¼š æ€ä¹ˆè¡¨ç¤ºI2C Controller ä¸€ä¸ªèŠ¯ç‰‡é‡Œå¯èƒ½æœ‰å¤šä¸ªI2C Controllerï¼Œæ¯”å¦‚ç¬¬0ä¸ªã€ç¬¬1ä¸ªã€â€¦â€¦ å¯¹äºä½¿ç”¨è€…ï¼Œåªè¦ç¡®å®šæ˜¯ç¬¬å‡ ä¸ªI2C Controllerå³å¯ ä½¿ç”¨i2c_adapterè¡¨ç¤ºä¸€ä¸ªI2C BUSï¼Œæˆ–ç§°ä¸ºI2C Controller(ä½¿ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼) é‡Œé¢æœ‰2ä¸ªé‡è¦çš„æˆå‘˜ï¼š nrï¼šç¬¬å‡ ä¸ªI2C BUS(I2C Controller) i2c_algorithmï¼Œé‡Œé¢æœ‰è¯¥I2C BUSçš„ä¼ è¾“å‡½æ•°ï¼Œç”¨æ¥æ”¶å‘I2Cæ•°æ® i2c_adapter i2c_algorithm æ€ä¹ˆè¡¨ç¤ºI2C Device ä¸€ä¸ªI2C Deviceï¼Œä¸€å®šæœ‰è®¾å¤‡åœ°å€ å®ƒè¿æ¥åœ¨å“ªä¸ªI2C Controllerä¸Šï¼Œå³å¯¹åº”çš„i2c_adapteræ˜¯ä»€ä¹ˆ ä½¿ç”¨i2c_clientæ¥è¡¨ç¤ºä¸€ä¸ªI2C Device æ€ä¹ˆè¡¨ç¤ºè¦ä¼ è¾“çš„æ•°æ® åœ¨ä¸Šé¢çš„i2c_algorithmç»“æ„ä½“ä¸­å¯ä»¥çœ‹åˆ°è¦ä¼ è¾“çš„æ•°æ®è¢«ç§°ä¸ºï¼ši2c_msg i2c_msg i2c_msgä¸­çš„flagsç”¨æ¥è¡¨ç¤ºä¼ è¾“æ–¹å‘ï¼šbit 0ç­‰äºI2C_M_RDè¡¨ç¤ºè¯»ï¼Œbit 0ç­‰äº0è¡¨ç¤ºå†™ ä¸€ä¸ªi2c_msgè¦ä¹ˆæ˜¯è¯»ï¼Œè¦ä¹ˆæ˜¯å†™ ä¸¾ä¾‹ï¼šè®¾å¤‡åœ°å€ä¸º0x50çš„EEPROMï¼Œè¦è¯»å–å®ƒé‡Œé¢å­˜å‚¨åœ°å€ä¸º0x10çš„ä¸€ä¸ªå­—èŠ‚ï¼Œåº”è¯¥æ„é€ å‡ ä¸ªi2c_msgï¼Ÿ è¦æ„é€ 2ä¸ªi2c_msg ç¬¬ä¸€ä¸ªi2c_msgè¡¨ç¤ºå†™æ“ä½œï¼ŒæŠŠè¦è®¿é—®çš„å­˜å‚¨åœ°å€0x10å‘ç»™è®¾å¤‡ ç¬¬äºŒä¸ªi2c_msgè¡¨ç¤ºè¯»æ“ä½œ ä»£ç å¦‚ä¸‹ 12345678910111213u8 data_addr = 0x10; i8 data; struct i2c_msg msgs[2]; msgs[0].addr = 0x50; msgs[0].flags = 0; msgs[0].len = 1; msgs[0].buf = &amp;data_addr; msgs[1].addr = 0x50; msgs[1].flags = I2C_M_RD; msgs[1].len = 1; msgs[1].buf = &amp;data; å†…æ ¸æ€ä¹ˆä¼ è¾“æ•°æ® ä½¿ç”¨ä¸€å¥è¯æ¦‚æ‹¬I2Cä¼ è¾“ï¼š APPé€šè¿‡I2C Controllerä¸I2C Deviceä¼ è¾“æ•°æ® APPé€šè¿‡i2c_adapterä¸i2c_clientä¼ è¾“i2c_msg å†…æ ¸å‡½æ•°i2c_transfer i2c_msgé‡Œå«æœ‰addrï¼Œæ‰€ä»¥è¿™ä¸ªå‡½æ•°é‡Œä¸éœ€è¦i2c_client int i2c_transfer(struct i2c_adapter *adap, struct i2c_msg *msgs, int num) æ— éœ€ç¼–å†™é©±åŠ¨ç›´æ¥è®¿é—®è®¾å¤‡_I2C-Toolsä»‹ç» APPè®¿é—®ç¡¬ä»¶è‚¯å®šæ˜¯éœ€è¦é©±åŠ¨ç¨‹åºçš„ï¼Œå¯¹äºI2Cè®¾å¤‡ï¼Œå†…æ ¸æä¾›äº†é©±åŠ¨ç¨‹åº drivers/i2c/i2c-dev.c ï¼Œé€šè¿‡å®ƒå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸‹é¢çš„I2Cæ§åˆ¶å™¨ é©±åŠ¨ç¨‹åºæ¥è®¿é—®I2Cè®¾å¤‡ ä½¿ç”¨ä¸€å¥è¯æ¦‚æ‹¬I2Cä¼ è¾“ï¼šAPPé€šè¿‡I2C Controllerä¸I2C Deviceä¼ è¾“æ•°æ®ã€‚ æ‰€ä»¥ä½¿ç”¨I2C-Toolsæ—¶ä¹Ÿéœ€è¦æŒ‡å®šï¼š å“ªä¸ªI2Cæ§åˆ¶å™¨(æˆ–ç§°ä¸ºI2C BUSã€I2C Adapter) å“ªä¸ªI2Cè®¾å¤‡(è®¾å¤‡åœ°å€) æ•°æ®ï¼šè¯»è¿˜æ˜¯å†™ã€æ•°æ®æœ¬èº« 12345678910111213141516171819AP3216Cæ˜¯çº¢å¤–ã€å…‰å¼ºã€è·ç¦»ä¸‰åˆä¸€çš„ä¼ æ„Ÿå™¨ï¼Œä»¥è¯»å‡ºå…‰å¼ºã€è·ç¦»å€¼ä¸ºä¾‹ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼šå¤ä½ï¼šå¾€å¯„å­˜å™¨0å†™å…¥0x4ä½¿èƒ½ï¼šå¾€å¯„å­˜å™¨0å†™å…¥0x3è¯»å…‰å¼ºï¼šè¯»å¯„å­˜å™¨0xCã€0xDå¾—åˆ°2å­—èŠ‚çš„å…‰å¼ºè¯»è·ç¦»ï¼šè¯»å¯„å­˜å™¨0xEã€0xFå¾—åˆ°2å­—èŠ‚çš„è·ç¦»å€¼AP3216Cçš„è®¾å¤‡åœ°å€æ˜¯0x1Eï¼Œå‡è®¾èŠ‚åœ¨I2C BUS0ä¸Šï¼Œæ“ä½œå‘½ä»¤å¦‚ä¸‹ï¼ši2cdetect æŸ¥çœ‹å½“å‰i2cè®¾å¤‡ç”¨æ³•: i2cdetect 0 æˆ–è€… i2cdetect -lä½¿ç”¨SMBusåè®®i2cset -f -y 0 0x1e 0 0x4 i2cset -f -y 0 0x1e 0 0x3 i2cget -f -y 0 0x1e 0xc w i2cget -f -y 0 0x1e 0xe w ä½¿ç”¨I2Cåè®®i2ctransfer -f -y 0 w2@0x1e 0 0x4 i2ctransfer -f -y 0 w2@0x1e 0 0x3 i2ctransfer -f -y 0 w1@0x1e 0xc r2 i2ctransfer -f -y 0 w1@0x1e 0xe r2 è®¿é—®I2Cè®¾å¤‡çš„ä¿©ç§æ–¹å¼ I2C-Toolså¯ä»¥é€šè¿‡SMBusæ¥è®¿é—®I2Cè®¾å¤‡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€èˆ¬çš„I2Cåè®®æ¥è®¿é—®I2Cè®¾å¤‡ã€‚ ä½¿ç”¨ä¸€å¥è¯æ¦‚æ‹¬I2Cä¼ è¾“ï¼šAPPé€šè¿‡I2C Controllerä¸I2C Deviceä¼ è¾“æ•°æ®ã€‚ åœ¨APPé‡Œï¼Œæœ‰è¿™å‡ ä¸ªé—®é¢˜ï¼š æ€ä¹ˆæŒ‡å®šI2Cæ§åˆ¶å™¨ï¼Ÿ i2c-dev.cæä¾›ä¸ºæ¯ä¸ªI2Cæ§åˆ¶å™¨(I2C Busã€I2C Adapter)éƒ½ç”Ÿæˆä¸€ä¸ªè®¾å¤‡èŠ‚ç‚¹ï¼š/dev/i2c-0ã€/dev/i2c-1ç­‰å¾… openæŸä¸ª/dev/i2c-XèŠ‚ç‚¹ï¼Œå°±æ˜¯å»è®¿é—®è¯¥I2Cæ§åˆ¶å™¨ä¸‹çš„è®¾å¤‡ æ€ä¹ˆæŒ‡å®šI2Cè®¾å¤‡ï¼Ÿ é€šè¿‡ioctlæŒ‡å®šI2Cè®¾å¤‡çš„åœ°å€ ioctl(fifile, I2C_SLAVE, address) å¦‚æœè¯¥è®¾å¤‡å·²ç»æœ‰äº†å¯¹åº”çš„è®¾å¤‡é©±åŠ¨ç¨‹åºï¼Œåˆ™è¿”å›å¤±è´¥ ioctl(fifile, I2C_SLAVE_FORCE, address) å¦‚æœè¯¥è®¾å¤‡å·²ç»æœ‰äº†å¯¹åº”çš„è®¾å¤‡é©±åŠ¨ç¨‹åº ä½†æ˜¯è¿˜æ˜¯æƒ³é€šè¿‡i2c-devé©±åŠ¨æ¥è®¿é—®å®ƒ åˆ™ä½¿ç”¨è¿™ä¸ªioctlæ¥æŒ‡å®šI2Cè®¾å¤‡åœ°å€ æ€ä¹ˆä¼ è¾“æ•°æ®ï¼Ÿ ä¸¤ç§æ–¹å¼ ä¸€èˆ¬çš„I2Cæ–¹å¼ï¼šioctl(fifile, I2C_RDWR, &amp;rdwr) SMBusæ–¹å¼ï¼šioctl(fifile, I2C_SMBUS, &amp;args) æºç  i2cæ–¹å¼ SMBusæ–¹å¼ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100#include &lt;sys/ioctl.h&gt;#include &lt;errno.h&gt;#include &lt;string.h&gt;#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;#include &lt;linux/i2c.h&gt;#include &lt;linux/i2c-dev.h&gt;#include &lt;i2c/smbus.h&gt;#include &quot;i2cbusses.h&quot;#include &lt;time.h&gt;/* ./at24c02 &lt;i2c_bus_number&gt; w &quot;100ask.taobao.com&quot; * ./at24c02 &lt;i2c_bus_number&gt; r */int main(int argc, char **argv)&#123; unsigned char dev_addr = 0x50;//è®¾å¤‡åœ°å€ unsigned char mem_addr = 0;//å­˜å‚¨ç©ºé—´åœ°å€ unsigned char buf[32]; int file; char filename[20]; unsigned char *str; int ret; struct timespec req; if (argc != 3 &amp;&amp; argc != 4) &#123; printf(&quot;Usage:\\n&quot;); printf(&quot;write eeprom: %s &lt;i2c_bus_number&gt; w string\\n&quot;, argv[0]); printf(&quot;read eeprom: %s &lt;i2c_bus_number&gt; r\\n&quot;, argv[0]); return -1; &#125; file = open_i2c_dev(argv[1][0]-&#x27;0&#x27;, filename, sizeof(filename), 0); if (file &lt; 0) &#123; printf(&quot;can&#x27;t open %s\\n&quot;, filename); return -1; &#125; if (set_slave_addr(file, dev_addr, 1)) &#123; printf(&quot;can&#x27;t set_slave_addr\\n&quot;); return -1; &#125; if (argv[2][0] == &#x27;w&#x27;) &#123; // write str: argv[3] str = argv[3]; req.tv_sec = 0; req.tv_nsec = 20000000; /* 20ms */ while (*str) &#123; // mem_addr, *str // mem_addr++, str++ ret = i2c_smbus_write_byte_data(file, mem_addr, *str); if (ret) &#123; printf(&quot;i2c_smbus_write_byte_data err\\n&quot;); return -1; &#125; // wait tWR(10ms) nanosleep(&amp;req, NULL); mem_addr++; str++; &#125; ret = i2c_smbus_write_byte_data(file, mem_addr, 0); // string end char if (ret) &#123; printf(&quot;i2c_smbus_write_byte_data err\\n&quot;); return -1; &#125; &#125; else &#123; // read ret = i2c_smbus_read_i2c_block_data(file, mem_addr, sizeof(buf), buf); if (ret &lt; 0) &#123; printf(&quot;i2c_smbus_read_i2c_block_data err\\n&quot;); return -1; &#125; buf[31] = &#x27;\\0&#x27;; printf(&quot;get data: %s\\n&quot;, buf); &#125; return 0; &#125;","categories":[{"name":"åµŒå…¥å¼","slug":"åµŒå…¥å¼","permalink":"https://blogs.leechee.top/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/"}],"tags":[{"name":"åµŒå…¥å¼","slug":"åµŒå…¥å¼","permalink":"https://blogs.leechee.top/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/"},{"name":"C/C++","slug":"C-C","permalink":"https://blogs.leechee.top/tags/C-C/"},{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://blogs.leechee.top/tags/%E5%AD%A6%E4%B9%A0/"}]},{"title":"åµŒå…¥å¼é©±åŠ¨","slug":"åµŒå…¥å¼é©±åŠ¨å…¥é—¨","date":"2021-01-05T15:21:13.000Z","updated":"2023-01-11T01:57:43.235Z","comments":true,"path":"posts/5c8c37e6/","link":"","permalink":"https://blogs.leechee.top/posts/5c8c37e6/","excerpt":"","text":"[TOC] Hello World å›é¡¾ æ–‡ä»¶IO åº”ç”¨ç¨‹åºå»è°ƒç”¨glibcæ‰€æä¾›çš„open read writeå‡½æ•°,æœ€ç»ˆä¼šè¿›å…¥åˆ°å†…æ ¸é‡Œé¢, è°ƒç”¨åˆ°å†…æ ¸é‡Œçš„sysopen sysreadå‡½æ•° è®¿é—®æ™®é€šæ–‡ä»¶: æ™®é€šæ–‡ä»¶è®¿é—®ä»£ç , ç»è¿‡æ–‡ä»¶ç³»ç»Ÿæ“ä½œ è®¿é—®é©±åŠ¨ç¨‹åº: è°ƒç”¨é©±åŠ¨ç¨‹åºå¯¹åº”ä»£ç  é©±åŠ¨ç¨‹åºä¹Ÿæä¾›å‡½æ•° drv_open drv_readå‡½æ•°, å½“åº”ç”¨ç¨‹åºå»æ‰“å¼€æŸä¸ªè®¾å¤‡èŠ‚ç‚¹,æœ€ç»ˆä¼šè°ƒç”¨é©±åŠ¨ç¨‹åºæä¾›çš„å‡½æ•° å¦‚ä½•ç¼–å†™é©±åŠ¨ç¨‹åº? â‘  ç¡®å®šä¸»è®¾å¤‡å·ï¼Œä¹Ÿå¯ä»¥è®©å†…æ ¸åˆ†é…(0 æ˜¯è®©å†…æ ¸åˆ†é…) â‘¡ å®šä¹‰è‡ªå·±çš„file_operationsç»“æ„ä½“ â‘¢ å®ç°å¯¹åº”çš„drv_open/drv_read/drv_writeç­‰å‡½æ•°ï¼Œå¡«å…¥file_operationsç»“æ„ä½“ â‘£ æŠŠfile_operationsç»“æ„ä½“å‘Šè¯‰(æ³¨å†Œ)å†…æ ¸ï¼šregister_chrdev [è¿™é‡Œå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªæ•°ç»„, éœ€è¦æ³¨å†Œè¿›æŸä¸ªä½ç½®,éœ€è¦ä¸»è®¾å¤‡å· å’Œå‰¯è®¾å¤‡å·] â‘¤ è°æ¥æ³¨å†Œé©±åŠ¨ç¨‹åºå•Šï¼Ÿå¾—æœ‰ä¸€ä¸ªå…¥å£å‡½æ•°(å»æ³¨å†Œé©±åŠ¨å‡½æ•°)ï¼šå®‰è£…é©±åŠ¨ç¨‹åºæ—¶ï¼Œå°±ä¼šå»è°ƒç”¨è¿™ä¸ªå…¥å£å‡½æ•° â‘¥ æœ‰å…¥å£å‡½æ•°å°±åº”è¯¥æœ‰å‡ºå£å‡½æ•°ï¼šå¸è½½é©±åŠ¨ç¨‹åºæ—¶ï¼Œå‡ºå£å‡½æ•°è°ƒç”¨unregister_chrdev (ä»æ•°ç»„é‡Œé¢å»æ‰) â‘¦ å…¶ä»–å®Œå–„ï¼šæä¾›è®¾å¤‡ä¿¡æ¯ï¼Œè‡ªåŠ¨åˆ›å»ºè®¾å¤‡èŠ‚ç‚¹ï¼šclass_create, device_create é©±åŠ¨æ€ä¹ˆæ“ä½œç¡¬ä»¶ï¼Ÿé€šè¿‡ioremapæ˜ å°„å¯„å­˜å™¨çš„ç‰©ç†åœ°å€å¾—åˆ°è™šæ‹Ÿåœ°å€ï¼Œè¯»å†™è™šæ‹Ÿåœ°å€ã€‚ é©±åŠ¨æ€ä¹ˆå’ŒAPPä¼ è¾“æ•°æ®ï¼Ÿé€šè¿‡copy_to_userã€copy_from_userè¿™2ä¸ªå‡½æ•°ã€‚ å†…æ ¸ä¸­çš„è¡¨ç¤º åº”ç”¨ç¨‹åºè°ƒç”¨openå‡½æ•°æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ—¶, å¾—åˆ°ä¸€ä¸ªæ•´æ•°è¿”å›å€¼, æ•´æ•°ä¼šå¯¹åº”å†…æ ¸ä¸­çš„ä¸€ä¸ªç»“æ„ä½“(struct file) æ‰“å¼€æŸä¸ªè®¾å¤‡èŠ‚ç‚¹æ—¶, ä¼šæ ¹æ®è¿™ä¸ªè®¾å¤‡èŠ‚ç‚¹çš„ä¸»è®¾å¤‡å·, åœ¨å†…æ ¸çš„æ•°ç»„é‡Œé¢æ‰¾åˆ°file_operationsç»“æ„ä½“, è¿™ä¸ªç»“æ„ä½“é‡Œé¢æœ‰é©±åŠ¨ç¨‹åºçš„open readå‡½æ•°ç­‰ç­‰, ä¼šå»è°ƒç”¨è¿™ä¸ªç»“æ„ä½“é‡Œé¢çš„å‡½æ•° å¯ä»¥çŒœæµ‹ï¼Œæˆ‘ä»¬ä½¿ç”¨openæ‰“å¼€æ–‡ä»¶æ—¶ï¼Œä¼ å…¥çš„flagsã€modeç­‰å‚æ•°ä¼šè¢«è®°å½•åœ¨å†…æ ¸ä¸­å¯¹åº”çš„struct fileç»“æ„ä½“é‡Œ(f_flagsã€f_mode)ï¼š int open(const char *pathname, int flags, mode_t mode); å»è¯»å†™æ–‡ä»¶æ—¶ï¼Œæ–‡ä»¶çš„å½“å‰åç§»åœ°å€ä¹Ÿä¼šä¿å­˜åœ¨struct fileç»“æ„ä½“çš„f_posæˆå‘˜é‡Œã€‚ å®ä¾‹ å‚è€ƒdriver/charä¸­çš„ç¨‹åºï¼ŒåŒ…å«å¤´æ–‡ä»¶ï¼Œå†™æ¡†æ¶ï¼Œä¼ è¾“æ•°æ®ï¼š â€‹ A. é©±åŠ¨ä¸­å®ç°open, read, write, releaseï¼ŒAPPè°ƒç”¨è¿™äº›å‡½æ•°æ—¶ï¼Œéƒ½æ‰“å°å†…æ ¸ä¿¡æ¯ â€‹ B. APPè°ƒç”¨writeå‡½æ•°æ—¶ï¼Œä¼ å…¥çš„æ•°æ®ä¿å­˜åœ¨é©±åŠ¨ä¸­ â€‹ C. APPè°ƒç”¨readå‡½æ•°æ—¶ï¼ŒæŠŠé©±åŠ¨ä¸­ä¿å­˜çš„æ•°æ®è¿”å›ç»™APP å¯ä»¥å‚è€ƒmisc.c æ˜¯ä¸€ä¸ªæ¯”è¾ƒç»å…¸çš„å­—ç¬¦é©±åŠ¨ç¨‹åº é©±åŠ¨ç¨‹åº 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103#include &lt;linux/module.h&gt;#include &lt;linux/fs.h&gt;#include &lt;linux/errno.h&gt;#include &lt;linux/miscdevice.h&gt;#include &lt;linux/kernel.h&gt;#include &lt;linux/major.h&gt;#include &lt;linux/mutex.h&gt;#include &lt;linux/proc_fs.h&gt;#include &lt;linux/seq_file.h&gt;#include &lt;linux/stat.h&gt;#include &lt;linux/init.h&gt;#include &lt;linux/device.h&gt;#include &lt;linux/tty.h&gt;#include &lt;linux/kmod.h&gt;#include &lt;linux/gfp.h&gt;/* 1. ç¡®å®šä¸»è®¾å¤‡å· */static int major = 0; //è®©å†…æ ¸ç»™æˆ‘ä»¬åˆ†é…static char kernel_buf[1024];static struct class *hello_class;#define MIN(a, b) (a &lt; b ? a : b)/* 3. å®ç°å¯¹åº”çš„open/read/writeç­‰å‡½æ•°ï¼Œå¡«å…¥file_operationsç»“æ„ä½“ */static ssize_t hello_drv_read (struct file *file, char __user *buf, size_t size, loff_t *offset)&#123; int err; printk(&quot;%s %s line %d\\n&quot;, __FILE__, __FUNCTION__, __LINE__); err = copy_to_user(buf, kernel_buf, MIN(1024, size));//ç»™ç”¨æˆ·ç©ºé—´çš„buf return MIN(1024, size);&#125;static ssize_t hello_drv_write (struct file *file, const char __user *buf, size_t size, loff_t *offset)&#123; int err; printk(&quot;%s %s line %d\\n&quot;, __FILE__, __FUNCTION__, __LINE__); err = copy_from_user(kernel_buf, buf, MIN(1024, size)); return MIN(1024, size);&#125;static int hello_drv_open (struct inode *node, struct file *file)&#123; printk(&quot;%s %s line %d\\n&quot;, __FILE__, __FUNCTION__, __LINE__); return 0;&#125;static int hello_drv_close (struct inode *node, struct file *file)&#123; printk(&quot;%s %s line %d\\n&quot;, __FILE__, __FUNCTION__, __LINE__); return 0;&#125;//static é˜²æ­¢æ±¡æŸ“å‘½åç©ºé—´/* 2. å®šä¹‰è‡ªå·±çš„file_operationsç»“æ„ä½“ */static struct file_operations hello_drv = &#123; .owner = THIS_MODULE, .open = hello_drv_open, .read = hello_drv_read, .write = hello_drv_write, .release = hello_drv_close,&#125;;/* 4. æŠŠfile_operationsç»“æ„ä½“å‘Šè¯‰å†…æ ¸ï¼šæ³¨å†Œé©±åŠ¨ç¨‹åº *//* 5. è°æ¥æ³¨å†Œé©±åŠ¨ç¨‹åºå•Šï¼Ÿå¾—æœ‰ä¸€ä¸ªå…¥å£å‡½æ•°ï¼šå®‰è£…é©±åŠ¨ç¨‹åºæ—¶ï¼Œå°±ä¼šå»è°ƒç”¨è¿™ä¸ªå…¥å£å‡½æ•° */static int __init hello_init(void)&#123; int err; printk(&quot;%s %s line %d\\n&quot;, __FILE__, __FUNCTION__, __LINE__); major = register_chrdev(0, &quot;hello&quot;, &amp;hello_drv); /* /dev/hello */ //è¿”å›ä¸»è®¾å¤‡å· hello_class = class_create(THIS_MODULE, &quot;hello_class&quot;); err = PTR_ERR(hello_class); if (IS_ERR(hello_class)) &#123; printk(&quot;%s %s line %d\\n&quot;, __FILE__, __FUNCTION__, __LINE__); unregister_chrdev(major, &quot;hello&quot;); return -1; &#125; device_create(hello_class, NULL, MKDEV(major, 0), NULL, &quot;hello&quot;); /* /dev/hello */ return 0;&#125;/* 6. æœ‰å…¥å£å‡½æ•°å°±åº”è¯¥æœ‰å‡ºå£å‡½æ•°ï¼šå¸è½½é©±åŠ¨ç¨‹åºæ—¶ï¼Œå°±ä¼šå»è°ƒç”¨è¿™ä¸ªå‡ºå£å‡½æ•° */static void __exit hello_exit(void)&#123; printk(&quot;%s %s line %d\\n&quot;, __FILE__, __FUNCTION__, __LINE__); device_destroy(hello_class, MKDEV(major, 0)); class_destroy(hello_class); unregister_chrdev(major, &quot;hello&quot;);&#125;/* 7. å…¶ä»–å®Œå–„ï¼šæä¾›è®¾å¤‡ä¿¡æ¯ï¼Œè‡ªåŠ¨åˆ›å»ºè®¾å¤‡èŠ‚ç‚¹ */module_init(hello_init);//ä¿®é¥°æˆå…¥å£å‡½æ•°module_exit(hello_exit);MODULE_LICENSE(&quot;GPL&quot;);//éµå®ˆGPLåè®® æµ‹è¯•ç¨‹åº 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556æµ‹è¯•ç¨‹åºè¦å®ç°å†™ã€è¯»åŠŸèƒ½ï¼šA. ./hello_drv_test -w wiki.100ask.net // æŠŠå­—ç¬¦ä¸²â€œwiki.100ask.netâ€å‘ç»™é©±åŠ¨ç¨‹åºB. ./hello_drv_test -r // æŠŠé©±åŠ¨ä¸­ä¿å­˜çš„å­—ç¬¦ä¸²è¯»å›æ¥#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;fcntl.h&gt;#include &lt;unistd.h&gt;#include &lt;stdio.h&gt;#include &lt;string.h&gt;/* * ./hello_drv_test -w abc * ./hello_drv_test -r */int main(int argc, char **argv)&#123; int fd; char buf[1024]; int len; /* 1. åˆ¤æ–­å‚æ•° */ if (argc &lt; 2) &#123; printf(&quot;Usage: %s -w &lt;string&gt;\\n&quot;, argv[0]); printf(&quot; %s -r\\n&quot;, argv[0]); return -1; &#125; /* 2. æ‰“å¼€æ–‡ä»¶ */ fd = open(&quot;/dev/hello&quot;, O_RDWR); if (fd == -1) &#123; printf(&quot;can not open file /dev/hello\\n&quot;); return -1; &#125; /* 3. å†™æ–‡ä»¶æˆ–è¯»æ–‡ä»¶ */ if ((0 == strcmp(argv[1], &quot;-w&quot;)) &amp;&amp; (argc == 3)) &#123; len = strlen(argv[2]) + 1; len = len &lt; 1024 ? len : 1024; write(fd, argv[2], len); &#125; else &#123; len = read(fd, buf, 1024); buf[1023] = &#x27;\\0&#x27;; printf(&quot;APP read : %s\\n&quot;, buf); &#125; close(fd); return 0;&#125; é‚£ä¹ˆæ€ä¹ˆå»ç¼–è¯‘é©±åŠ¨ç¨‹åºå’Œæµ‹è¯•ç¨‹åºå‘¢ 1234567891011121314151617181920# 1. ä½¿ç”¨ä¸åŒçš„å¼€å‘æ¿å†…æ ¸æ—¶, ä¸€å®šè¦ä¿®æ”¹KERN_DIR# 2. KERN_DIRä¸­çš„å†…æ ¸è¦äº‹å…ˆé…ç½®ã€ç¼–è¯‘, ä¸ºäº†èƒ½ç¼–è¯‘å†…æ ¸, è¦å…ˆè®¾ç½®ä¸‹åˆ—ç¯å¢ƒå˜é‡:# 2.1 ARCH, æ¯”å¦‚: export ARCH=arm64# 2.2 CROSS_COMPILE, æ¯”å¦‚: export CROSS_COMPILE=aarch64-linux-gnu-# 2.3 PATH, æ¯”å¦‚: export PATH=$PATH:/home/book/100ask_roc-rk3399-pc/ToolChain-6.3.1/gcc-linaro-6.3.1-2017.05-x86_64_aarch64-linux-gnu/bin # æ³¨æ„: ä¸åŒçš„å¼€å‘æ¿ä¸åŒçš„ç¼–è¯‘å™¨ä¸Šè¿°3ä¸ªç¯å¢ƒå˜é‡ä¸ä¸€å®šç›¸åŒ,# è¯·å‚è€ƒå„å¼€å‘æ¿çš„é«˜çº§ç”¨æˆ·ä½¿ç”¨æ‰‹å†ŒKERN_DIR = /home/book/100ask_roc-rk3399-pc/linux-4.4all: make -C $(KERN_DIR) M=`pwd` modules #è¿›å…¥åˆ°å†…æ ¸ç›®å½• ç¼–è¯‘å½“å‰ç›®å½•çš„xx.oæ–‡ä»¶ ç¼–è¯‘æˆé©±åŠ¨ç¨‹åº $(CROSS_COMPILE)gcc -o hello_drv_test hello_drv_test.c #bclean: make -C $(KERN_DIR) M=`pwd` modules clean rm -rf modules.order rm -f hello_drv_testobj-m += hello_drv.o ç„¶åmake æ³¨æ„é…ç½® å°†ç”Ÿæˆkoæ–‡ä»¶å’Œ å¯æ‰§è¡Œæ–‡ä»¶ä¼ åˆ°æ¿å­ ä½¿ç”¨insmod xx.ko æ¥è£…è½½é©±åŠ¨ cat /proc/devices æ¥æŸ¥çœ‹é©±åŠ¨æ˜¯å¦æ·»åŠ  lsmod æŸ¥çœ‹å†…æ ¸ä¸­å·²ç»åŠ è½½çš„é©±åŠ¨ç¨‹åº ls /dev/xx -l æŸ¥çœ‹æˆ‘ä»¬çš„è®¾å¤‡èŠ‚ç‚¹ (ä¸»è®¾å¤‡å·ç­‰ç­‰) rmmod å¸è½½é©±åŠ¨ çŸ¥è¯†è¡¥å…… module_init/module_exitçš„å®ç° register_chrdevçš„å†…éƒ¨å®ç° class_destroy/device_createæµ…æ GPIO GPIOå¼•è„šæ“ä½œæ–¹æ³• GPIO: General-purpose input/outputï¼Œé€šç”¨çš„è¾“å…¥è¾“å‡ºå£ GPIOæ¨¡å—ä¸€èˆ¬ç»“æ„ â€‹ a. æœ‰å¤šç»„GPIOï¼Œæ¯ç»„æœ‰å¤šä¸ªGPIO â€‹ b. ä½¿èƒ½ï¼šç”µæº/æ—¶é’Ÿ â€‹ c. æ¨¡å¼(Mode)ï¼šå¼•è„šå¯ç”¨äºGPIOæˆ–å…¶ä»–åŠŸèƒ½ â€‹ d. æ–¹å‘ï¼šå¼•è„šModeè®¾ç½®ä¸ºGPIOæ—¶ï¼Œå¯ä»¥ç»§ç»­è®¾ç½®å®ƒæ˜¯è¾“å‡ºå¼•è„šï¼Œè¿˜æ˜¯è¾“å…¥å¼•è„š â€‹ e. æ•°å€¼ï¼šå¯¹äºè¾“å‡ºå¼•è„šï¼Œå¯ä»¥è®¾ç½®å¯„å­˜å™¨è®©å®ƒè¾“å‡ºé«˜ã€ä½ç”µå¹³ å¯¹äºè¾“å…¥å¼•è„šï¼Œå¯ä»¥è¯»å–å¯„å­˜å™¨å¾—åˆ°å¼•è„šçš„å½“å‰ç”µå¹³ 1234567891011ä¸¾ä¾‹å­:ä¸€ä¸ªèŠ¯ç‰‡, æœ‰nç»„GPIO, æ¯ç»„gpioé‡Œé¢æœ‰è‹¥å¹²ä¸ªå¼•è„š, æˆ‘ä»¬ä»¥ç›®çš„ä¸ºå¯¼å‘,æƒ³è®©ä¸€ä¸ªå¼•è„šè¾“å‡ºé«˜ä½ç”µå¹³.ä»æ•°æ®æµå‘åå‘æ¥çœ‹:â‘¡æ•°æ®æ¥è‡ªio_mux(å¤šè·¯é€‰æ‹©å™¨), ä¸€ä¸ªå¼•è„šåˆå¯èƒ½æ¥è‡ªgpioæ¨¡å—,ä¹Ÿæœ‰å¯èƒ½æ¥è‡ªuart,æ‰€ä»¥åœ¨è¿™é‡Œéœ€è¦å»é€‰æ‹©å¼•è„šæ¥è‡ª äºå“ªé‡Œ,è¿™ç§°ä¸ºå¼•è„šçš„æ¨¡å¼é€‰æ‹© pins_modeâ‘ å‡è®¾è¿™ä¸ªå¼•è„šæ¥è‡ªgpioæ¨¡å—,éœ€è¦ä½¿èƒ½gpioæ¨¡å—,éœ€è¦å»è®¾ç½®power/clock control Enableä¸ºäº†çœç”µ,è¿™äº›æ¨¡å—æœ‰å¯èƒ½é»˜è®¤ä¸‹æ˜¯å…³é—­çš„,ä½¿ç”¨çš„è¯è¦è®¾ç½®p/c controlæ¥å‘è¿™äº›æ¨¡å—æä¾›ç”µæº,æä¾›clockâ‘¢è®¾ç½®å¼•è„šçš„è¾“å…¥è¾“å‡ºåŠŸèƒ½(æ–¹å‘)â‘£è®¾ç½®æ•°æ®è®©ä»–è¾“å‡ºé«˜ä½ç”µå¹³è¿™äº›æ“ä½œéƒ½éœ€è¦è¯»å†™å¯„å­˜å™¨é…å›¾å¦‚ä¸‹ GPIOå¯„å­˜å™¨æ“ä½œ æ“ä½œå¯„å­˜å™¨åŸåˆ™: ä¸è¦å»å½±å“åˆ°å…¶ä»–ä½ ä¸¾ä¾‹: æ•°æ®å¯„å­˜å™¨ æƒ³è®©ä¸€ä¸ªå¼•è„šè¾“å‡ºé«˜ç”µå¹³,éœ€è¦æŠŠè¿™ä¸ªå¯„å­˜å™¨çš„bit0è®¾ç½®ä¸º1 â‘ è¯»å‡ºè¿™ä¸ªå¯„å­˜å™¨çš„å€¼ val = data_reg (è¯»å‡ºæ¥) â‘¡ä¿®æ”¹è¿™ä¸ªå€¼,è®©è¿™ä¸ªbit0ç­‰äº1 val = val | 1 (ä¿®æ”¹) â‘¢å†™å›å» datareg_reg = val (å†™) èƒ½ä¸èƒ½ç›´æ¥å†™å‘¢? data_reg = 1 ä¸å¯ä»¥, bit0 = 1äº†,ä½†æ˜¯bit1 2 3éƒ½è¢«ä¿®æ”¹äº†. å½±å“åˆ°äº†å…¶ä»–ä½ æ›´é«˜æ•ˆçš„åŠæ³•: (set-and-clear protocal)æœ‰äº›å¤„ç†å™¨,å¯¹äºè¿™ä¸ªå¯„å­˜å™¨åˆå¼•å‡ºäº†ä¿©ä¸ªå¯„å­˜å™¨, ä¸€ä¸ªæ˜¯è®¾ç½®å¯„å­˜å™¨set_reg,æ¸…é™¤å¯„å­˜å™¨clr_reg(å’Œset_regåŒç†)è®¾ç½®bit0ç­‰äº1,å¯ä»¥å»æŠŠå¯„å­˜å™¨è¯»å‡ºæ¥ä¿®æ”¹bit0å†™å›å»ä¹Ÿå¯ä»¥ç›´æ¥æ“ä½œè¿™ä¸ªå¯„å­˜å™¨bit0=1å°±å¯ä»¥äº† set_reg=1æˆ–è€… 0å’Œ2 set_reg=(1)|(1&lt;&lt;2), ç­‰äº0çš„å¯„å­˜å™¨æ²¡æœ‰ä»»ä½•æ•ˆæœ,ç­‰äº1çš„ä½ä¼šå½±å“å®é™…çš„æ•°æ®å¯„å­˜å™¨ IMX6ULLçš„GPIOæ“ä½œ æ‹¿åˆ°æ–°çš„èŠ¯ç‰‡,éœ€è¦å»çœ‹èŠ¯ç‰‡æ‰‹å†Œ,æ‰¾åˆ°gpioç« èŠ‚, GPIOçš„æ§åˆ¶æ¶‰åŠ4å¤§æ¨¡å—ï¼šCCMã€IOMUXCã€GPIOæ¨¡å—æœ¬èº«ï¼Œæ¡†å›¾å¦‚ä¸‹ï¼š CCM: Clock Controller Module (æ—¶é’Ÿæ§åˆ¶æ¨¡å—) IOMUXC : IOMUX Controllerï¼ŒIOå¤ç”¨æ§åˆ¶å™¨ GPIO: General-purpose input/outputï¼Œé€šç”¨çš„è¾“å…¥è¾“å‡ºå£ CCM è®¾å®šæŸä¸ªå¯„å­˜å™¨æ¥ä½¿èƒ½æŸä¸€ç»„IO IOMUXC è®¾ç½®å¯„å­˜å™¨æ¥é€‰æ‹©æŸä¸ªå¼•è„š(æ¯ä¸ªå¼•è„šå¯¹åº”ä¿©ä¸ªå¯„å­˜å™¨:MUX_CTLç”¨æ¥é€‰æ‹©è„šåŠŸèƒ½ PAD_CTLæ˜¯å¦ä½¿ç”¨ä¸Šæ‹‰ ä¸‹æ‹‰ç”µé˜»ç­‰ ç­‰ä¿¡æ¯) è®¾ç½®gpioé‡Œé¢çš„å¯„å­˜å™¨ è®¾ç½®gpio.GDIRè®©è¿™ä¸ªå¼•è„šå·¥ä½œäºè¾“å…¥æˆ–è€…è¾“å‡ºæ¨¡å¼ è¾“å‡ºæ¨¡å¼:æŠŠå€¼å†™é“gpio.DRå¯„å­˜å™¨, è®©è¿™ä¸ªå¼•è„šè¾“å‡ºé«˜ä½ç”µå¹³ è¾“å…¥æ¨¡å¼: è¯»gpio.PSRå¯„å­˜å™¨, å¾—åˆ°è¿™ä¸ªå¼•è„šå½“å‰çŠ¶æ€ å…¶ä»–éƒ½æ˜¯ä¸­æ–­ç›¸å…³çš„ è®¾ç½®IOMUXC æ¥æŠŠæŸä¸ªå¼•è„šè®¾ç½®GPIOåŠŸèƒ½ çœ‹èŠ¯ç‰‡æ‰‹å†Œ åœ°å€: åŸºåœ°å€ + åç§»åœ°å€ = ç»å¯¹åœ°å€ ç¼–ç¨‹â€“è¯»GPIO â‘  è®¾ç½®CCM_CCGRxå¯„å­˜å™¨ä¸­æŸä½ä½¿èƒ½å¯¹åº”çš„GPIOæ¨¡å— // é»˜è®¤æ˜¯ä½¿èƒ½çš„ â‘¡ è®¾ç½®IOMUXæ¥é€‰æ‹©å¼•è„šç”¨äºGPIO â‘¢ è®¾ç½®GPIOx_GDIRä¸­æŸä½ä¸º0ï¼ŒæŠŠè¯¥å¼•è„šè®¾ç½®ä¸ºè¾“å…¥åŠŸèƒ½ â‘£ è¯»GPIOx_DRæˆ–GPIOx_PSRå¾—åˆ°æŸä½çš„å€¼ï¼ˆè¯»GPIOx_DRè¿”å›çš„æ˜¯GPIOx_PSRçš„å€¼ï¼‰ ç¼–ç¨‹â€“å†™GPIO â‘  è®¾ç½®CCM_CCGRxå¯„å­˜å™¨ä¸­æŸä½ä½¿èƒ½å¯¹åº”çš„GPIOæ¨¡å— // é»˜è®¤æ˜¯ä½¿èƒ½çš„ â‘¡ è®¾ç½®IOMUXæ¥é€‰æ‹©å¼•è„šç”¨äºGPIO â‘¢ è®¾ç½®GPIOx_GDIRä¸­æŸä½ä¸º1ï¼ŒæŠŠè¯¥å¼•è„šè®¾ç½®ä¸ºè¾“å‡ºåŠŸèƒ½ â‘£ å†™GPIOx_DRæŸä½çš„å€¼ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ å¯ä»¥è®¾ç½®è¯¥å¼•è„šçš„loopback(å›ç¯)åŠŸèƒ½ï¼Œè¿™æ ·å°±å¯ä»¥ä»GPIOx_PSRä¸­è¯»åˆ°å¼•è„šçš„æœ‰å®ç”µå¹³ï¼›ä½ ä»GPIOx_DRä¸­è¯»å›çš„åªæ˜¯ä¸Šæ¬¡è®¾ç½®çš„å€¼ï¼Œå®ƒå¹¶ä¸èƒ½ååº”å¼•è„šçš„çœŸå®ç”µå¹³ï¼Œæ¯”å¦‚å¯èƒ½å› ä¸ºç¡¬ä»¶æ•…éšœå¯¼è‡´è¯¥å¼•è„šè·Ÿåœ°çŸ­è·¯äº†ï¼Œä½ é€šè¿‡è®¾ç½®GPIOx_DRè®©å®ƒè¾“å‡ºé«˜ç”µå¹³å¹¶ä¸ä¼šèµ·æ•ˆæœã€‚ LEDé©±åŠ¨ å…ˆçœ‹åŸç†å›¾ GPIO5_3 å†çœ‹èŠ¯ç‰‡æ‰‹å†Œï¼šä½¿èƒ½GPIO5 å¯¹äºIMX6ULLï¼ŒGPIO5é»˜è®¤ä½¿èƒ½ï¼Œæ— éœ€è®¾ç½® CCM_CCGR1åœ°å€ï¼š0x020C4000 + 0x6C è®¾ç½®GPIO5_3ä¸ºGPIO éœ€è¦é…ç½®ä¸ºgpioæ¨¡å¼gpio5_IO03, éœ€è¦è®¾ç½®IOMUXCå¯„å­˜å™¨ è®¾ç½®GPIO5_3ä¸ºè¾“å‡º å°†gpio_gdirè®¾ç½®æˆ1 å˜æˆè¾“å‡ºå¼•è„š è®¾ç½®GPIOB0çš„è¾“å‡ºç”µå¹³ gpio5_DR è¾“å‡º1å°±åœ¨è¿™ä¸€ä½å†™å…¥1 å­—ç¬¦è®¾å¤‡é©±åŠ¨æ¡†æ¶ åœ¨Linuxç³»ç»Ÿä¸­, åº”ç”¨ç¨‹åºåªèƒ½é€šè¿‡ä¸€äº›æ ‡å‡†çš„æ¥å£open read ç­‰è®¿é—®æ–‡ä»¶,è¿›è€Œè®¿é—®é©±åŠ¨ç¨‹åº, æœ€ç»ˆè®¿é—®åˆ°ç¡¬ä»¶ åº”ç”¨ç¨‹åºè¦è°ƒç”¨open,é‚£ä¹ˆå°±æä¾›é©±åŠ¨ç¨‹åºçš„openå‡½æ•° LEDé©±åŠ¨æ¨¡æ¿ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778#include &lt;linux/kernel.h&gt;#include &lt;linux/module.h&gt;#include &lt;linux/slab.h&gt;#include &lt;linux/init.h&gt;#include &lt;linux/fs.h&gt;#include &lt;linux/delay.h&gt;#include &lt;linux/poll.h&gt;#include &lt;linux/mutex.h&gt;#include &lt;linux/wait.h&gt;#include &lt;linux/uaccess.h&gt;#include &lt;asm/io.h&gt;static int major;static struct class *led_class;static ssize_t led_write(struct file *filp, const char __user *buf, size_t count, loff_t *ppos)&#123; char val; /* copy_from_user : get data from app */ copy_from_user(&amp;val, buf, 1); /* to set gpio registerå¯„å­˜å™¨: out 1/0 */ if (val) &#123; /* set gpio to let led on */ &#125; else &#123; /* set gpio to let led off */ &#125; return 1;&#125;static int led_open(struct inode *inode, struct file *filp)&#123; /* enable gpio * configure pin as gpio * configure gpio as output */ return 0;&#125;static struct file_operations led_fops = &#123; .owner = THIS_MODULE, .write = led_write, .open = led_open,&#125;;/* å…¥å£å‡½æ•° */static int __init led_init(void)&#123; printk(&quot;%s %s %d\\n&quot;, __FILE__, __FUNCTION__, __LINE__); major = register_chrdev(0, &quot;100ask_led&quot;, &amp;led_fops); //led_open writeéƒ½è¦è®¿é—®gpioçš„å¯„å­˜å™¨, éƒ½è¦ç”¨åˆ°è™šæ‹Ÿåœ°å€, è™šæ‹Ÿåœ°å€åœ¨å“ªé‡Œæ˜ å°„å‘¢? /* ioremap */ led_class = class_create(THIS_MODULE, &quot;myled&quot;); device_create(led_class, NULL, MKDEV(major, 0), NULL, &quot;myled&quot;); /* /dev/myled */ return 0;&#125;static void __exit led_exit(void)&#123; device_destroy(led_class, MKDEV(major, 0)); class_destroy(led_class); unregister_chrdev(major, &quot;100ask_led&quot;);&#125;module_init(led_init);module_exit(led_exit);MODULE_LICENSE(&quot;GPL&quot;); ä»¥IMX6ULLä¸ºä¾‹çš„LEDé©±åŠ¨ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109#include &lt;linux/kernel.h&gt;#include &lt;linux/module.h&gt;#include &lt;linux/slab.h&gt;#include &lt;linux/init.h&gt;#include &lt;linux/fs.h&gt;#include &lt;linux/delay.h&gt;#include &lt;linux/poll.h&gt;#include &lt;linux/mutex.h&gt;#include &lt;linux/wait.h&gt;#include &lt;linux/uaccess.h&gt;#include &lt;linux/device.h&gt;#include &lt;asm/io.h&gt;static int major;static struct class *led_class;/* registers */// IOMUXC_SNVS_SW_MUX_CTL_PAD_SNVS_TAMPER3 åœ°å€ï¼š0x02290000 + 0x14static volatile unsigned int *IOMUXC_SNVS_SW_MUX_CTL_PAD_SNVS_TAMPER3;// GPIO5_GDIR åœ°å€ï¼š0x020AC004 è®¾ç½®åŠŸèƒ½static volatile unsigned int *GPIO5_GDIR; //GPIO5_DR åœ°å€ï¼š0x020AC000 è®¾ç½®è¾“å‡ºé«˜ä½ç”µå¹³static volatile unsigned int *GPIO5_DR;static ssize_t led_write(struct file *filp, const char __user *buf, size_t count, loff_t *ppos)&#123; char val; int ret; /* copy_from_user : get data from app */ ret = copy_from_user(&amp;val, buf, 1); /* to set gpio register: out 1/0 */ if (val) &#123; /* set gpio to let led on */ *GPIO5_DR &amp;= ~(1&lt;&lt;3); &#125; else &#123; /* set gpio to let led off */ *GPIO5_DR |= (1&lt;&lt;3); &#125; return 1;&#125;static int led_open(struct inode *inode, struct file *filp)&#123; /* enable gpio5 * configure gpio5_io3 as gpio * configure gpio5_io3 as output */ *IOMUXC_SNVS_SW_MUX_CTL_PAD_SNVS_TAMPER3 &amp;= ~0xf;//æ¸…æ‰æœ€ä½çš„4ä½ *IOMUXC_SNVS_SW_MUX_CTL_PAD_SNVS_TAMPER3 |= 0x5;//101 *GPIO5_GDIR |= (1&lt;&lt;3); return 0;&#125;static struct file_operations led_fops = &#123; .owner = THIS_MODULE, .write = led_write, .open = led_open,&#125;;/* å…¥å£å‡½æ•° */static int __init led_init(void)&#123; printk(&quot;%s %s %d\\n&quot;, __FILE__, __FUNCTION__, __LINE__); major = register_chrdev(0, &quot;100ask_led&quot;, &amp;led_fops); /* ioremap æ˜ å°„*/ // IOMUXC_SNVS_SW_MUX_CTL_PAD_SNVS_TAMPER3 åœ°å€ï¼š0x02290000 + 0x14 IOMUXC_SNVS_SW_MUX_CTL_PAD_SNVS_TAMPER3 = ioremap(0x02290000 + 0x14, 4); //ioremapæ˜ å°„çš„æ—¶å€™ä»¥é¡µä¸ºå•ä½ ,4k // GPIO5_GDIR åœ°å€ï¼š0x020AC004 GPIO5_GDIR = ioremap(0x020AC004, 4); //GPIO5_DR åœ°å€ï¼š0x020AC000 GPIO5_DR = ioremap(0x020AC000, 4); led_class = class_create(THIS_MODULE, &quot;myled&quot;); device_create(led_class, NULL, MKDEV(major, 0), NULL, &quot;myled&quot;); /* /dev/myled */ return 0;&#125;static void __exit led_exit(void)&#123; iounmap(IOMUXC_SNVS_SW_MUX_CTL_PAD_SNVS_TAMPER3); iounmap(GPIO5_GDIR); iounmap(GPIO5_DR); device_destroy(led_class, MKDEV(major, 0)); class_destroy(led_class); unregister_chrdev(major, &quot;100ask_led&quot;);&#125;module_init(led_init);module_exit(led_exit);MODULE_LICENSE(&quot;GPL&quot;); æ€ä¹ˆè®¿é—®å¯„å­˜å™¨ çŸ¥é“å¯„å­˜å™¨çš„åœ°å€. int *p = addr è¯»å–å¯„å­˜å™¨æ˜¯ä¸ºäº†è®¿é—®ç¡¬ä»¶ volatile: å¯¹å¯„å­˜å™¨æ“ä½œä¸èƒ½å»ä¼˜åŒ– å‘Šè¯‰ç¼–è¯‘å™¨ä¸è¦éšä¾¿ä¼˜åŒ–æˆ‘ é©±åŠ¨ç¨‹åºä¸­ä¸å¯ä»¥ä½¿ç”¨ç‰©ç†åœ°å€æ¥è®¿é—®å¯„å­˜å™¨, éœ€è¦æ˜ å°„æˆè™šæ‹Ÿåœ°å€ æµ‹è¯•ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;fcntl.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt;#include &lt;stdio.h&gt;v// ledtest /dev/myled on// ledtest /dev/myled offint main(int argc, char **argv)&#123; int fd; char status = 0; if (argc != 3) &#123; printf(&quot;Usage: %s &lt;dev&gt; &lt;on|off&gt;\\n&quot;, argv[0]); printf(&quot; eg: %s /dev/myled on\\n&quot;, argv[0]); printf(&quot; eg: %s /dev/myled off\\n&quot;, argv[0]); return -1; &#125; // open fd = open(argv[1], O_RDWR); if (fd &lt; 0) &#123; printf(&quot;can not open %s\\n&quot;, argv[0]); return -1; &#125; // write if (strcmp(argv[2], &quot;on&quot;) == 0) &#123; status = 1; &#125; write(fd, &amp;status, 1); return 0; &#125; LEDé©±åŠ¨ç¨‹åºæ¡†æ¶ å­—ç¬¦è®¾å¤‡é©±åŠ¨æ¡†æ¶ å¯¹äºLEDé©±åŠ¨ï¼Œæˆ‘ä»¬æƒ³è¦ä»€ä¹ˆæ ·çš„æ¥å£ï¼Ÿ LEDé©±åŠ¨è¦æ€ä¹ˆå†™ï¼Œæ‰èƒ½æ”¯æŒå¤šä¸ªæ¿å­ï¼Ÿåˆ†å±‚ æŠŠé©±åŠ¨æ‹†åˆ†ä¸ºé€šç”¨çš„æ¡†æ¶(leddrv.c)ã€å…·ä½“çš„ç¡¬ä»¶æ“ä½œ(board_X.c)ï¼š åœ¨leddrv.cé‡Œé¢è°ƒç”¨å•æ¿æä¾›çš„ledåˆå§‹åŒ–å‡½æ•°,è°ƒç”¨å•æ¿æä¾›çš„ctlå‡½æ•°, æ¯ä¸ªå•æ¿éƒ½å®ç°è¿™ä¿©ä¸ªåŒåçš„å‡½æ•°. å½“æƒ³ç»™Aæä¾›é©±åŠ¨ç¨‹åºæ—¶, ç¼–è¯‘leddrv.cå’Œboard_A.c ä»¥é¢å‘å¯¹è±¡çš„æ€æƒ³ï¼Œæ”¹è¿›ä»£ç ï¼š æŠ½è±¡å‡ºä¸€ä¸ªç»“æ„ä½“ï¼š æŠ½è±¡å‡ºä¸€ä¸ªled_operationsç»“æ„ä½“, é‡Œé¢æœ‰åˆå§‹åŒ–å‡½æ•°æœ‰æ§åˆ¶å‡½æ•°, å•æ¿å®ç°ä¸‹å›¾æ‰€ç¤ºç»“æ„ä½“(å³è¾¹), é‡Œé¢æœ‰åˆå§‹åŒ–æˆå‘˜æœ‰æ§åˆ¶æˆå‘˜ ç­‰äºè‡ªå·±çš„å‡½æ•°. ä¸Šå±‚çš„leddrv.cä»£ç è°ƒç”¨åº•å±‚æä¾›çš„ç»“æ„ä½“, è°ƒç”¨é‡Œé¢çš„å‡½æ•°, å½“ç¼–è¯‘é©±åŠ¨ç¨‹åºæ—¶, è¦æŠŠå…¬å…±éƒ¨åˆ†å’Œå•æ¿éƒ¨åˆ†ç¼–è¯‘æˆä¸€ä¸ª.koæ–‡ä»¶. 1234struct led_operations &#123;int (*init) (int which); /* åˆå§‹åŒ–LED,which-å“ªä¸ªLED */int (*ctl) (int which, int status); /* æ§åˆ¶LED,which-å“ªä¸ªLEDï¼Œstatus:1-äº®,0-ç­*/&#125;; æ¯ä¸ªå•æ¿ç›¸å…³çš„board_X.cå®ç°è‡ªå·±çš„led_operationsç»“æ„ä½“ï¼Œä¾›ä¸Šå±‚çš„leddrv.cè°ƒç”¨ï¼š ä»£ç (ä»¥é¢å‘å¯¹è±¡ä¸ºä¾‹) D:\\imx6ull\\01_all_series_quickstart\\05_åµŒå…¥å¼Linuxé©±åŠ¨å¼€å‘åŸºç¡€çŸ¥è¯†\\source\\02_led_drv\\01_led_drv_template å…·ä½“å•æ¿çš„LEDé©±åŠ¨ æ€ä¹ˆå†™LEDé©±åŠ¨ç¨‹åº â‘  çœ‹åŸç†å›¾ç¡®å®šå¼•è„šï¼Œç¡®å®šå¼•è„šè¾“å‡ºä»€ä¹ˆç”µå¹³æ‰èƒ½ç‚¹äº®/ç†„ç­LED â‘¡ çœ‹ä¸»èŠ¯ç‰‡æ‰‹å†Œï¼Œç¡®å®šå¯„å­˜å™¨æ“ä½œæ–¹æ³•ï¼šå“ªäº›å¯„å­˜å™¨ï¼Ÿå“ªäº›ä½ï¼Ÿåœ°å€æ˜¯ï¼Ÿ â‘¢ ç¼–å†™é©±åŠ¨ï¼šå…ˆå†™æ¡†æ¶ï¼Œå†å†™ç¡¬ä»¶æ“ä½œçš„ä»£ç  æ³¨æ„ï¼šåœ¨èŠ¯ç‰‡æ‰‹å†Œä¸­ç¡®å®šçš„å¯„å­˜å™¨åœ°å€è¢«ç§°ä¸ºç‰©ç†åœ°å€ï¼Œåœ¨Linuxå†…æ ¸ä¸­æ— æ³•ç›´æ¥ä½¿ç”¨ã€‚éœ€è¦ä½¿ç”¨å†…æ ¸æä¾›çš„ioremapæŠŠç‰©ç†åœ°å€æ˜ å°„ä¸ºè™šæ‹Ÿåœ°å€ï¼Œä½¿ç”¨è™šæ‹Ÿåœ°å€ã€‚ 123456789101112131415161718192021222324252627282930313233ioremapå‡½æ•°çš„ä½¿ç”¨ï¼šç‰©ç†åœ°å€æ˜ å°„ä¸ºè™šæ‹Ÿåœ°å€â‘  å‡½æ•°åŸå‹ï¼š void __iomem *ioremap(resource_size_t res_cokkie, size_t size)ä½¿ç”¨æ—¶ï¼Œè¦åŒ…å«å¤´æ–‡ä»¶ï¼š#include &lt;asm/io.h&gt; â‘¡ å®ƒçš„ä½œç”¨ï¼šæŠŠç‰©ç†åœ°å€phys_addrå¼€å§‹çš„ä¸€æ®µç©ºé—´(å¤§å°ä¸ºsize)ï¼Œæ˜ å°„ä¸ºè™šæ‹Ÿåœ°å€ï¼›è¿”å›å€¼æ˜¯è¯¥æ®µè™šæ‹Ÿåœ°å€çš„é¦–åœ°å€ã€‚ virt_addr = ioremap(phys_addr, size);å®é™…ä¸Šï¼Œå®ƒæ˜¯æŒ‰é¡µ(4096å­—èŠ‚)è¿›è¡Œæ˜ å°„çš„ï¼Œæ˜¯æ•´é¡µæ•´é¡µåœ°æ˜ å°„çš„ã€‚å‡è®¾phys_addr = 0x10002ï¼Œsize=4ï¼Œioremapçš„å†…éƒ¨å®ç°æ˜¯ï¼ša. phys_addræŒ‰é¡µå–æ•´ï¼Œå¾—åˆ°åœ°å€0x10000b. sizeæŒ‰é¡µå–æ•´ï¼Œå¾—åˆ°4096c. æŠŠèµ·å§‹åœ°å€0x10000ï¼Œå¤§å°ä¸º4096çš„è¿™ä¸€å—ç‰©ç†åœ°å€ç©ºé—´ï¼Œæ˜ å°„åˆ°è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œ å‡è®¾å¾—åˆ°çš„è™šæ‹Ÿç©ºé—´èµ·å§‹åœ°å€ä¸º0xf0010000d. é‚£ä¹ˆphys_addr = 0x10002å¯¹åº”çš„virt_addr = 0xf0010002â‘¢ ä¸å†ä½¿ç”¨è¯¥æ®µè™šæ‹Ÿåœ°å€æ—¶ï¼Œè¦iounmap(virt_addr)ï¼š void iounmap(volatile void __iomem *cokkie)volatileçš„ä½¿ç”¨ï¼šâ‘  ç¼–è¯‘å™¨å¾ˆèªæ˜ï¼Œä¼šå¸®æˆ‘ä»¬åšäº›ä¼˜åŒ–ï¼Œæ¯”å¦‚ï¼šint a;a = 0; // è¿™å¥è¯å¯ä»¥ä¼˜åŒ–æ‰ï¼Œä¸å½±å“açš„ç»“æœa = 1;â‘¡ æœ‰æ—¶å€™ç¼–è¯‘å™¨ä¼šè‡ªä½œèªæ˜ï¼Œæ¯”å¦‚ï¼šint *p = ioremap(xxxx, 4); // GPIOå¯„å­˜å™¨çš„åœ°å€*p = 0; // ç‚¹ç¯ï¼Œä½†æ˜¯è¿™å¥è¯è¢«ä¼˜åŒ–æ‰äº†*p = 1; // ç­ç¯â‘¢ å¯¹äºä¸Šé¢çš„æƒ…å†µï¼Œä¸ºäº†é¿å…ç¼–è¯‘å™¨è‡ªåŠ¨ä¼˜åŒ–ï¼Œéœ€è¦åŠ ä¸Švolatileï¼Œå‘Šè¯‰å®ƒâ€œè¿™æ˜¯å®¹æ˜“å‡ºé”™çš„ï¼Œåˆ«ä¹±ä¼˜åŒ–â€ï¼švolatile int *p = ioremap(xxxx, 4); // GPIOå¯„å­˜å™¨çš„åœ°å€*p = 0; // ç‚¹ç¯ï¼Œè¿™å¥è¯ä¸ä¼šè¢«ä¼˜åŒ–æ‰*p = 1; // ç­ç¯ ä¸ºä»€ä¹ˆéœ€è¦ioremap? è¿è¡Œå³ä¸Šè§’ä»£ç ä¿©æ¬¡, é‚£ä¹ˆåœ¨å†…å­˜ä¸­å¿…å®šæœ‰ä¿©ä»½ä»£ç , åŒä¸€ä»½ç¨‹åºè¿è¡Œæ—¶æ‰“å°å‡ºæ¥çš„å…¨å±€å˜é‡åœ°å€ä¸€æ ·å˜›? å¦‚å›¾, Aä¿å­˜åœ¨ç‰©ç†åœ°å€addrAä¸Š, Bä¿å­˜åœ¨ç‰©ç†åœ°å€addrBä¸Š, ä½†æ˜¯ä»–ä»¬æ‰“å°çš„åœ°å€éƒ½æ˜¯ä¸€æ ·çš„, æ˜¾ç„¶ä»£ç æ‰“å°çš„å¹¶ä¸æ˜¯ç‰©ç†åœ°å€,æ‰“å°çš„æ˜¯CPUçœ‹åˆ°çš„è™šæ‹Ÿåœ°å€, CPUä½¿ç”¨åŒä¸€ä¸ªåœ°å€addræ¥è®¿é—®è¿™ä¿©ä¸ªç¨‹åº, è¿è¡Œç¨‹åºAæ—¶, MMUé‡Œé¢ä¼šæœ‰ä¸€ä¸ªpid, æ ¹æ®Açš„è¿›ç¨‹å· æŠŠCPUè¿™ä¸ªaddrè½¬æ¢æˆç¨‹åºAè¿™ä¸ªå˜é‡çš„ç‰©ç†åœ°å€, å¯¹Bä¹Ÿä¸€æ ·. å¯¹äºç¨‹åºAå’ŒB, è™½ç„¶CPUå‘å‡ºçš„æ˜¯åŒä¸€ä»½åœ°å€, ä»–ä»¬çš„è¿›ç¨‹å·ä¸ä¸€æ ·å¯¼è‡´äº†ä»–ä»¬çš„ç‰©ç†åœ°å€ä¸ä¸€æ ·. ç”±MMUå®ç°ä»è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢. MMU: å†…å­˜ç®¡ç†å•å…ƒ. åœ°å€æ˜ å°„ æƒé™ä¿æŠ¤ : å„ä¸ªç¨‹åºåœ°å€é—´éœ€è¦æœ‰äº’ç›¸éš”ç¦»çš„ä½œç”¨,ä¹Ÿä¸èƒ½å»ç›´æ¥è®¿é—®ç¡¬ä»¶. CPUå‘å‡ºçš„addr, èƒ½ä¸èƒ½è®¿é—®åˆ°ç¡¬ä»¶å¾—ç”±MMUæ¥å†³å®š. å¯¹å†…æ ¸ä¹Ÿæ˜¯ä¸€æ ·çš„, å†…æ ¸èƒ½ä¸èƒ½è®¿é—®åˆ°ç¡¬ä»¶ä¹Ÿæ˜¯ç”±MMUæ¥å†³å®š, MMUæŠŠç‰©ç†åœ°å€æ˜ å°„æˆè™šæ‹Ÿåœ°å€, å†…æ ¸æ‰èƒ½ä½¿ç”¨è™šæ‹Ÿåœ°å€å»è®¿é—®è¿™äº›ç¡¬ä»¶. ç¨‹åº 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109#include &lt;linux/module.h&gt;#include &lt;linux/fs.h&gt;#include &lt;linux/errno.h&gt;#include &lt;linux/miscdevice.h&gt;#include &lt;linux/kernel.h&gt;#include &lt;linux/major.h&gt;#include &lt;linux/mutex.h&gt;#include &lt;linux/proc_fs.h&gt;#include &lt;linux/seq_file.h&gt;#include &lt;linux/stat.h&gt;#include &lt;linux/init.h&gt;#include &lt;linux/device.h&gt;#include &lt;linux/tty.h&gt;#include &lt;linux/kmod.h&gt;#include &lt;linux/gfp.h&gt;#include &lt;asm/io.h&gt;#include &quot;led_opr.h&quot;static volatile unsigned int *CCM_CCGR1 ;static volatile unsigned int *IOMUXC_SNVS_SW_MUX_CTL_PAD_SNVS_TAMPER3;static volatile unsigned int *GPIO5_GDIR ;static volatile unsigned int *GPIO5_DR ;static int board_demo_led_init (int which) /* åˆå§‹åŒ–LED, which-å“ªä¸ªLED */ &#123; unsigned int val; //printk(&quot;%s %s line %d, led %d\\n&quot;, __FILE__, __FUNCTION__, __LINE__, which); if (which == 0) &#123; if (!CCM_CCGR1) &#123; CCM_CCGR1 = ioremap(0x20C406C, 4); IOMUXC_SNVS_SW_MUX_CTL_PAD_SNVS_TAMPER3 = ioremap(0x2290014, 4); GPIO5_GDIR = ioremap(0x020AC000 + 0x4, 4); GPIO5_DR = ioremap(0x020AC000 + 0, 4); &#125; /* GPIO5_IO03 */ /* a. ä½¿èƒ½GPIO5 * set CCM to enable GPIO5 * CCM_CCGR1[CG15] 0x20C406C * bit[31:30] = 0b11 */ *CCM_CCGR1 |= (3&lt;&lt;30); /* b. è®¾ç½®GPIO5_IO03ç”¨äºGPIO * set IOMUXC_SNVS_SW_MUX_CTL_PAD_SNVS_TAMPER3 * to configure GPIO5_IO03 as GPIO * IOMUXC_SNVS_SW_MUX_CTL_PAD_SNVS_TAMPER3 0x2290014 * bit[3:0] = 0b0101 alt5 */ val = *IOMUXC_SNVS_SW_MUX_CTL_PAD_SNVS_TAMPER3;//è¿™æ ·åªåšä¸€æ¬¡è¯»æ“ä½œ val &amp;= ~(0xf); val |= (5); *IOMUXC_SNVS_SW_MUX_CTL_PAD_SNVS_TAMPER3 = val; /* b. è®¾ç½®GPIO5_IO03ä½œä¸ºoutputå¼•è„š * set GPIO5_GDIR to configure GPIO5_IO03 as output * GPIO5_GDIR 0x020AC000 + 0x4 * bit[3] = 0b1 */ *GPIO5_GDIR |= (1&lt;&lt;3); &#125; return 0;&#125;static int board_demo_led_ctl (int which, char status) /* æ§åˆ¶LED, which-å“ªä¸ªLED, status:1-äº®,0-ç­ */&#123; //printk(&quot;%s %s line %d, led %d, %s\\n&quot;, __FILE__, __FUNCTION__, __LINE__, which, status ? &quot;on&quot; : &quot;off&quot;); if (which == 0) &#123; if (status) /* on: output 0*/ &#123; /* d. è®¾ç½®GPIO5_DRè¾“å‡ºä½ç”µå¹³ * set GPIO5_DR to configure GPIO5_IO03 output 0 * GPIO5_DR 0x020AC000 + 0 * bit[3] = 0b0 */ *GPIO5_DR &amp;= ~(1&lt;&lt;3); &#125; else /* off: output 1*/ &#123; /* e. è®¾ç½®GPIO5_IO3è¾“å‡ºé«˜ç”µå¹³ * set GPIO5_DR to configure GPIO5_IO03 output 1 * GPIO5_DR 0x020AC000 + 0 * bit[3] = 0b1 */ *GPIO5_DR |= (1&lt;&lt;3); &#125; &#125; return 0;&#125;static struct led_operations board_demo_led_opr = &#123; .num = 1, .init = board_demo_led_init, .ctl = board_demo_led_ctl,&#125;;struct led_operations *get_board_led_opr(void)&#123; return &amp;board_demo_led_opr;&#125; é©±åŠ¨è®¾è®¡çš„æ€æƒ³ Linuxé©±åŠ¨ = é©±åŠ¨æ¡†æ¶ + ç¡¬ä»¶æ“ä½œ = é©±åŠ¨æ¡†æ¶ + å•ç‰‡æœº é¢å‘å¯¹è±¡ å­—ç¬¦è®¾å¤‡é©±åŠ¨ç¨‹åºæŠ½è±¡å‡ºä¸€ä¸ªfile_operationsç»“æ„ä½“ï¼› æˆ‘ä»¬å†™çš„ç¨‹åºé’ˆå¯¹ç¡¬ä»¶éƒ¨åˆ†æŠ½è±¡å‡ºled_operationsç»“æ„ä½“ã€‚ åˆ†å±‚ ä¸Šä¸‹åˆ†å±‚ï¼Œæ¯”å¦‚æˆ‘ä»¬å‰é¢å†™çš„LEDé©±åŠ¨ç¨‹åºå°±åˆ†ä¸º2å±‚ï¼š â‘  ä¸Šå±‚å®ç°ç¡¬ä»¶æ— å…³çš„æ“ä½œï¼Œæ¯”å¦‚æ³¨å†Œå­—ç¬¦è®¾å¤‡é©±åŠ¨ï¼šleddrv.c â‘¡ ä¸‹å±‚å®ç°ç¡¬ä»¶ç›¸å…³çš„æ“ä½œï¼Œæ¯”å¦‚board_A.cå®ç°å•æ¿Açš„LEDæ“ä½œ é€šè¿‡åˆ†å±‚çš„æ€æƒ³, å†™ä¸åŒæ¿å­çš„æ—¶å€™æ¯”è¾ƒçœæ—¶çœåŠ›. åªéœ€ä¸“æ³¨å•æ¿ç¡¬ä»¶æ“ä½œ åˆ†ç¦» åœ¨ä¹‹å‰å®ç°çš„å•æ¿ç¨‹åºä¸­, ä¸€äº›å‡½æ•°å˜é‡å’ŒèŠ¯ç‰‡ç»™ç»‘å®šå¤ªç´§äº†, æ¢ä¸€ä¸ªç¯å•¥çš„æ¢ä¸€ä¸ªå¼•è„šå°±éœ€è¦é‡æ–°ç¼–å†™ä»£ç  åœ¨board_A.cä¸­ï¼Œå®ç°äº†ä¸€ä¸ªled_operationsï¼Œä¸ºLEDå¼•è„šå®ç°äº†åˆå§‹åŒ–å‡½æ•°ã€æ§åˆ¶å‡½æ•°ï¼š 12345static struct led_operations board_demo_led_opr = &#123; .num = 1, .init = board_demo_led_init, .ctl = board_demo_led_ctl,&#125;; å¦‚æœç¡¬ä»¶ä¸Šæ›´æ¢ä¸€ä¸ªå¼•è„šæ¥æ§åˆ¶LEDæ€ä¹ˆåŠï¼Ÿä½ è¦å»ä¿®æ”¹ä¸Šé¢ç»“æ„ä½“ä¸­çš„initã€ctlå‡½æ•°ã€‚ å®é™…æƒ…å†µæ˜¯ï¼Œæ¯ä¸€æ¬¾èŠ¯ç‰‡å®ƒçš„GPIOæ“ä½œéƒ½æ˜¯ç±»ä¼¼çš„ã€‚æ¯”å¦‚ï¼šGPIO1_3ã€GPIO5_4è¿™2ä¸ªå¼•è„šæ¥åˆ°LEDï¼š GPIO1_3å±äºç¬¬1ç»„ï¼Œå³GPIO1ã€‚ æœ‰æ–¹å‘å¯„å­˜å™¨DIRã€æ•°æ®å¯„å­˜å™¨DRç­‰ï¼ŒåŸºç¡€åœ°å€æ˜¯addr_base_addr_gpio1ã€‚ è®¾ç½®ä¸ºoutputå¼•è„šï¼šä¿®æ”¹GPIO1çš„DIRå¯„å­˜å™¨çš„bit3ã€‚ è®¾ç½®è¾“å‡ºç”µå¹³ï¼šä¿®æ”¹GPIO1çš„DRå¯„å­˜å™¨çš„bit3ã€‚ GPIO5_4å±äºç¬¬5ç»„ï¼Œå³GPIO5ã€‚ æœ‰æ–¹å‘å¯„å­˜å™¨DIRã€æ•°æ®å¯„å­˜å™¨DRç­‰ï¼ŒåŸºç¡€åœ°å€æ˜¯addr_base_addr_gpio5ã€‚ è®¾ç½®ä¸ºoutputå¼•è„šï¼šä¿®æ”¹GPIO5çš„DIRå¯„å­˜å™¨çš„bit4ã€‚ è®¾ç½®è¾“å‡ºç”µå¹³ï¼šä¿®æ”¹GPIO5çš„DRå¯„å­˜å™¨çš„bit4ã€‚ æ—¢ç„¶å¼•è„šæ“ä½œé‚£ä¹ˆæœ‰è§„å¾‹ï¼Œå¹¶ä¸”è¿™æ˜¯è·Ÿä¸»èŠ¯ç‰‡ç›¸å…³çš„ï¼Œé‚£å¯ä»¥é’ˆå¯¹è¯¥èŠ¯ç‰‡å†™å‡ºæ¯”è¾ƒé€šç”¨çš„ç¡¬ä»¶æ“ä½œä»£ç ã€‚ æ¯”å¦‚board_A.cä½¿ç”¨èŠ¯ç‰‡chipYï¼Œé‚£å°±å¯ä»¥å†™å‡ºï¼šchipY_gpio.cï¼Œå®ƒå®ç°èŠ¯ç‰‡Yçš„GPIOæ“ä½œï¼Œé€‚ç”¨äºèŠ¯ç‰‡Yçš„æ‰€æœ‰GPIOå¼•è„šã€‚ ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨board_A_led.cä¸­æŒ‡å®šä½¿ç”¨å“ªä¸€ä¸ªå¼•è„šå³å¯ã€‚ ç¨‹åºç»“æ„å¦‚ä¸‹ï¼š æŸæ¬¾èŠ¯ç‰‡å¯ä»¥å†™å‡ºgpioç¨‹åºå»æ”¯æŒæ‰€æœ‰gpioçš„æ“ä½œ,å½“æƒ³æ“ä½œæŸä¸€ä¸ªå¼•è„šçš„æ—¶å€™, å‘Šè¯‰å®ƒéœ€è¦ç”¨å“ªä¸ªgpio. å·¦å³åˆ†ç¦»,å·¦è¾¹å®šä¹‰èµ„æº,å³è¾¹æ˜¯ç¡¬ä»¶é€šç”¨ä»£ç  ä»¥é¢å‘å¯¹è±¡çš„æ€æƒ³ï¼Œåœ¨board_A_led.cä¸­å®ç°led_resouceç»“æ„ä½“ï¼Œå®ƒå®šä¹‰â€œèµ„æºâ€â”€â”€è¦ç”¨å“ªä¸€ä¸ªå¼•è„šã€‚ åœ¨chipY_gpio.cä¸­ä»æ˜¯å®ç°led_operationsç»“æ„ä½“ï¼Œå®ƒè¦å†™å¾—æ›´å®Œå–„ï¼Œæ”¯æŒæ‰€æœ‰GPIOã€‚ ä»£ç æŸ¥çœ‹æ–‡ä»¶å¤¹\\source\\02_led_drv\\03_led_drv_template_seperate æ€»çº¿è®¾å¤‡é©±åŠ¨æ¨¡å‹ é©±åŠ¨ç¼–å†™çš„æ–¹æ³• ä¼ ç»Ÿå†™æ³• å®šä¹‰file_operationç»“æ„ä½“,åœ¨é‡Œé¢æä¾›åº”ç”¨ç¨‹åºè¦ç”¨åˆ°çš„å‡½æ•°, åœ¨é©±åŠ¨ç¨‹åºé‡Œæä¾›å¯¹åº”çš„openreadç­‰,ç„¶ååœ¨é©±åŠ¨ç¨‹åºé‡Œæ“ä½œé‚£äº›å¯„å­˜å™¨å°±å¯ä»¥äº†. ä½¿ç”¨å“ªä¸ªå¼•è„šï¼Œæ€ä¹ˆæ“ä½œå¼•è„šï¼Œéƒ½å†™æ­»åœ¨ä»£ç ä¸­ã€‚ æœ€ç®€å•ï¼Œä¸è€ƒè™‘æ‰©å±•æ€§ï¼Œå¯ä»¥å¿«é€Ÿå®ç°åŠŸèƒ½ã€‚ ä¿®æ”¹å¼•è„šæ—¶ï¼Œéœ€è¦é‡æ–°ç¼–è¯‘ã€‚ æ€»çº¿è®¾å¤‡é©±åŠ¨æ¨¡å‹ ç¡¬ä»¶èµ„æºç”¨ä¸€ä¸ªå¹³å°platform_deviceæ¥è¡¨ç¤º(å®šä¹‰äº†å¼•è„š,å¯„å­˜å™¨), å¯¹äºç¡¬ä»¶çš„æ“ä½œæ”¾åœ¨platform_driveré‡Œé¢(å›ºå®šçš„é©±åŠ¨ç¨‹åº) ç”¨ä¸€ä¸ªæ€»çº¿Busæ¥ç®¡ç†, æ€»çº¿çš„å·¦è¾¹æ˜¯device, å³è¾¹æ˜¯drv.ä»–ä»¬ä¿©ä¿©åŒ¹é…, è¿™æ˜¯å¯¹åˆ†ç¦»çš„è®¾è®¡æ€æƒ³æ›´å¥½çš„å®ç°. ä»¥å‰æŠ½è±¡å‡ºäº†led_resource,åªèƒ½æ”¯æŒled. ç°åœ¨åœ¨platform_deviceå¯ä»¥å­˜å…¥å„ç§èµ„æº è®¾å¤‡æ ‘ å­˜åœ¨dtsæ–‡ä»¶,å­˜å…¥äº†é©±åŠ¨çš„å¼•è„šç­‰ä¿¡æ¯, ä¼šè¢«ç¼–è¯‘æˆdtbæ–‡ä»¶ä¼ é€’ç»™å†…æ ¸, å†…æ ¸ä¼šè§£æè¿™ä¸ªæ–‡ä»¶å¹¶æ„é€ å‡ºä¸€ç³»åˆ—çš„platform_device. å³dtsã€dtbæ˜¯æ”¾åœ¨å†…æ ¸ä¹‹å¤–çš„,ä¿æŒäº†Linuxä»£ç ä¼˜é›…, å³æ€»çº¿è®¾å¤‡æ¨¡å‹å’Œè®¾å¤‡æ ‘æ˜¯ç±»ä¼¼çš„,å¹¶ä¸æ¶‰åŠé©±åŠ¨ç¨‹åºçš„æ ¸å¿ƒ(åˆ†é…è®¾ç½®æ³¨å†Œfile_operation,ioremapæ“ä½œå¯„å­˜å™¨), è®¾å¤‡ä»…ä»…æ˜¯æŒ‡å®šç¡¬ä»¶ä½¿ç”¨å“ªäº›å¼•è„š,å“ªä¸ªèµ„æº. Bus/Dev/Drvæ¨¡å‹ é¦–å…ˆåœ¨å†…æ ¸é‡Œé¢æœ‰ä¸€ä¸ªæ€»çº¿platform_bus_type, è¿™ä¸ªæ€»çº¿æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„æ€»çº¿,å®ƒæœ‰ä¿©ä¸ªé“¾è¡¨, å·¦è¾¹æ˜¯è®¾å¤‡é“¾è¡¨,å³è¾¹æ˜¯é©±åŠ¨é“¾è¡¨,å½“æˆ‘ä»¬å»æ³¨å†Œä¸€ä¸ªå¹³å°è®¾å¤‡æ—¶,å°±ä¼šæ”¾å…¥å·¦è¾¹çš„é“¾è¡¨, æ³¨å†Œä¸€ä¸ªå¹³å°driveræ—¶æ”¾å…¥å³è¾¹çš„é“¾è¡¨. è¿™äº›ç»“æ„ä½“æ”¾å…¥é“¾è¡¨ä¹‹åå°±ä¼šé©¬ä¸Šè·Ÿå¯¹æ–¹çš„æˆå‘˜ä¸€ä¸€æ¯”è¾ƒ, æ¯”å¦‚: å°†ä¸€ä¸ªplatform_deviceæ³¨å†Œè¿›å†…æ ¸é‡Œé¢, åŒæ—¶ä¼šæŠŠdrvé‡Œé¢ä¸€ä¸ªä¸ªæ¯”è¾ƒä¸€ä¸‹, å¦‚æœåŒ¹é…æˆåŠŸå°±ä¼šè°ƒç”¨å†…ä¸ªdrvé‡Œé¢çš„probeå‡½æ•°. å½“æ³¨å†Œä¸€ä¸ªplatform_driveræ—¶,åŒæ—¶ä¹Ÿä¼šå»å’Œè®¾å¤‡é“¾è¡¨ä¸€ä¸€æ¯”è¾ƒ, å¦‚æœåŒ¹é…æˆåŠŸå°±è°ƒç”¨drvé‡Œé¢çš„probeå‡½æ•°å»å¤„ç†å†…ä¸ªdevice. å¦‚ä½•çŸ¥é“æ˜¯å¦åŒ¹é…æˆåŠŸ? æ€»çº¿è¿™é‡Œplatform_bus_typeé‡Œæœ‰ä¸€ä¸ªmatchå‡½æ•°, ç”¨æ¥åˆ¤æ–­devå’Œdrvæ˜¯å¦åŒ¹é…. devé‡Œé¢æœ‰æˆå‘˜nameå’Œdriver_override(éå®ƒä¸å«), drvé‡Œé¢nameæ”¾åœ¨struct device_driver driveræˆå‘˜é‡Œé¢, è¿˜æœ‰æ•°ç»„id_table,è¡¨ç¤ºèƒ½æ”¯æŒå“ªäº›è®¾å¤‡. æ¯”è¾ƒè¿‡ç¨‹: devé‡Œé¢å¦‚æœå®šä¹‰äº†driver_override,å°±ä¼šæ ¹æ®è¿™ä¸ªåå­—å»æŸ¥æ‰¾drv, å¦‚æœdrvé‡Œçš„nameç­‰äºçš„è¯è¡¨ç¤ºæ‰¾åˆ°. å¦‚æœæ²¡æœ‰å®šä¹‰driver_overrideå°±è¿›è¡Œç¬¬äºŒæ¬¡æ¯”è¾ƒ, å¦‚æœdrvçš„id_tableä¸æ˜¯ç©ºçš„, å°±ä½¿ç”¨devçš„nameè·Ÿid_tableé‡Œæ¯ä¸€é¡¹è¿›è¡Œæ¯”è¾ƒ, å¦‚æœå»åˆçš„è¯å°±è¡¨æ˜è¿™ä¿©é¡¹æ˜¯åŒ¹é…çš„, å¦‚æœid_tableä¸ºç©ºæˆ–è€…åŒ¹é…ä¸æˆåŠŸå°±ä¼šç”¨devé‡Œçš„nameå’Œdrvé‡Œçš„nameå»æ¯”è¾ƒ(å®é™…ä¸­è¿™ç§æ¯”è¾ƒç”¨çš„æ¯”è¾ƒå¤š,id_tableä¹Ÿå¤š,ä½†ä½¿ç”¨driver_overrideæ¯”è¾ƒå°‘). å¯åŠ¨è¿‡ç¨‹æ˜¯æ€ä¹ˆå¯åŠ¨çš„? æ— è®ºæ˜¯æ³¨å†Œå¹³å°devè¿˜æ˜¯å¹³å°drv,éƒ½ä¼šå…ˆæ”¾å…¥é“¾è¡¨ç„¶åä»å¦å¤–çš„é“¾è¡¨æŠŠå¯¹æ–¹çš„æ¯ä¸ªæˆå‘˜ä¸€ä¸€æ¯”è¾ƒ è°ƒç”¨å…³ç³» 123456789101112131415161718192021platform_device_registerplatform_device_add device_add bus_add_device // æ”¾å…¥é“¾è¡¨ bus_probe_device // probeæšä¸¾è®¾å¤‡ï¼Œå³æ‰¾åˆ°åŒ¹é…çš„(dev, drv) device_initial_probe __device_attach bus_for_each_drv(...,__device_attach_driver,...) __device_attach_driver driver_match_device(drv, dev) // æ˜¯å¦åŒ¹é… driver_probe_device // è°ƒç”¨drvçš„probeplatform_driver_register__platform_driver_register driver_register bus_add_driver // æ”¾å…¥é“¾è¡¨ driver_attach(drv) bus_for_each_dev(drv-&gt;bus, NULL, drv, __driver_attach); __driver_attach driver_match_device(drv, dev) // æ˜¯å¦åŒ¹é… driver_probe_device // è°ƒç”¨drvçš„probe ç¨‹åºç¼–å†™ â‘ åˆ†é…/è®¾ç½®/æ³¨å†Œplatform_deviceç»“æ„ä½“ åœ¨é‡Œé¢å®šä¹‰æ‰€ç”¨èµ„æºï¼ŒæŒ‡å®šè®¾å¤‡åå­—ã€‚ â‘¡åˆ†é…/è®¾ç½®/æ³¨å†Œplatform_driverç»“æ„ä½“ åœ¨å…¶ä¸­çš„probeå‡½æ•°é‡Œï¼Œåˆ†é…/è®¾ç½®/æ³¨å†Œfile_operationsç»“æ„ä½“ï¼Œå¹¶ä»platform_deviceä¸­ç¡®å®æ‰€ç”¨ç¡¬ä»¶èµ„æºã€‚ æŒ‡å®šplatform_driverçš„åå­—ã€‚ LEDé©±åŠ¨[æ€»çº¿è®¾å¤‡é©±åŠ¨æ¨¡å‹] éœ€è¦å®ç°çš„æ¡†æ¶ ä»£ç  12\\source\\02_led_drv\\04_led_drv_template_bus_dev_drv éœ€è¦ä¸æ–­ç†Ÿæ‚‰!!! é©±åŠ¨å†…éƒ¨è°ƒç”¨æµç¨‹ led_dev.cçš„å…¥å£å‡½æ•°å¼€å§‹, register_chrdev [ led_devé‡Œé¢æœ‰led_drv_open/readå‡½æ•°,ä½†æ˜¯æ²¡æœ‰å’Œç¡¬ä»¶æŒ‚é’©, p_led_oprç»“æ„ä½“è¿˜æ˜¯ç©ºçš„ ] -&gt;åˆ›å»ºç±» è®¾å¤‡ç›¸å…³board_A_led.c [ å…¥å£å‡½æ•°é‡Œé¢å»æ³¨å†Œplatform_device_register ] chip_demo_gpio.c [ å…¥å£å‡½æ•°é‡Œé¢æ³¨å†Œplatform_driver_registerå¹¶ä¸”è°ƒç”¨register_led_operationså‘ä¸Šå±‚(leddrv.c)æä¾›äº†ledçš„æ“ä½œå‡½æ•°,ä¸»è¦åœ¨platform_driveré‡Œé¢çš„probeå‡½æ•°,å½“platform_driverå’ŒåŒåçš„platform_deviceåŒåä¹‹å,chip_demo_gpio_led_probeå‡½æ•°å°±è¢«è°ƒç”¨ ( ä»å¹³å°è®¾å¤‡é‡Œé¢è·å¾—èµ„æº, æŠŠé‚£äº›å¼•è„šè®°å½•ä¸‹æ¥åŒæ—¶è°ƒç”¨led_device_createå‡½æ•°åˆ›å»ºdevice,è¿™æ ·ç³»ç»Ÿä¼šå¸®æˆ‘ä»¬åˆ›å»ºè®¾å¤‡èŠ‚ç‚¹,åº”ç”¨ç¨‹åºæ‰å¯ä»¥æ‰“å¼€èŠ‚ç‚¹ ) ] åº”ç”¨ç¨‹åºæ‰“å¼€èŠ‚ç‚¹ä¹‹å,å°±ä¼šè¿›å…¥æœ€ä¸Šä¸€å±‚è°ƒç”¨openå‡½æ•° ( led_drv_open ), è°ƒç”¨initè¿›å…¥åˆ°åº•å±‚initå‡½æ•°(board_demo_led_init)","categories":[{"name":"åµŒå…¥å¼","slug":"åµŒå…¥å¼","permalink":"https://blogs.leechee.top/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/"}],"tags":[{"name":"åµŒå…¥å¼","slug":"åµŒå…¥å¼","permalink":"https://blogs.leechee.top/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/"},{"name":"C/C++","slug":"C-C","permalink":"https://blogs.leechee.top/tags/C-C/"},{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://blogs.leechee.top/tags/%E5%AD%A6%E4%B9%A0/"},{"name":"Drivers","slug":"Drivers","permalink":"https://blogs.leechee.top/tags/Drivers/"}]},{"title":"Hello Hex","slug":"hello-world","date":"2021-01-01T15:21:13.000Z","updated":"2023-01-11T14:18:53.645Z","comments":true,"path":"posts/4a17b156/","link":"","permalink":"https://blogs.leechee.top/posts/4a17b156/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick Start Create a new post 1$ hexo new &quot;My New Post&quot; More info: Writing Run server 1$ hexo server More info: Server Generate static files 1$ hexo generate More info: Generating Deploy to remote sites 1$ hexo deploy More info: Deployment","categories":[{"name":"HexoPost","slug":"HexoPost","permalink":"https://blogs.leechee.top/categories/HexoPost/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"https://blogs.leechee.top/tags/hexo/"},{"name":"post","slug":"post","permalink":"https://blogs.leechee.top/tags/post/"}]}],"categories":[{"name":"Linux","slug":"Linux","permalink":"https://blogs.leechee.top/categories/Linux/"},{"name":"åµŒå…¥å¼","slug":"åµŒå…¥å¼","permalink":"https://blogs.leechee.top/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/"},{"name":"DataStructure","slug":"DataStructure","permalink":"https://blogs.leechee.top/categories/DataStructure/"},{"name":"C/C++","slug":"C-C","permalink":"https://blogs.leechee.top/categories/C-C/"},{"name":"Tips","slug":"Tips","permalink":"https://blogs.leechee.top/categories/Tips/"},{"name":"HexoPost","slug":"HexoPost","permalink":"https://blogs.leechee.top/categories/HexoPost/"},{"name":"Project","slug":"Project","permalink":"https://blogs.leechee.top/categories/Project/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://blogs.leechee.top/tags/Linux/"},{"name":"åµŒå…¥å¼","slug":"åµŒå…¥å¼","permalink":"https://blogs.leechee.top/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/"},{"name":"ubuntu","slug":"ubuntu","permalink":"https://blogs.leechee.top/tags/ubuntu/"},{"name":"C/C++","slug":"C-C","permalink":"https://blogs.leechee.top/tags/C-C/"},{"name":"QT","slug":"QT","permalink":"https://blogs.leechee.top/tags/QT/"},{"name":"é¡¹ç›®","slug":"é¡¹ç›®","permalink":"https://blogs.leechee.top/tags/%E9%A1%B9%E7%9B%AE/"},{"name":"unbuntu","slug":"unbuntu","permalink":"https://blogs.leechee.top/tags/unbuntu/"},{"name":"é«˜å¹¶å‘","slug":"é«˜å¹¶å‘","permalink":"https://blogs.leechee.top/tags/%E9%AB%98%E5%B9%B6%E5%8F%91/"},{"name":"C++","slug":"C","permalink":"https://blogs.leechee.top/tags/C/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"https://blogs.leechee.top/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ’åº","slug":"æ’åº","permalink":"https://blogs.leechee.top/tags/%E6%8E%92%E5%BA%8F/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"https://blogs.leechee.top/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"è¯­è¨€","slug":"è¯­è¨€","permalink":"https://blogs.leechee.top/tags/%E8%AF%AD%E8%A8%80/"},{"name":"è®°å½•","slug":"è®°å½•","permalink":"https://blogs.leechee.top/tags/%E8%AE%B0%E5%BD%95/"},{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"https://blogs.leechee.top/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"ROSæœºå™¨äºº","slug":"ROSæœºå™¨äºº","permalink":"https://blogs.leechee.top/tags/ROS%E6%9C%BA%E5%99%A8%E4%BA%BA/"},{"name":"Tips","slug":"Tips","permalink":"https://blogs.leechee.top/tags/Tips/"},{"name":"Windows","slug":"Windows","permalink":"https://blogs.leechee.top/tags/Windows/"},{"name":"hexo","slug":"hexo","permalink":"https://blogs.leechee.top/tags/hexo/"},{"name":"post","slug":"post","permalink":"https://blogs.leechee.top/tags/post/"},{"name":"å¿ƒå¾—","slug":"å¿ƒå¾—","permalink":"https://blogs.leechee.top/tags/%E5%BF%83%E5%BE%97/"},{"name":"å­¦ä¹ ","slug":"å­¦ä¹ ","permalink":"https://blogs.leechee.top/tags/%E5%AD%A6%E4%B9%A0/"},{"name":"Drivers","slug":"Drivers","permalink":"https://blogs.leechee.top/tags/Drivers/"}]}